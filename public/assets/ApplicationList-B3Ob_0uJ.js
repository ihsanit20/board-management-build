import{u as N}from"./application-BOeCtLeW.js";import{u as j}from"./exam-B0Zq0Z2R.js";import{_ as F}from"./ApplicationStatusModal-xIW6Zelu.js";import{f as V}from"./index-DRrsUpCq.js";import{r as v,x as B,o as E,l as P,a as d,c as o,b as e,t as s,d as k,n as _,p as A,F as z,m as R,q as M,y as U,j as $}from"./index-B_n6mduh.js";const q={class:"space-y-2 px-6 py-4"},I={class:"flex justify-between items-center"},T={class:"title-lg"},G={key:0,class:"flex justify-center items-center"},H=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1),J=[H],K={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},O={class:"min-w-full table-auto"},Q=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"#"),e("th",{class:"py-3 px-4 text-left"},"তারিখ"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-left"},"শিক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-left"},"টাকা"),e("th",{class:"py-3 px-4 text-left"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-left"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1),W={class:"text-gray-700 text-sm font-light"},X={class:"py-3 px-4 text-left"},Y={class:"py-3 px-4 text-left"},Z={class:"py-3 px-4 text-left"},i={class:"py-3 px-4 text-left"},p={class:"py-3 px-4 text-left"},tt={class:"py-3 px-4 text-left"},et={class:"py-3 px-4 text-left"},st={class:"py-3 px-4 text-left"},dt={class:"py-3 px-4 text-left"},ot={class:"py-3 px-4 text-center"},rt={class:"flex items-center justify-end gap-2"},nt=["onClick"],_t={key:1},lt=e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1),at=[lt],gt={__name:"ApplicationList",setup(xt){const S=n=>V(new Date(n),"dd-MMM-yyyy"),l=j(),r=N(),a=v(!0),x=v(null),c=B(()=>[...r.applications].sort((n,u)=>new Date(u.created_at)-new Date(n.created_at)));E(async()=>{try{await r.fetchApplications(),await l.fetchLastExam()}finally{a.value=!1}});const C=n=>{x.value=n,r.showStatusModal=!0},h=()=>{r.showStatusModal=!1},D=async()=>{await r.fetchApplications(),h()};return(n,u)=>{var m;const y=P("RouterLink");return d(),o("div",q,[e("div",I,[e("h1",T,s((m=k(l).exam)==null?void 0:m.name)+"-এর নিবন্ধন তালিকা",1),_(y,{to:{name:"ApplicationForm"},class:"btn-2"},{default:A(()=>[M("নতুন নিবন্ধন")]),_:1})]),a.value?(d(),o("div",G,J)):(d(),o("div",K,[e("table",O,[Q,e("tbody",W,[c.value.length?(d(!0),o(z,{key:0},R(c.value,(t,L)=>{var f,g,b,w;return d(),o("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",X,s(L+1),1),e("td",Y,s(S(t==null?void 0:t.created_at)),1),e("td",Z,s((f=t==null?void 0:t.area)==null?void 0:f.name),1),e("td",i,s((g=t==null?void 0:t.institute)==null?void 0:g.name),1),e("td",p,s((b=t==null?void 0:t.zamat)==null?void 0:b.name),1),e("td",tt,s((w=t==null?void 0:t.students)==null?void 0:w.length)+" জন",1),e("td",et,s(t==null?void 0:t.total_amount),1),e("td",st,s(t==null?void 0:t.payment_method),1),e("td",dt,[e("span",{class:U([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},s(t==null?void 0:t.payment_status),3)]),e("td",ot,[e("div",rt,[_(y,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:A(()=>[M("দেখুন")]),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(d(),o("button",{key:0,onClick:ct=>C(t.id),class:"btn-contrast"}," নিবন্ধন গ্রহণ ",8,nt)):$("",!0)])])])}),128)):(d(),o("tr",_t,at))])])])),_(F,{show:k(r).showStatusModal,"application-id":x.value,onClose:h,onDataUpdated:D},null,8,["show","application-id"])])}}};export{gt as default};
