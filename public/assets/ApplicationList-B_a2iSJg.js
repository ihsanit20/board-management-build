import{r as f,z as h,h as I,c as o,a as e,t as d,i as x,y,d as D,w as K,m as c,v as L,B as N,f as g,A as $,F as V,b as z,x as R,o as r,n as B}from"./index-B2JbgT2f.js";import{_ as T}from"./ApplicationStatusModal-BKxJf_PD.js";import{u as Z}from"./application-CnAKXuFl.js";import{u as q}from"./exam-BYTQsWDB.js";import{u as G}from"./zamat-rr9zKeoI.js";const H={class:"space-y-2 px-6 py-4"},J={class:"md:flex justify-between items-center"},O={class:""},Q={class:"title-lg"},W={class:"md:flex divide-x md:divide-black text-sm"},X={class:"md:pr-2"},Y={class:"md:px-2"},p={class:"md:pl-2"},tt={class:"card-bg p-4 grid md:grid-cols-3"},et={class:"relative"},st={class:"relative"},dt=["value"],lt={key:0,class:"flex justify-center items-center"},nt={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},ot={class:"min-w-full table-auto"},rt={class:"text-gray-700 text-sm font-light"},ut={class:"py-3 px-4 text-left"},xt={class:"py-3 px-4 text-center"},at={class:"py-3 px-4 text-center"},mt={class:"py-3 px-4 text-left"},yt={class:"py-3 px-4 text-left"},_t={class:"py-3 px-4 text-left"},ft={class:"py-3 px-4 text-center"},vt={class:"py-3 px-4 text-right"},ht={class:"py-3 px-4 text-center"},ct={class:"py-3 px-4 text-center"},gt={class:"py-3 px-4 text-left"},bt={class:"py-3 px-4 text-center"},wt={class:"flex items-center justify-end gap-2"},kt=["href"],At=["onClick"],St={key:1},zt={__name:"ApplicationList",setup(Ct){const b=q(),w=G(),n=Z(),k=f(null),a=f(""),_=f(""),m=f(""),v=f(!0),U=l=>{k.value=l,n.showStatusModal=!0},A=()=>{n.showStatusModal=!1},F=async()=>{await n.fetchApplications(),A()},P=()=>{const l={};return _.value&&(l.zamat_id=_.value),a.value&&(l.institute_code=a.value),m.value&&(l.application_id=m.value),l},u=async()=>{v.value=!0;const l=P();await n.fetchApplications(l),v.value=!1};return h([_],u),h(m,l=>{l||u()}),h(a,l=>{l||u()}),I(async()=>{b.fetchLastExam(),w.fetchZamats(),n.fetchApplicationCounts(),u()}),(l,s)=>{var S,C,i,M;const j=R("RouterLink");return r(),o("div",H,[e("div",J,[e("div",O,[e("h1",Q,d((S=x(b).exam)==null?void 0:S.name)+"-এর নিবন্ধন তালিকা",1),e("div",W,[e("div",X,[s[3]||(s[3]=y(" মোট নিবন্ধন: ")),e("span",null,d((C=x(n))==null?void 0:C.totalApplications)+" টি",1)]),e("div",Y,[s[4]||(s[4]=y(" পেন্ডিং নিবন্ধন: ")),e("span",null,d((i=x(n))==null?void 0:i.pendingApplications)+" টি",1)]),e("div",p,[s[5]||(s[5]=y(" পেইড নিবন্ধন: ")),e("span",null,d((M=x(n))==null?void 0:M.paidApplications)+" টি",1)])])]),D(j,{to:{name:"ApplicationForm"},class:"btn-2"},{default:K(()=>s[6]||(s[6]=[y("নতুন নিবন্ধন যুক্ত করুন")])),_:1})]),e("div",tt,[e("div",et,[c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:N(u,["enter"])},null,544),[[L,m.value]]),m.value?(r(),o("button",{key:0,onClick:u,class:"absolute right-3 top-2"},s[7]||(s[7]=[e("i",{class:"fas fa-search"},null,-1)]))):g("",!0)]),e("div",st,[c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:N(u,["enter"])},null,544),[[L,a.value]]),a.value?(r(),o("button",{key:0,onClick:u,class:"absolute right-3 top-2"},s[8]||(s[8]=[e("i",{class:"fas fa-search"},null,-1)]))):g("",!0)]),c(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>_.value=t),class:"text-black input-1 px-2 py-1"},[s[9]||(s[9]=e("option",{value:""},"- সকল মারহালা -",-1)),(r(!0),o(V,null,z(x(w).zamats,t=>(r(),o("option",{key:t.id,value:t.id},d(t.name),9,dt))),128))],512),[[$,_.value]])]),v.value?(r(),o("div",lt,s[10]||(s[10]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1)]))):(r(),o("div",nt,[e("table",ot,[s[16]||(s[16]=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"ইউজার"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),e("tbody",rt,[x(n).applications.length?(r(!0),o(V,{key:0},z(x(n).applications,(t,E)=>(r(),o("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",ut,d(E+1),1),e("td",xt,d(new Date(t==null?void 0:t.application_date).toLocaleDateString("bn-BD")),1),e("td",at,d(t==null?void 0:t.id),1),e("td",mt,[e("div",null,d(t==null?void 0:t.institute_code_name),1),e("div",null,[s[11]||(s[11]=e("strong",{class:""},"কেন্দ্র: ",-1)),e("span",{class:B(t!=null&&t.center_name?"":"text-red-500")},d((t==null?void 0:t.center_name)||"নির্বাচন করা নেই"),3)])]),e("td",yt,d(t==null?void 0:t.area_name),1),e("td",_t,d(t==null?void 0:t.zamat_name),1),e("td",ft,d(t==null?void 0:t.student_count)+" জন",1),e("td",vt,d(t==null?void 0:t.total_amount),1),e("td",ht,d(t==null?void 0:t.payment_method),1),e("td",ct,[e("span",{class:B([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},d(t==null?void 0:t.payment_status),3)]),e("td",gt,[e("div",null,[s[12]||(s[12]=e("strong",{class:""},"প্রেরণ: ",-1)),y(d((t==null?void 0:t.submitted_by_name)||"N/A"),1)]),s[14]||(s[14]=e("hr",null,null,-1)),e("div",null,[s[13]||(s[13]=e("strong",{class:""},"গ্রহণ: ",-1)),y(d((t==null?void 0:t.approved_by_name)||"N/A"),1)])]),e("td",bt,[e("div",wt,[e("a",{href:`/applications/${t.id}`,class:"btn-2",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,kt),(t==null?void 0:t.payment_status)==="Pending"?(r(),o("button",{key:0,onClick:it=>U(t.id),class:"btn-contrast"}," গ্রহণ ",8,At)):g("",!0)])])]))),128)):(r(),o("tr",St,s[15]||(s[15]=[e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),D(T,{show:x(n).showStatusModal,"application-id":k.value,onClose:A,onDataUpdated:F},null,8,["show","application-id"])])}}};export{zt as default};
