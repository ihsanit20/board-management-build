import{r as u,x as F,o as P,s as T,l as B,a as n,c as r,b as e,t as o,d as A,n as h,p as M,i as E,v as I,F as U,m as R,q as S,y as $,j as q}from"./index-BGqkStvN.js";import{_ as G}from"./ApplicationStatusModal-DECgtdv7.js";import{u as H}from"./application-DJBZyjRb.js";import{u as J}from"./exam-a9zIXADQ.js";import{f as K}from"./index-DRrsUpCq.js";const O={class:"space-y-2 px-6 py-4"},Q={class:"flex justify-between items-center"},W={class:"title-lg"},X={key:0,class:"flex justify-center items-center"},Y=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1),Z=[Y],p={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},tt={class:"min-w-full table-auto"},et={class:"bg-gray-400 text-white uppercase text-sm leading-normal"},st=e("th",{class:"py-3 px-4 text-left"},"#",-1),ot=e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন তারিখ",-1),dt=e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নাম্বার",-1),nt={class:"py-3 px-4 text-left"},rt={class:"flex flex-wrap gap-1 items-center"},_t=e("span",null,"মাদরাসার কোড ও নাম",-1),ct=e("th",{class:"py-3 px-4 text-left"},"অঞ্চল",-1),at=e("th",{class:"py-3 px-4 text-left"},[e("div",{class:"flex gap-1.5 items-center"},[e("div",null,"মারহালা"),e("select",{value:"zamatId",class:"text-black input-1 p-1"},[e("option",{value:""},"- সকল মারহালা -")])])],-1),lt=e("th",{class:"py-3 px-4 text-center"},"শিক্ষার্থী সংখ্যা",-1),ut=e("th",{class:"py-3 px-4 text-right"},"টাকা",-1),ht=e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড",-1),xt=e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস",-1),mt=e("th",{class:"py-3 px-4 text-center"},"Actions",-1),yt={class:"text-gray-700 text-sm font-light"},ft={class:"py-3 px-4 text-left"},gt={class:"py-3 px-4 text-center"},vt={class:"py-3 px-4 text-center"},wt={class:"py-3 px-4 text-left"},bt={class:"py-3 px-4 text-left"},kt={class:"py-3 px-4 text-left"},it={class:"py-3 px-4 text-center"},At={class:"py-3 px-4 text-right"},Mt={class:"py-3 px-4 text-center"},St={class:"py-3 px-4 text-center"},Ct={class:"py-3 px-4 text-center"},Dt={class:"flex items-center justify-end gap-2"},Lt=["onClick"],zt={key:1},Nt=e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1),Vt=[Nt],Ut={__name:"ApplicationList",setup(jt){const C=s=>K(new Date(s),"dd-MMM-yyyy"),x=J(),d=H(),m=u(!0),y=u(null),c=u(""),D=u(""),f=F(()=>[...d.applications].sort((s,_)=>new Date(_.created_at)-new Date(s.created_at)));P(async()=>{try{await d.fetchApplications(),await x.fetchLastExam()}finally{m.value=!1}});const L=s=>{y.value=s,d.showStatusModal=!0},g=()=>{d.showStatusModal=!1},z=async()=>{await d.fetchApplications(),g()};function N(s,_){let a;return(...l)=>{clearTimeout(a),a=setTimeout(()=>s(...l),_)}}T(c,N(async()=>{const s=V();await d.fetchApplications(s)},2e3));const V=()=>{const s={zamat_id:D.value};return c.value&&(s.institute_code=c.value),s};return(s,_)=>{var l;const a=B("RouterLink");return n(),r("div",O,[e("div",Q,[e("h1",W,o((l=A(x).exam)==null?void 0:l.name)+"-এর নিবন্ধন তালিকা",1),h(a,{to:{name:"ApplicationForm"},class:"btn-2"},{default:M(()=>[S("নতুন নিবন্ধন")]),_:1})]),m.value?(n(),r("div",X,Z)):(n(),r("div",p,[e("table",tt,[e("thead",et,[e("tr",null,[st,ot,dt,e("th",nt,[e("div",rt,[_t,E(e("input",{"onUpdate:modelValue":_[0]||(_[0]=t=>c.value=t),type:"search",class:"input-1 w-20 text-center text-black px-0.5 pt-1.5 pb-1 -mt-0.5",placeholder:"কোড"},null,512),[[I,c.value]])])]),ct,at,lt,ut,ht,xt,mt])]),e("tbody",yt,[f.value.length?(n(!0),r(U,{key:0},R(f.value,(t,j)=>{var v,w,b,k,i;return n(),r("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",ft,o(j+1),1),e("td",gt,o(C(t==null?void 0:t.created_at)),1),e("td",vt,o(t==null?void 0:t.id),1),e("td",wt,o((v=t==null?void 0:t.institute)==null?void 0:v.institute_code)+" - "+o((w=t==null?void 0:t.institute)==null?void 0:w.name),1),e("td",bt,o((b=t==null?void 0:t.area)==null?void 0:b.name),1),e("td",kt,o((k=t==null?void 0:t.zamat)==null?void 0:k.name),1),e("td",it,o((i=t==null?void 0:t.students)==null?void 0:i.length)+" জন",1),e("td",At,o(t==null?void 0:t.total_amount),1),e("td",Mt,o(t==null?void 0:t.payment_method),1),e("td",St,[e("span",{class:$([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(t==null?void 0:t.payment_status),3)]),e("td",Ct,[e("div",Dt,[h(a,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:M(()=>[S("দেখুন")]),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(n(),r("button",{key:0,onClick:Ft=>L(t.id),class:"btn-contrast"}," নিবন্ধন গ্রহণ ",8,Lt)):q("",!0)])])])}),128)):(n(),r("tr",zt,Vt))])])])),h(G,{show:A(d).showStatusModal,"application-id":y.value,onClose:g,onDataUpdated:z},null,8,["show","application-id"])])}}};export{Ut as default};
