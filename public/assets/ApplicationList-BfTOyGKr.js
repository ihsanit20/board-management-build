import{B as ee,r,C as A,o as te,c as u,a as e,f as I,w as se,j as y,D as h,F as P,e as V,b as x,l as le,v as O,G as $,h as w,k as oe,t as o,y as N,z as ne,d as n,n as K,L as ue}from"./index-VisWtOtk.js";import{_ as de}from"./ApplicationStatusModal-D5fXg4Tq.js";import{u as ae}from"./application-P9L1YgVo.js";import{u as re}from"./zamat-CSMLdV4C.js";const ve={class:"space-y-2 px-6 py-4"},xe={class:"md:flex justify-between items-center"},ie={class:"card-bg p-4 grid md:grid-cols-7 gap-4"},ye=["value"],me={class:"relative"},ge={class:"relative"},be=["value"],fe={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},_e={class:"min-w-full table-auto"},pe={class:"text-gray-700 text-sm font-light"},ke={class:"py-3 px-4 text-left"},he={class:"font-medium"},we={class:"py-3 px-4 text-center"},ce={class:"py-3 px-4 text-center"},Ce={class:"py-3 px-4 text-left"},Ne={class:"py-3 px-4 text-left"},Pe={class:"py-3 px-4 text-left"},Ve={class:"py-3 px-4 text-center"},Se={class:"py-3 px-4 text-right"},De={class:"py-3 px-4 text-center"},Me={class:"py-3 px-4 text-center"},Ae={class:"py-3 px-4 text-left"},Ue={class:"py-3 px-4 text-center"},Le={class:"flex items-center justify-end gap-2"},ze=["href"],je=["onClick"],Be=["onClick"],Fe={key:1},Ee={key:2,class:"flex justify-between items-center mt-4"},Ie=["disabled"],Oe={class:"flex items-center gap-2"},$e=["value"],Ke=["disabled"],Te={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},Re={class:"relative bg-white rounded-lg shadow p-6 w-[90%] max-w-md"},Ze={class:"text-sm text-gray-600 mb-4"},Ge={class:"flex justify-end gap-2"},qe=["disabled"],He=["disabled"],et={__name:"ApplicationList",setup(Je){const m=ee(),U=re(),a=ae(),L=r(null),g=r(""),k=r(""),b=r(""),f=r(null),_=r("all"),p=r("all"),v=r(15),d=r(1),S=r(!0),D=r(!1),c=r(null),C=r(!1),T=l=>{L.value=l,a.showStatusModal=!0},z=()=>{a.showStatusModal=!1},R=async()=>{await i(),z()},Z=()=>{const l={};return v.value==="all"?l.per_page="all":(l.per_page=Number(v.value)||15,l.page=Number(d.value)||1),f.value&&(l.exam_id=f.value),k.value&&(l.zamat_id=k.value),g.value&&(l.institute_code=g.value),b.value&&(l.application_id=b.value),_.value&&_.value!=="all"&&(l.payment_method=_.value),p.value&&p.value!=="all"&&(l.status=p.value),l},i=async()=>{S.value=!0,await a.fetchApplications(Z()),S.value=!1},G=()=>{var s;const l=((s=a.pagination)==null?void 0:s.last_page)||1;d.value<l&&(d.value+=1)},q=()=>{d.value>1&&(d.value-=1)},H=l=>{if(v.value==="all")return l+1;const s=Number(v.value)||15;return(Number(d.value)-1)*s+l+1},J=l=>{c.value=l,D.value=!0},M=()=>{D.value=!1,c.value=null},Q=async()=>{c.value&&(C.value=!0,await a.deleteApplication(c.value.id),C.value=!1,M(),v.value!=="all"&&a.applications.length===0&&d.value>1&&(d.value=d.value-1),await i())};return A([k,b,g,f,_,p],()=>{d.value=1}),A(v,()=>{d.value=1}),A([d,v,k,b,g,f,_,p],i),te(async()=>{var l;await Promise.all([m.fetchLastExam(),m.fetchExams(),U.fetchZamats()]),(l=m==null?void 0:m.exam)!=null&&l.id&&(f.value=m.exam.id),await i()}),(l,s)=>{var j,B,F,E;const W=ne("RouterLink");return n(),u("div",ve,[e("div",xe,[s[9]||(s[9]=e("h1",{class:"title-lg"},"নিবন্ধন তালিকা",-1)),I(W,{to:{name:"ApplicationForm"},class:"btn-2"},{default:se(()=>s[8]||(s[8]=[N(" নতুন নিবন্ধন যুক্ত করুন ")])),_:1})]),e("div",ie,[e("div",null,[s[11]||(s[11]=e("p",null,"পরীক্ষা",-1)),y(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t),class:"text-black input-1 px-2 py-1"},[s[10]||(s[10]=e("option",{disabled:"",value:""},"- পরীক্ষার তালিকা -",-1)),(n(!0),u(P,null,V(x(m).exams,t=>(n(),u("option",{key:t.id,value:t.id},o(t.name),9,ye))),128))],512),[[h,f.value]])]),e("div",null,[s[13]||(s[13]=e("p",null,"প্রতি পৃষ্ঠায় নিবন্ধন সংখ্যা",-1)),y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>v.value=t),class:"text-black input-1 px-2 py-1"},s[12]||(s[12]=[le('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[h,v.value]])]),e("div",null,[s[15]||(s[15]=e("p",null,"নিবন্ধন নাম্বার দিয়ে খুঁজুন",-1)),e("div",me,[y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>b.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:$(i,["enter"])},null,544),[[O,b.value]]),b.value?(n(),u("button",{key:0,onClick:i,class:"absolute right-3 top-2"},s[14]||(s[14]=[e("i",{class:"fas fa-search"},null,-1)]))):w("",!0)])]),e("div",null,[s[17]||(s[17]=e("p",null,"ইলহাক নাম্বার দিয়ে খুঁজুন",-1)),e("div",ge,[y(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:$(i,["enter"])},null,544),[[O,g.value]]),g.value?(n(),u("button",{key:0,onClick:i,class:"absolute right-3 top-2"},s[16]||(s[16]=[e("i",{class:"fas fa-search"},null,-1)]))):w("",!0)])]),e("div",null,[s[19]||(s[19]=e("p",null,"মারহালা অনুসারে খুঁজুন",-1)),y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>k.value=t),class:"text-black input-1 px-2 py-1"},[s[18]||(s[18]=e("option",{value:""},"- সকল মারহালা -",-1)),(n(!0),u(P,null,V(x(U).zamats,t=>(n(),u("option",{key:t.id,value:t.id},o(t.name),9,be))),128))],512),[[h,k.value]])]),e("div",null,[s[21]||(s[21]=e("p",null,"পেমেন্ট মেথড",-1)),y(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>_.value=t),class:"text-black input-1 px-2 py-1"},s[20]||(s[20]=[e("option",{value:"all"},"- সব -",-1),e("option",{value:"Online"},"Online",-1),e("option",{value:"Offline"},"Offline",-1)]),512),[[h,_.value]])]),e("div",null,[s[23]||(s[23]=e("p",null,"পেমেন্ট স্ট্যাটাস",-1)),y(e("select",{"onUpdate:modelValue":s[6]||(s[6]=t=>p.value=t),class:"text-black input-1 px-2 py-1"},s[22]||(s[22]=[e("option",{value:"all"},"- সব -",-1),e("option",{value:"Paid"},"Paid",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Failed"},"Failed",-1)]),512),[[h,p.value]])])]),S.value?(n(),oe(ue,{key:0})):(n(),u("div",fe,[e("table",_e,[s[29]||(s[29]=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"ইউজার"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),e("tbody",pe,[x(a).applications&&x(a).applications.length?(n(!0),u(P,{key:0},V(x(a).applications,(t,X)=>(n(),u("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",ke,[e("p",he,o(H(X)),1)]),e("td",we,o(new Date(t==null?void 0:t.application_date).toLocaleDateString("bn-BD")),1),e("td",ce,o(t==null?void 0:t.id),1),e("td",Ce,[e("div",null,o(t==null?void 0:t.institute_code_name),1),e("div",null,[s[24]||(s[24]=e("strong",null,"কেন্দ্র: ",-1)),e("span",{class:K(t!=null&&t.center_name?"":"text-red-500")},o((t==null?void 0:t.center_name)||"নির্বাচন করা নেই"),3)])]),e("td",Ne,o(t==null?void 0:t.area_name),1),e("td",Pe,o(t==null?void 0:t.zamat_name),1),e("td",Ve,o(t==null?void 0:t.student_count)+" জন",1),e("td",Se,o(t==null?void 0:t.total_amount),1),e("td",De,o(t==null?void 0:t.payment_method),1),e("td",Me,[e("span",{class:K([{"text-yellow-700 bg-yellow-100":(t==null?void 0:t.payment_status)==="Pending","text-green-700 bg-green-100":(t==null?void 0:t.payment_status)==="Paid","text-red-700 bg-red-100":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(t==null?void 0:t.payment_status),3)]),e("td",Ae,[e("div",null,[s[25]||(s[25]=e("strong",null,"প্রেরণ: ",-1)),N(o((t==null?void 0:t.submitted_by_name)||"N/A"),1)]),s[27]||(s[27]=e("hr",null,null,-1)),e("div",null,[s[26]||(s[26]=e("strong",null,"গ্রহণ: ",-1)),N(o((t==null?void 0:t.approved_by_name)||"N/A"),1)])]),e("td",Ue,[e("div",Le,[e("a",{href:`/applications/${t.id}`,class:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,ze),(t==null?void 0:t.payment_status)==="Pending"?(n(),u("button",{key:0,onClick:Y=>T(t.id),class:"px-3 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700"}," গ্রহণ ",8,je)):w("",!0),(t==null?void 0:t.payment_status)!=="Paid"?(n(),u("button",{key:1,onClick:Y=>J(t),class:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",title:"ডিলিট"}," মুছুন ",8,Be)):w("",!0)])])]))),128)):(n(),u("tr",Fe,s[28]||(s[28]=[e("td",{colspan:"12",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),v.value!=="all"?(n(),u("div",Ee,[e("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:d.value===1,onClick:q}," Prev ",8,Ie),e("div",Oe,[s[30]||(s[30]=e("span",null,"Page",-1)),y(e("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>d.value=t),class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"},[(n(!0),u(P,null,V(((j=x(a).pagination)==null?void 0:j.last_page)||1,t=>(n(),u("option",{key:t,value:t},o(t),9,$e))),128))],512),[[h,d.value]]),e("span",null,"of "+o(((B=x(a).pagination)==null?void 0:B.last_page)||1),1)]),e("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:d.value===(((F=x(a).pagination)==null?void 0:F.last_page)||1),onClick:G}," Next ",8,Ke)])):w("",!0),I(de,{show:x(a).showStatusModal,"application-id":L.value,onClose:z,onDataUpdated:R},null,8,["show","application-id"]),D.value?(n(),u("div",Te,[e("div",{class:"absolute inset-0 bg-black/40",onClick:M}),e("div",Re,[s[33]||(s[33]=e("h3",{class:"text-lg font-semibold mb-2"},"নিশ্চিত করবেন?",-1)),e("p",Ze,[s[31]||(s[31]=N(" আবেদন ")),e("strong",null,"#"+o((E=c.value)==null?void 0:E.id),1),s[32]||(s[32]=N(" স্থায়ীভাবে মুছে ফেলা হবে। এই কাজটি ফিরিয়ে আনা যাবে না। "))]),e("div",Ge,[e("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,disabled:C.value}," বাতিল ",8,qe),e("button",{class:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:Q,disabled:C.value},o(C.value?"মুছছে...":"ডিলিট"),9,He)])])])):w("",!0)])}}};export{et as default};
