import{B as X,r as a,C as A,o as Y,c as n,a as t,f as E,w as ee,j as _,D as p,F as C,e as N,b as x,l as te,v as F,G as I,h,k as se,t as o,y as k,z as le,d,n as $,L as oe}from"./index-q8lYwX3i.js";import{_ as de}from"./ApplicationStatusModal-DmUjMOum.js";import{u as ne}from"./application-De6Udn9z.js";import{u as ue}from"./zamat-CazijuuD.js";const re={class:"space-y-2 px-6 py-4"},ae={class:"md:flex justify-between items-center"},ve={class:"card-bg p-4 grid md:grid-cols-5 gap-4"},xe=["value"],ye={class:"relative"},me={class:"relative"},ge=["value"],ie={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},be={class:"min-w-full table-auto"},fe={class:"text-gray-700 text-sm font-light"},_e={class:"py-3 px-4 text-left"},he={class:"font-medium"},ce={class:"py-3 px-4 text-center"},we={class:"py-3 px-4 text-center"},ke={class:"py-3 px-4 text-left"},pe={class:"py-3 px-4 text-left"},Ce={class:"py-3 px-4 text-left"},Ne={class:"py-3 px-4 text-center"},De={class:"py-3 px-4 text-right"},Se={class:"py-3 px-4 text-center"},Ve={class:"py-3 px-4 text-center"},Ae={class:"py-3 px-4 text-left"},Me={class:"py-3 px-4 text-center"},Pe={class:"flex items-center justify-end gap-2"},Le=["href"],ze=["onClick"],Ue=["onClick"],je={key:1},Be={key:2,class:"flex justify-between items-center mt-4"},Ee=["disabled"],Fe={class:"flex items-center gap-2"},Ie=["value"],$e=["disabled"],Ke={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},Te={class:"relative bg-white rounded-lg shadow p-6 w-[90%] max-w-md"},Re={class:"text-sm text-gray-600 mb-4"},Ze={class:"flex justify-end gap-2"},Ge=["disabled"],qe=["disabled"],Xe={__name:"ApplicationList",setup(He){const m=X(),M=ue(),r=ne(),P=a(null),g=a(""),f=a(""),i=a(""),b=a(null),v=a(15),u=a(1),D=a(!0),S=a(!1),c=a(null),w=a(!1),K=l=>{P.value=l,r.showStatusModal=!0},L=()=>{r.showStatusModal=!1},T=async()=>{await y(),L()},R=()=>{const l={};return v.value==="all"?l.per_page="all":(l.per_page=Number(v.value)||15,l.page=Number(u.value)||1),b.value&&(l.exam_id=b.value),f.value&&(l.zamat_id=f.value),g.value&&(l.institute_code=g.value),i.value&&(l.application_id=i.value),l},y=async()=>{D.value=!0,await r.fetchApplications(R()),D.value=!1},Z=()=>{var s;const l=((s=r.pagination)==null?void 0:s.last_page)||1;u.value<l&&(u.value+=1)},G=()=>{u.value>1&&(u.value-=1)},q=l=>{if(v.value==="all")return l+1;const s=Number(v.value)||15;return(Number(u.value)-1)*s+l+1},H=l=>{c.value=l,S.value=!0},V=()=>{S.value=!1,c.value=null},J=async()=>{c.value&&(w.value=!0,await r.deleteApplication(c.value.id),w.value=!1,V(),v.value!=="all"&&r.applications.length===0&&u.value>1&&(u.value=u.value-1),await y())};return A([f,i,g,b],()=>{u.value=1}),A(v,()=>{u.value=1}),A([u,v,f,i,g,b],y),Y(async()=>{var l;await Promise.all([m.fetchLastExam(),m.fetchExams(),M.fetchZamats()]),(l=m==null?void 0:m.exam)!=null&&l.id&&(b.value=m.exam.id),await y()}),(l,s)=>{var z,U,j,B;const O=le("RouterLink");return d(),n("div",re,[t("div",ae,[s[7]||(s[7]=t("h1",{class:"title-lg"},"নিবন্ধন তালিকা",-1)),E(O,{to:{name:"ApplicationForm"},class:"btn-2"},{default:ee(()=>s[6]||(s[6]=[k(" নতুন নিবন্ধন যুক্ত করুন ")])),_:1})]),t("div",ve,[t("div",null,[s[9]||(s[9]=t("p",null,"পরীক্ষা",-1)),_(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>b.value=e),class:"text-black input-1 px-2 py-1"},[s[8]||(s[8]=t("option",{disabled:"",value:""},"- পরীক্ষার তালিকা -",-1)),(d(!0),n(C,null,N(x(m).exams,e=>(d(),n("option",{key:e.id,value:e.id},o(e.name),9,xe))),128))],512),[[p,b.value]])]),t("div",null,[s[11]||(s[11]=t("p",null,"প্রতি পৃষ্ঠায় নিবন্ধন সংখ্যা",-1)),_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),class:"text-black input-1 px-2 py-1"},s[10]||(s[10]=[te('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[p,v.value]])]),t("div",null,[s[13]||(s[13]=t("p",null,"নিবন্ধন নাম্বার দিয়ে খুঁজুন",-1)),t("div",ye,[_(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>i.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:I(y,["enter"])},null,544),[[F,i.value]]),i.value?(d(),n("button",{key:0,onClick:y,class:"absolute right-3 top-2"},s[12]||(s[12]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[15]||(s[15]=t("p",null,"ইলহাক নাম্বার দিয়ে খুঁজুন",-1)),t("div",me,[_(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>g.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:I(y,["enter"])},null,544),[[F,g.value]]),g.value?(d(),n("button",{key:0,onClick:y,class:"absolute right-3 top-2"},s[14]||(s[14]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[17]||(s[17]=t("p",null,"মারহালা অনুসারে খুঁজুন",-1)),_(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>f.value=e),class:"text-black input-1 px-2 py-1"},[s[16]||(s[16]=t("option",{value:""},"- সকল মারহালা -",-1)),(d(!0),n(C,null,N(x(M).zamats,e=>(d(),n("option",{key:e.id,value:e.id},o(e.name),9,ge))),128))],512),[[p,f.value]])])]),D.value?(d(),se(oe,{key:0})):(d(),n("div",ie,[t("table",be,[s[23]||(s[23]=t("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"ক্র"),t("th",{class:"py-3 px-4 text-center"},"তারিখ"),t("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),t("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),t("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),t("th",{class:"py-3 px-4 text-left"},"মারহালা"),t("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),t("th",{class:"py-3 px-4 text-right"},"টাকা"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),t("th",{class:"py-3 px-4 text-center"},"ইউজার"),t("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),t("tbody",fe,[x(r).applications&&x(r).applications.length?(d(!0),n(C,{key:0},N(x(r).applications,(e,Q)=>(d(),n("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[t("td",_e,[t("p",he,o(q(Q)),1)]),t("td",ce,o(new Date(e==null?void 0:e.application_date).toLocaleDateString("bn-BD")),1),t("td",we,o(e==null?void 0:e.id),1),t("td",ke,[t("div",null,o(e==null?void 0:e.institute_code_name),1),t("div",null,[s[18]||(s[18]=t("strong",null,"কেন্দ্র: ",-1)),t("span",{class:$(e!=null&&e.center_name?"":"text-red-500")},o((e==null?void 0:e.center_name)||"নির্বাচন করা নেই"),3)])]),t("td",pe,o(e==null?void 0:e.area_name),1),t("td",Ce,o(e==null?void 0:e.zamat_name),1),t("td",Ne,o(e==null?void 0:e.student_count)+" জন",1),t("td",De,o(e==null?void 0:e.total_amount),1),t("td",Se,o(e==null?void 0:e.payment_method),1),t("td",Ve,[t("span",{class:$([{"text-yellow-700 bg-yellow-100":(e==null?void 0:e.payment_status)==="Pending","text-green-700 bg-green-100":(e==null?void 0:e.payment_status)==="Paid","text-red-700 bg-red-100":(e==null?void 0:e.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(e==null?void 0:e.payment_status),3)]),t("td",Ae,[t("div",null,[s[19]||(s[19]=t("strong",null,"প্রেরণ: ",-1)),k(o((e==null?void 0:e.submitted_by_name)||"N/A"),1)]),s[21]||(s[21]=t("hr",null,null,-1)),t("div",null,[s[20]||(s[20]=t("strong",null,"গ্রহণ: ",-1)),k(o((e==null?void 0:e.approved_by_name)||"N/A"),1)])]),t("td",Me,[t("div",Pe,[t("a",{href:`/applications/${e.id}`,class:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,Le),(e==null?void 0:e.payment_status)==="Pending"?(d(),n("button",{key:0,onClick:W=>K(e.id),class:"px-3 py-1 rounded bg-emerald-600 text-white hover:bg-emerald-700"}," গ্রহণ ",8,ze)):h("",!0),(e==null?void 0:e.payment_status)!=="Paid"?(d(),n("button",{key:1,onClick:W=>H(e),class:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",title:"ডিলিট"}," মুছুন ",8,Ue)):h("",!0)])])]))),128)):(d(),n("tr",je,s[22]||(s[22]=[t("td",{colspan:"12",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),v.value!=="all"?(d(),n("div",Be,[t("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:u.value===1,onClick:G}," Prev ",8,Ee),t("div",Fe,[s[24]||(s[24]=t("span",null,"Page",-1)),_(t("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>u.value=e),class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300"},[(d(!0),n(C,null,N(((z=x(r).pagination)==null?void 0:z.last_page)||1,e=>(d(),n("option",{key:e,value:e},o(e),9,Ie))),128))],512),[[p,u.value]]),t("span",null,"of "+o(((U=x(r).pagination)==null?void 0:U.last_page)||1),1)]),t("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:u.value===(((j=x(r).pagination)==null?void 0:j.last_page)||1),onClick:Z}," Next ",8,$e)])):h("",!0),E(de,{show:x(r).showStatusModal,"application-id":P.value,onClose:L,onDataUpdated:T},null,8,["show","application-id"]),S.value?(d(),n("div",Ke,[t("div",{class:"absolute inset-0 bg-black/40",onClick:V}),t("div",Te,[s[27]||(s[27]=t("h3",{class:"text-lg font-semibold mb-2"},"নিশ্চিত করবেন?",-1)),t("p",Re,[s[25]||(s[25]=k(" আবেদন ")),t("strong",null,"#"+o((B=c.value)==null?void 0:B.id),1),s[26]||(s[26]=k(" স্থায়ীভাবে মুছে ফেলা হবে। এই কাজটি ফিরিয়ে আনা যাবে না। "))]),t("div",Ze,[t("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:V,disabled:w.value}," বাতিল ",8,Ge),t("button",{class:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",onClick:J,disabled:w.value},o(w.value?"মুছছে...":"ডিলিট"),9,qe)])])])):h("",!0)])}}};export{Xe as default};
