import{r as m,B as y,h as J,z as O,o as n,c as l,a as e,t as s,i as r,A as u,d as f,w as E,v,x as I,D as K,f as g,C as Q,F as R,b as T,n as Z}from"./index-Bg3J5TkX.js";import{_ as W}from"./ApplicationStatusModal-CQtzOfZg.js";import{u as X}from"./application-DdY-R0ip.js";import{u as Y}from"./exam-Dr413bi5.js";import{u as p}from"./zamat-CEJ2NzWs.js";const tt={class:"space-y-2 px-6 py-4"},et={class:"md:flex justify-between items-center"},st={class:""},dt={class:"title-lg"},ot={class:"md:flex divide-x md:divide-black text-sm"},nt={class:"md:pr-2"},lt={class:"md:px-2"},rt={class:"md:pl-2"},_t={class:"card-bg p-4 grid md:grid-cols-3"},ut={class:"relative"},ct=e("i",{class:"fas fa-search"},null,-1),ht=[ct],at={class:"relative"},xt=e("i",{class:"fas fa-search"},null,-1),mt=[xt],yt=e("option",{value:""},"- সকল মারহালা -",-1),ft=["value"],vt={key:0,class:"flex justify-center items-center"},gt=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1),bt=[gt],wt={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},kt={class:"min-w-full table-auto"},it=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"শিক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"ইউজার"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1),At={class:"text-gray-700 text-sm font-light"},St={class:"py-3 px-4 text-left"},Ct={class:"py-3 px-4 text-center"},Dt={class:"py-3 px-4 text-center"},Mt={class:"py-3 px-4 text-left"},Vt=e("strong",{class:""},"কেন্দ্র: ",-1),Lt={class:"py-3 px-4 text-left"},zt={class:"py-3 px-4 text-left"},Bt={class:"py-3 px-4 text-center"},Nt={class:"py-3 px-4 text-right"},Ut={class:"py-3 px-4 text-center"},Ft={class:"py-3 px-4 text-center"},Pt={class:"py-3 px-4 text-left"},jt=e("strong",{class:""},"প্রেরণ: ",-1),Et=e("hr",null,null,-1),It=e("strong",{class:""},"গ্রহণ: ",-1),Kt={class:"py-3 px-4 text-center"},Rt={class:"flex items-center justify-end gap-2"},Tt=["onClick"],Zt={key:1},$t=e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1),qt=[$t],Yt={__name:"ApplicationList",setup(Gt){const b=Y(),w=p(),o=X(),k=m(null),c=m(""),x=m(""),h=m(""),$=d=>{k.value=d,o.showStatusModal=!0},i=()=>{o.showStatusModal=!1},q=async()=>{await o.fetchApplications(),i()},G=()=>{const d={};return x.value&&(d.zamat_id=x.value),c.value&&(d.institute_code=c.value),h.value&&(d.application_id=h.value),d},_=async()=>{const d=G();await o.fetchApplications(d)};return y([x],_),y(h,d=>{d||_()}),y(c,d=>{d||_()}),J(async()=>{b.fetchLastExam(),w.fetchZamats(),o.fetchApplicationCounts(),_()}),(d,a)=>{var S,C,D,M;const A=O("RouterLink");return n(),l("div",tt,[e("div",et,[e("div",st,[e("h1",dt,s((S=r(b).exam)==null?void 0:S.name)+"-এর নিবন্ধন তালিকা",1),e("div",ot,[e("div",nt,[u(" মোট নিবন্ধন: "),e("span",null,s((C=r(o))==null?void 0:C.totalApplications)+" টি",1)]),e("div",lt,[u(" পেন্ডিং নিবন্ধন: "),e("span",null,s((D=r(o))==null?void 0:D.pendingApplications)+" টি",1)]),e("div",rt,[u(" পেইড নিবন্ধন: "),e("span",null,s((M=r(o))==null?void 0:M.paidApplications)+" টি",1)])])]),f(A,{to:{name:"ApplicationForm"},class:"btn-2"},{default:E(()=>[u("নতুন নিবন্ধন যুক্ত করুন")]),_:1})]),e("div",_t,[e("div",ut,[v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:K(_,["enter"])},null,544),[[I,h.value]]),h.value?(n(),l("button",{key:0,onClick:_,class:"absolute right-3 top-2"},ht)):g("",!0)]),e("div",at,[v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:K(_,["enter"])},null,544),[[I,c.value]]),c.value?(n(),l("button",{key:0,onClick:_,class:"absolute right-3 top-2"},mt)):g("",!0)]),v(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>x.value=t),class:"text-black input-1 px-2 py-1"},[yt,(n(!0),l(R,null,T(r(w).zamats,t=>(n(),l("option",{key:t.id,value:t.id},s(t.name),9,ft))),128))],512),[[Q,x.value]])]),r(o).loading?(n(),l("div",vt,bt)):(n(),l("div",wt,[e("table",kt,[it,e("tbody",At,[r(o).applications.length?(n(!0),l(R,{key:0},T(r(o).applications,(t,H)=>{var V,L,z,B,N,U,F,P,j;return n(),l("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",St,s(H+1),1),e("td",Ct,s(new Date(t==null?void 0:t.created_at).toLocaleDateString("bn-BD")),1),e("td",Dt,s(t==null?void 0:t.id),1),e("td",Mt,[e("div",null,s((V=t==null?void 0:t.institute)==null?void 0:V.institute_code)+" - "+s((L=t==null?void 0:t.institute)==null?void 0:L.name),1),e("div",null,[Vt,e("span",{class:Z((z=t==null?void 0:t.center)!=null&&z.name?"":"text-red-500")},s(((B=t==null?void 0:t.center)==null?void 0:B.name)||"নির্বাচন করা নেই"),3)])]),e("td",Lt,s((N=t==null?void 0:t.area)==null?void 0:N.name),1),e("td",zt,s((U=t==null?void 0:t.zamat)==null?void 0:U.name),1),e("td",Bt,s((F=t==null?void 0:t.students)==null?void 0:F.length)+" জন",1),e("td",Nt,s(t==null?void 0:t.total_amount),1),e("td",Ut,s(t==null?void 0:t.payment_method),1),e("td",Ft,[e("span",{class:Z([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},s(t==null?void 0:t.payment_status),3)]),e("td",Pt,[e("div",null,[jt,u(s((P=t==null?void 0:t.submitted_by)==null?void 0:P.name),1)]),Et,e("div",null,[It,u(s((j=t==null?void 0:t.approved_by)==null?void 0:j.name),1)])]),e("td",Kt,[e("div",Rt,[f(A,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:E(()=>[u(" দেখুন ")]),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(n(),l("button",{key:0,onClick:Ht=>$(t.id),class:"btn-contrast"}," গ্রহণ ",8,Tt)):g("",!0)])])])}),128)):(n(),l("tr",Zt,qt))])])])),f(W,{show:r(o).showStatusModal,"application-id":k.value,onClose:i,onDataUpdated:q},null,8,["show","application-id"])])}}};export{Yt as default};
