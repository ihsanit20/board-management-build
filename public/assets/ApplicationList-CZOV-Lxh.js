import{r,g as O,h as j,B as m,z as Q,o as n,c as l,a as e,t as o,i as y,A as x,d as f,w as I,v,x as K,D as p,f as i,C as W,F as R,b as T,n as Z}from"./index-DvLSUkTy.js";import{_ as X}from"./ApplicationStatusModal-CVbd3Vqs.js";import{u as Y}from"./application-D-0WBsw5.js";import{u as tt}from"./exam-Bkv0Le-x.js";import{u as et}from"./zamat-6wQkxrQn.js";const st={class:"space-y-2 px-6 py-4"},ot={class:"md:flex justify-between items-center"},dt={class:""},nt={class:"title-lg"},lt={class:"md:flex divide-x md:divide-black text-sm"},rt={class:"md:pr-2"},at={class:"md:px-2"},ct={class:"md:pl-2"},ut={class:"card-bg p-4 grid md:grid-cols-3"},_t={class:"relative"},ht=e("i",{class:"fas fa-search"},null,-1),xt=[ht],mt={class:"relative"},yt=e("i",{class:"fas fa-search"},null,-1),ft=[yt],vt=e("option",{value:""},"- সকল মারহালা -",-1),it=["value"],gt={key:0,class:"flex justify-center items-center"},bt=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1),wt=[bt],kt={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},At={class:"min-w-full table-auto"},St=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"শিক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1),Ct={class:"text-gray-700 text-sm font-light"},Dt={class:"py-3 px-4 text-left"},Mt={class:"py-3 px-4 text-center"},Lt={class:"py-3 px-4 text-center"},Vt={class:"py-3 px-4 text-left"},zt=e("strong",{class:""},"কেন্দ্র: ",-1),Bt={class:"py-3 px-4 text-left"},Nt={class:"py-3 px-4 text-left"},Ut={class:"py-3 px-4 text-center"},Et={class:"py-3 px-4 text-right"},Ft={class:"py-3 px-4 text-center"},Pt={class:"py-3 px-4 text-center"},jt={class:"py-3 px-4 text-center"},It={class:"flex items-center justify-end gap-2"},Kt=["onClick"],pt={key:1},Rt=e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1),Tt=[Rt],Qt={__name:"ApplicationList",setup(Zt){const g=tt(),b=et(),d=Y(),w=r(!0),k=r(null),u=r(""),h=r(""),_=r(""),A=r(0),S=r(0),C=r(0),$=r(!0),D=O(()=>[...d.applications].sort((s,a)=>new Date(a.created_at)-new Date(s.created_at)));j(async()=>{try{await d.fetchApplications(),await g.fetchLastExam(),await b.fetchZamats()}finally{w.value=!1}});const q=s=>{k.value=s,d.showStatusModal=!0},M=()=>{d.showStatusModal=!1},G=async()=>{await d.fetchApplications(),M()},H=()=>{const s={};return h.value&&(s.zamat_id=h.value),u.value&&(s.institute_code=u.value),_.value&&(s.application_id=_.value),s},c=async()=>{const s=H();await d.fetchApplications(s)};return m([h],c),m(_,s=>{s||c()}),m(u,s=>{s||c()}),j(async()=>{try{await d.fetchApplicationCounts(),A.value=d.totalApplications,S.value=d.pendingApplications,C.value=d.paidApplications}catch(s){console.error("Error fetching application counts:",s)}finally{$.value=!1}}),(s,a)=>{var V;const L=Q("RouterLink");return n(),l("div",st,[e("div",ot,[e("div",dt,[e("h1",nt,o((V=y(g).exam)==null?void 0:V.name)+"-এর নিবন্ধন তালিকা",1),e("div",lt,[e("div",rt,[x(" মোট নিবন্ধন: "),e("span",null,o(A.value)+" টি",1)]),e("div",at,[x(" পেন্ডিং নিবন্ধন: "),e("span",null,o(S.value)+" টি",1)]),e("div",ct,[x(" পেইড নিবন্ধন: "),e("span",null,o(C.value)+" টি",1)])])]),f(L,{to:{name:"ApplicationForm"},class:"btn-2"},{default:I(()=>[x("নতুন নিবন্ধন যুক্ত করুন")]),_:1})]),e("div",ut,[e("div",_t,[v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>_.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:p(c,["enter"])},null,544),[[K,_.value]]),_.value?(n(),l("button",{key:0,onClick:c,class:"absolute right-3 top-2"},xt)):i("",!0)]),e("div",mt,[v(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>u.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:p(c,["enter"])},null,544),[[K,u.value]]),u.value?(n(),l("button",{key:0,onClick:c,class:"absolute right-3 top-2"},ft)):i("",!0)]),v(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>h.value=t),class:"text-black input-1 px-2 py-1"},[vt,(n(!0),l(R,null,T(y(b).zamats,t=>(n(),l("option",{key:t.id,value:t.id},o(t.name),9,it))),128))],512),[[W,h.value]])]),w.value?(n(),l("div",gt,wt)):(n(),l("div",kt,[e("table",At,[St,e("tbody",Ct,[D.value.length?(n(!0),l(R,{key:0},T(D.value,(t,J)=>{var z,B,N,U,E,F,P;return n(),l("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",Dt,o(J+1),1),e("td",Mt,o(new Date(t==null?void 0:t.created_at).toLocaleDateString("bn-BD")),1),e("td",Lt,o(t==null?void 0:t.id),1),e("td",Vt,[e("div",null,o((z=t==null?void 0:t.institute)==null?void 0:z.institute_code)+" - "+o((B=t==null?void 0:t.institute)==null?void 0:B.name),1),e("div",null,[zt,e("span",{class:Z((N=t==null?void 0:t.center)!=null&&N.name?"":"text-red-500")},o(((U=t==null?void 0:t.center)==null?void 0:U.name)||"নির্বাচন করা নেই"),3)])]),e("td",Bt,o((E=t==null?void 0:t.area)==null?void 0:E.name),1),e("td",Nt,o((F=t==null?void 0:t.zamat)==null?void 0:F.name),1),e("td",Ut,o((P=t==null?void 0:t.students)==null?void 0:P.length)+" জন",1),e("td",Et,o(t==null?void 0:t.total_amount),1),e("td",Ft,o(t==null?void 0:t.payment_method),1),e("td",Pt,[e("span",{class:Z([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(t==null?void 0:t.payment_status),3)]),e("td",jt,[e("div",It,[f(L,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:I(()=>[x("দেখুন")]),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(n(),l("button",{key:0,onClick:$t=>q(t.id),class:"btn-contrast"}," গ্রহণ ",8,Kt)):i("",!0)])])])}),128)):(n(),l("tr",pt,Tt))])])])),f(X,{show:y(d).showStatusModal,"application-id":k.value,onClose:M,onDataUpdated:G},null,8,["show","application-id"])])}}};export{Qt as default};
