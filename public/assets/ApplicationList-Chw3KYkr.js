import{B as $,r as a,C as R,o as T,c as n,a as t,f as U,w as Z,j as g,D as c,F as h,e as k,b as x,l as G,v as P,G as z,h as S,k as q,z as H,d as l,y as p,t as o,n as B,L as J}from"./index-BW-TUHaW.js";import{_ as O}from"./ApplicationStatusModal-Cat8NMIe.js";import{u as Q}from"./application-11_UkoYl.js";import{u as W}from"./zamat-BhiWLB1m.js";const X={class:"space-y-2 px-6 py-4"},Y={class:"md:flex justify-between items-center"},ee={class:"card-bg p-4 grid md:grid-cols-5"},te=["value"],se={class:"relative"},le={class:"relative"},oe=["value"],ne={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},de={class:"min-w-full table-auto"},ue={class:"text-gray-700 text-sm font-light"},re={class:"py-3 px-4 text-left"},ae={class:"flex items-center"},xe={class:"mr-2"},ve={key:0,class:"font-medium"},me={key:1,class:"font-medium"},ye={class:"py-3 px-4 text-center"},_e={class:"py-3 px-4 text-center"},fe={class:"py-3 px-4 text-left"},ge={class:"py-3 px-4 text-left"},be={class:"py-3 px-4 text-left"},ie={class:"py-3 px-4 text-center"},ce={class:"py-3 px-4 text-right"},he={class:"py-3 px-4 text-center"},ke={class:"py-3 px-4 text-center"},we={class:"py-3 px-4 text-left"},Se={class:"py-3 px-4 text-center"},pe={class:"flex items-center justify-end gap-2"},Ce=["href"],Ve=["onClick"],Ae={key:1},Le={class:"flex justify-between items-center mt-4"},Ne=["disabled"],De={class:"flex space-x-1"},Me=["disabled"],Fe={__name:"ApplicationList",setup(Ue){const b=$(),C=W(),d=Q(),V=a(null),v=a(""),i=a(""),m=a(""),w=a(!0),y=a(null),_=a(15),u=a(1),j=r=>{V.value=r,d.showStatusModal=!0},A=()=>{d.showStatusModal=!1},E=async()=>{await d.fetchApplications(L()),A()},L=()=>{const r={page:u.value,per_page:_.value};return y.value&&(r.exam_id=y.value),i.value&&(r.zamat_id=i.value),v.value&&(r.institute_code=v.value),m.value&&(r.application_id=m.value),r},f=async()=>{w.value=!0;const r=L();await d.fetchApplications(r),w.value=!1},F=()=>{u.value<d.pagination.last_page&&(u.value+=1)},I=()=>{u.value>1&&(u.value-=1)};return R([u,_,i,m,v,y],f),T(async()=>{await b.fetchLastExam(),await b.fetchExams(),await C.fetchZamats(),b.exam&&(y.value=b.exam.id),f()}),(r,s)=>{var N,D;const K=H("RouterLink");return l(),n("div",X,[t("div",Y,[s[7]||(s[7]=t("div",{class:""},[t("h1",{class:"title-lg"},"নিবন্ধন তালিকা")],-1)),U(K,{to:{name:"ApplicationForm"},class:"btn-2"},{default:Z(()=>s[6]||(s[6]=[p("নতুন নিবন্ধন যুক্ত করুন")])),_:1})]),t("div",ee,[t("div",null,[s[9]||(s[9]=t("p",null,"পরীক্ষা",-1)),g(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>y.value=e),class:"text-black input-1 px-2 py-1"},[s[8]||(s[8]=t("option",{disabled:"",value:""},"- পরীক্ষার তালিকা -",-1)),(l(!0),n(h,null,k(x(b).exams,e=>(l(),n("option",{key:e.id,value:e.id},o(e.name),9,te))),128))],512),[[c,y.value]])]),t("div",null,[s[11]||(s[11]=t("p",null,"প্রতি পৃষ্ঠায় নিবন্ধন সংখ্যা",-1)),g(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),class:"text-black input-1 px-2 py-1"},s[10]||(s[10]=[G('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[c,_.value]])]),t("div",null,[s[13]||(s[13]=t("p",null,"নিবন্ধন নাম্বার দিয়ে খুঁজুন",-1)),t("div",se,[g(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:z(f,["enter"])},null,544),[[P,m.value]]),m.value?(l(),n("button",{key:0,onClick:f,class:"absolute right-3 top-2"},s[12]||(s[12]=[t("i",{class:"fas fa-search"},null,-1)]))):S("",!0)])]),t("div",null,[s[15]||(s[15]=t("p",null,"ইলহাক নাম্বার দিয়ে খুঁজুন",-1)),t("div",le,[g(t("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>v.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:z(f,["enter"])},null,544),[[P,v.value]]),v.value?(l(),n("button",{key:0,onClick:f,class:"absolute right-3 top-2"},s[14]||(s[14]=[t("i",{class:"fas fa-search"},null,-1)]))):S("",!0)])]),t("div",null,[s[17]||(s[17]=t("p",null,"মারহালা অনুসারে খুঁজুন",-1)),g(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>i.value=e),class:"text-black input-1 px-2 py-1"},[s[16]||(s[16]=t("option",{value:""},"- সকল মারহালা -",-1)),(l(!0),n(h,null,k(x(C).zamats,e=>(l(),n("option",{key:e.id,value:e.id},o(e.name),9,oe))),128))],512),[[c,i.value]])])]),w.value?(l(),q(J,{key:0})):(l(),n("div",ne,[t("table",de,[s[23]||(s[23]=t("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"ক্র"),t("th",{class:"py-3 px-4 text-center"},"তারিখ"),t("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),t("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),t("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),t("th",{class:"py-3 px-4 text-left"},"মারহালা"),t("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),t("th",{class:"py-3 px-4 text-right"},"টাকা"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),t("th",{class:"py-3 px-4 text-center"},"ইউজার"),t("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),t("tbody",ue,[x(d).applications&&x(d).applications.length?(l(!0),n(h,{key:0},k(x(d).applications,(e,M)=>(l(),n("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[t("td",re,[t("div",ae,[t("div",xe,[_.value==="all"?(l(),n("p",ve,o(M+1),1)):(l(),n("p",me,o((u.value-1)*_.value+M+1),1))])])]),t("td",ye,o(new Date(e==null?void 0:e.application_date).toLocaleDateString("bn-BD")),1),t("td",_e,o(e==null?void 0:e.id),1),t("td",fe,[t("div",null,o(e==null?void 0:e.institute_code_name),1),t("div",null,[s[18]||(s[18]=t("strong",{class:""},"কেন্দ্র: ",-1)),t("span",{class:B(e!=null&&e.center_name?"":"text-red-500")},o((e==null?void 0:e.center_name)||"নির্বাচন করা নেই"),3)])]),t("td",ge,o(e==null?void 0:e.area_name),1),t("td",be,o(e==null?void 0:e.zamat_name),1),t("td",ie,o(e==null?void 0:e.student_count)+" জন",1),t("td",ce,o(e==null?void 0:e.total_amount),1),t("td",he,o(e==null?void 0:e.payment_method),1),t("td",ke,[t("span",{class:B([{"text-yellow-600 bg-yellow-200":(e==null?void 0:e.payment_status)==="Pending","text-green-600 bg-green-200":(e==null?void 0:e.payment_status)==="Paid","text-red-600 bg-red-200":(e==null?void 0:e.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(e==null?void 0:e.payment_status),3)]),t("td",we,[t("div",null,[s[19]||(s[19]=t("strong",{class:""},"প্রেরণ: ",-1)),p(o((e==null?void 0:e.submitted_by_name)||"N/A"),1)]),s[21]||(s[21]=t("hr",null,null,-1)),t("div",null,[s[20]||(s[20]=t("strong",{class:""},"গ্রহণ: ",-1)),p(o((e==null?void 0:e.approved_by_name)||"N/A"),1)])]),t("td",Se,[t("div",pe,[t("a",{href:`/applications/${e.id}`,class:"btn-2",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,Ce),(e==null?void 0:e.payment_status)==="Pending"?(l(),n("button",{key:0,onClick:Pe=>j(e.id),class:"btn-contrast"}," গ্রহণ ",8,Ve)):S("",!0)])])]))),128)):(l(),n("tr",Ae,s[22]||(s[22]=[t("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),t("div",Le,[t("button",{class:"btn-1",disabled:u.value===1,onClick:I},"Prev",8,Ne),t("div",De,[g(t("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>u.value=e),class:"btn-1"},[(l(!0),n(h,null,k(((N=x(d).pagination)==null?void 0:N.last_page)||1,e=>(l(),n("option",{key:e},o(e),1))),128))],512),[[c,u.value]])]),t("button",{class:"btn-1",disabled:u.value===((D=x(d).pagination)==null?void 0:D.last_page),onClick:F}," Next ",8,Me)]),U(O,{show:x(d).showStatusModal,"application-id":V.value,onClose:A,onDataUpdated:E},null,8,["show","application-id"])])}}};export{Fe as default};
