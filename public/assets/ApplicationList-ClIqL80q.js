import{r as x,x as Z,o as $,s as h,l as q,a as d,c as n,b as e,t as o,d as y,n as m,p as N,i as f,v as U,D as j,j as v,z as G,F,m as P,q as B,y as H}from"./index-DmWwmszD.js";import{_ as J}from"./ApplicationStatusModal-BCuu08Vo.js";import{u as O}from"./application-CoUBRzah.js";import{u as Q}from"./exam-1qQyYjc4.js";import{u as W}from"./zamat-CgPGTWHf.js";import{f as X}from"./index-DRrsUpCq.js";const Y={class:"space-y-2 px-6 py-4"},p={class:"flex justify-between items-center"},tt={class:"title-lg"},et={class:"card-bg p-4 grid md:grid-cols-3"},st={class:"relative"},ot=e("i",{class:"fas fa-search"},null,-1),dt=[ot],nt={class:"relative"},rt=e("i",{class:"fas fa-search"},null,-1),at=[rt],lt=e("option",{value:""},"- সকল মারহালা -",-1),ut=["value"],ct={key:0,class:"flex justify-center items-center"},_t=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1),xt=[_t],ht={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},yt={class:"min-w-full table-auto"},mt=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"শিক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1),ft={class:"text-gray-700 text-sm font-light"},vt={class:"py-3 px-4 text-left"},gt={class:"py-3 px-4 text-center"},bt={class:"py-3 px-4 text-center"},wt={class:"py-3 px-4 text-left"},it={class:"py-3 px-4 text-left"},kt={class:"py-3 px-4 text-left"},St={class:"py-3 px-4 text-center"},Mt={class:"py-3 px-4 text-right"},At={class:"py-3 px-4 text-center"},Ct={class:"py-3 px-4 text-center"},Dt={class:"py-3 px-4 text-center"},Vt={class:"flex items-center justify-end gap-2"},Lt=["onClick"],zt={key:1},Nt=e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1),Ut=[Nt],Tt={__name:"ApplicationList",setup(jt){const E=s=>X(new Date(s),"dd-MMM-yyyy"),g=Q(),b=W(),a=O(),w=x(!0),i=x(null),u=x(""),_=x(""),c=x(""),k=Z(()=>[...a.applications].sort((s,r)=>new Date(r.created_at)-new Date(s.created_at)));$(async()=>{try{await a.fetchApplications(),await g.fetchLastExam(),await b.fetchZamats()}finally{w.value=!1}});const I=s=>{i.value=s,a.showStatusModal=!0},S=()=>{a.showStatusModal=!1},K=async()=>{await a.fetchApplications(),S()},R=()=>{const s={};return _.value&&(s.zamat_id=_.value),u.value&&(s.institute_code=u.value),c.value&&(s.application_id=c.value),s},l=async()=>{const s=R();await a.fetchApplications(s)};return h([_],l),h(c,s=>{s||l()}),h(u,s=>{s||l()}),(s,r)=>{var A;const M=q("RouterLink");return d(),n("div",Y,[e("div",p,[e("h1",tt,o((A=y(g).exam)==null?void 0:A.name)+"-এর নিবন্ধন তালিকা",1),m(M,{to:{name:"ApplicationForm"},class:"btn-2"},{default:N(()=>[B("নতুন নিবন্ধন")]),_:1})]),e("div",et,[e("div",st,[f(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>c.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:j(l,["enter"])},null,544),[[U,c.value]]),c.value?(d(),n("button",{key:0,onClick:l,class:"absolute right-3 top-2"},dt)):v("",!0)]),e("div",nt,[f(e("input",{"onUpdate:modelValue":r[1]||(r[1]=t=>u.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:j(l,["enter"])},null,544),[[U,u.value]]),u.value?(d(),n("button",{key:0,onClick:l,class:"absolute right-3 top-2"},at)):v("",!0)]),f(e("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>_.value=t),class:"text-black input-1 px-2 py-1"},[lt,(d(!0),n(F,null,P(y(b).zamats,t=>(d(),n("option",{key:t.id,value:t.id},o(t.name),9,ut))),128))],512),[[G,_.value]])]),w.value?(d(),n("div",ct,xt)):(d(),n("div",ht,[e("table",yt,[mt,e("tbody",ft,[k.value.length?(d(!0),n(F,{key:0},P(k.value,(t,T)=>{var C,D,V,L,z;return d(),n("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",vt,o(T+1),1),e("td",gt,o(E(t==null?void 0:t.created_at)),1),e("td",bt,o(t==null?void 0:t.id),1),e("td",wt,o((C=t==null?void 0:t.institute)==null?void 0:C.institute_code)+" - "+o((D=t==null?void 0:t.institute)==null?void 0:D.name),1),e("td",it,o((V=t==null?void 0:t.area)==null?void 0:V.name),1),e("td",kt,o((L=t==null?void 0:t.zamat)==null?void 0:L.name),1),e("td",St,o((z=t==null?void 0:t.students)==null?void 0:z.length)+" জন",1),e("td",Mt,o(t==null?void 0:t.total_amount),1),e("td",At,o(t==null?void 0:t.payment_method),1),e("td",Ct,[e("span",{class:H([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},o(t==null?void 0:t.payment_status),3)]),e("td",Dt,[e("div",Vt,[m(M,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:N(()=>[B("দেখুন")]),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(d(),n("button",{key:0,onClick:Ft=>I(t.id),class:"btn-contrast"}," নিবন্ধন গ্রহণ ",8,Lt)):v("",!0)])])])}),128)):(d(),n("tr",zt,Ut))])])])),m(J,{show:y(a).showStatusModal,"application-id":i.value,onClose:S,onDataUpdated:K},null,8,["show","application-id"])])}}};export{Tt as default};
