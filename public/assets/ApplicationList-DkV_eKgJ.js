import{r as x,z as Z,h as q,c as n,a as t,t as l,i as r,y as f,d as j,w as G,m as c,A as b,j as H,v as B,B as F,f as h,F as k,b as w,x as J,o as d,n as E}from"./index-Di1hoYSN.js";import{_ as O}from"./ApplicationStatusModal-Cq7urMlx.js";import{u as Q}from"./application-nuKGG4gT.js";import{u as W}from"./exam-iDx9yOQT.js";import{u as X}from"./zamat-eqEJUxSi.js";const Y={class:"space-y-2 px-6 py-4"},tt={class:"md:flex justify-between items-center"},et={class:""},st={class:"title-lg"},lt={class:"md:flex divide-x md:divide-black text-sm"},ot={class:"md:pr-2"},nt={class:"md:px-2"},dt={class:"md:pl-2"},ut={class:"card-bg p-4 grid md:grid-cols-4"},rt={class:"relative"},at={class:"relative"},xt=["value"],mt={key:0,class:"flex justify-center items-center"},vt={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},yt={class:"min-w-full table-auto"},_t={class:"text-gray-700 text-sm font-light"},ft={class:"py-3 px-4 text-left"},it={class:"flex items-center"},ct={class:"mr-2"},gt={key:0,class:"font-medium"},bt={key:1,class:"font-medium"},ht={class:"py-3 px-4 text-center"},kt={class:"py-3 px-4 text-center"},wt={class:"py-3 px-4 text-left"},pt={class:"py-3 px-4 text-left"},At={class:"py-3 px-4 text-left"},St={class:"py-3 px-4 text-center"},Ct={class:"py-3 px-4 text-right"},Vt={class:"py-3 px-4 text-center"},Nt={class:"py-3 px-4 text-center"},Mt={class:"py-3 px-4 text-left"},Dt={class:"py-3 px-4 text-center"},Lt={class:"flex items-center justify-end gap-2"},Pt=["href"],Ut=["onClick"],zt={key:1},jt={class:"flex justify-between items-center mt-4"},Bt=["disabled"],Ft={class:"flex space-x-1"},Et=["disabled"],Gt={__name:"ApplicationList",setup(It){const p=W(),A=X(),o=Q(),S=x(null),m=x(""),i=x(""),v=x(""),g=x(!0),y=x(15),u=x(1),I=a=>{S.value=a,o.showStatusModal=!0},C=()=>{o.showStatusModal=!1},K=async()=>{await o.fetchApplications(V()),C()},V=()=>{const a={page:u.value,per_page:y.value};return i.value&&(a.zamat_id=i.value),m.value&&(a.institute_code=m.value),v.value&&(a.application_id=v.value),a},_=async()=>{g.value=!0;const a=V();await o.fetchApplications(a),g.value=!1},$=()=>{u.value<o.pagination.last_page&&(u.value+=1)},R=()=>{u.value>1&&(u.value-=1)};return Z([u,y,i,v,m],_),q(async()=>{await p.fetchLastExam(),await A.fetchZamats(),await o.fetchApplicationCounts(),_()}),(a,s)=>{var N,M,D,L,P,U;const T=J("RouterLink");return d(),n("div",Y,[t("div",tt,[t("div",et,[t("h1",st,l((N=r(p).exam)==null?void 0:N.name)+"-এর নিবন্ধন তালিকা",1),t("div",lt,[t("div",ot,[s[5]||(s[5]=f(" মোট নিবন্ধন: ")),t("span",null,l((M=r(o))==null?void 0:M.totalApplications)+" টি",1)]),t("div",nt,[s[6]||(s[6]=f(" পেন্ডিং নিবন্ধন: ")),t("span",null,l((D=r(o))==null?void 0:D.pendingApplications)+" টি",1)]),t("div",dt,[s[7]||(s[7]=f(" পেইড নিবন্ধন: ")),t("span",null,l((L=r(o))==null?void 0:L.paidApplications)+" টি",1)])])]),j(T,{to:{name:"ApplicationForm"},class:"btn-2"},{default:G(()=>s[8]||(s[8]=[f("নতুন নিবন্ধন যুক্ত করুন")])),_:1})]),t("div",ut,[t("div",null,[s[10]||(s[10]=t("p",null,"প্রতি পৃষ্ঠায় নিবন্ধন সংখ্যা",-1)),c(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>y.value=e),class:"text-black input-1 px-2 py-1"},s[9]||(s[9]=[H('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[b,y.value]])]),t("div",null,[s[12]||(s[12]=t("p",null,"নিবন্ধন নাম্বার দিয়ে খুঁজুন",-1)),t("div",rt,[c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:F(_,["enter"])},null,544),[[B,v.value]]),v.value?(d(),n("button",{key:0,onClick:_,class:"absolute right-3 top-2"},s[11]||(s[11]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[14]||(s[14]=t("p",null,"ইলহাক নাম্বার দিয়ে খুঁজুন",-1)),t("div",at,[c(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>m.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:F(_,["enter"])},null,544),[[B,m.value]]),m.value?(d(),n("button",{key:0,onClick:_,class:"absolute right-3 top-2"},s[13]||(s[13]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[16]||(s[16]=t("p",null,"মারহালা অনুসারে খুঁজুন",-1)),c(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>i.value=e),class:"text-black input-1 px-2 py-1"},[s[15]||(s[15]=t("option",{value:""},"- সকল মারহালা -",-1)),(d(!0),n(k,null,w(r(A).zamats,e=>(d(),n("option",{key:e.id,value:e.id},l(e.name),9,xt))),128))],512),[[b,i.value]])])]),g.value?(d(),n("div",mt,s[17]||(s[17]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1)]))):(d(),n("div",vt,[t("table",yt,[s[23]||(s[23]=t("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"ক্র"),t("th",{class:"py-3 px-4 text-center"},"তারিখ"),t("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),t("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),t("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),t("th",{class:"py-3 px-4 text-left"},"মারহালা"),t("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),t("th",{class:"py-3 px-4 text-right"},"টাকা"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),t("th",{class:"py-3 px-4 text-center"},"ইউজার"),t("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),t("tbody",_t,[r(o).applications&&r(o).applications.length?(d(!0),n(k,{key:0},w(r(o).applications,(e,z)=>(d(),n("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[t("td",ft,[t("div",it,[t("div",ct,[y.value==="all"?(d(),n("p",gt,l(z+1),1)):(d(),n("p",bt,l((u.value-1)*y.value+z+1),1))])])]),t("td",ht,l(new Date(e==null?void 0:e.application_date).toLocaleDateString("bn-BD")),1),t("td",kt,l(e==null?void 0:e.id),1),t("td",wt,[t("div",null,l(e==null?void 0:e.institute_code_name),1),t("div",null,[s[18]||(s[18]=t("strong",{class:""},"কেন্দ্র: ",-1)),t("span",{class:E(e!=null&&e.center_name?"":"text-red-500")},l((e==null?void 0:e.center_name)||"নির্বাচন করা নেই"),3)])]),t("td",pt,l(e==null?void 0:e.area_name),1),t("td",At,l(e==null?void 0:e.zamat_name),1),t("td",St,l(e==null?void 0:e.student_count)+" জন",1),t("td",Ct,l(e==null?void 0:e.total_amount),1),t("td",Vt,l(e==null?void 0:e.payment_method),1),t("td",Nt,[t("span",{class:E([{"text-yellow-600 bg-yellow-200":(e==null?void 0:e.payment_status)==="Pending","text-green-600 bg-green-200":(e==null?void 0:e.payment_status)==="Paid","text-red-600 bg-red-200":(e==null?void 0:e.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},l(e==null?void 0:e.payment_status),3)]),t("td",Mt,[t("div",null,[s[19]||(s[19]=t("strong",{class:""},"প্রেরণ: ",-1)),f(l((e==null?void 0:e.submitted_by_name)||"N/A"),1)]),s[21]||(s[21]=t("hr",null,null,-1)),t("div",null,[s[20]||(s[20]=t("strong",{class:""},"গ্রহণ: ",-1)),f(l((e==null?void 0:e.approved_by_name)||"N/A"),1)])]),t("td",Dt,[t("div",Lt,[t("a",{href:`/applications/${e.id}`,class:"btn-2",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,Pt),(e==null?void 0:e.payment_status)==="Pending"?(d(),n("button",{key:0,onClick:Kt=>I(e.id),class:"btn-contrast"}," গ্রহণ ",8,Ut)):h("",!0)])])]))),128)):(d(),n("tr",zt,s[22]||(s[22]=[t("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),t("div",jt,[t("button",{class:"btn-1",disabled:u.value===1,onClick:R},"Prev",8,Bt),t("div",Ft,[c(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),class:"btn-1"},[(d(!0),n(k,null,w(((P=r(o).pagination)==null?void 0:P.last_page)||1,e=>(d(),n("option",{key:e},l(e),1))),128))],512),[[b,u.value]])]),t("button",{class:"btn-1",disabled:u.value===((U=r(o).pagination)==null?void 0:U.last_page),onClick:$}," Next ",8,Et)]),j(O,{show:r(o).showStatusModal,"application-id":S.value,onClose:C,onDataUpdated:K},null,8,["show","application-id"])])}}};export{Gt as default};
