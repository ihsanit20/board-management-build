import{r as f,z as h,h as K,c as n,a as e,t as d,i as x,y as m,d as c,w as N,m as g,v as V,B as z,f as b,A as R,F as B,b as U,x as T,o as r,n as F}from"./index-CMOJ6xAf.js";import{_ as Z}from"./ApplicationStatusModal-XbNfYkoJ.js";import{u as $}from"./application-CR1q9tOt.js";import{u as q}from"./exam-BRYTxUT1.js";import{u as G}from"./zamat-BQpvAqnJ.js";const H={class:"space-y-2 px-6 py-4"},J={class:"md:flex justify-between items-center"},O={class:""},Q={class:"title-lg"},W={class:"md:flex divide-x md:divide-black text-sm"},X={class:"md:pr-2"},Y={class:"md:px-2"},p={class:"md:pl-2"},tt={class:"card-bg p-4 grid md:grid-cols-3"},et={class:"relative"},st={class:"relative"},dt=["value"],lt={key:0,class:"flex justify-center items-center"},ot={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},nt={class:"min-w-full table-auto"},rt={class:"text-gray-700 text-sm font-light"},ut={class:"py-3 px-4 text-left"},xt={class:"py-3 px-4 text-center"},mt={class:"py-3 px-4 text-center"},at={class:"py-3 px-4 text-left"},yt={class:"py-3 px-4 text-left"},_t={class:"py-3 px-4 text-left"},ft={class:"py-3 px-4 text-center"},vt={class:"py-3 px-4 text-right"},ht={class:"py-3 px-4 text-center"},ct={class:"py-3 px-4 text-center"},gt={class:"py-3 px-4 text-left"},bt={class:"py-3 px-4 text-center"},wt={class:"flex items-center justify-end gap-2"},kt=["onClick"],At={key:1},Vt={__name:"ApplicationList",setup(St){const w=q(),k=G(),o=$(),A=f(null),a=f(""),_=f(""),y=f(""),v=f(!0),P=l=>{A.value=l,o.showStatusModal=!0},S=()=>{o.showStatusModal=!1},j=async()=>{await o.fetchApplications(),S()},E=()=>{const l={};return _.value&&(l.zamat_id=_.value),a.value&&(l.institute_code=a.value),y.value&&(l.application_id=y.value),l},u=async()=>{v.value=!0;const l=E();await o.fetchApplications(l),v.value=!1};return h([_],u),h(y,l=>{l||u()}),h(a,l=>{l||u()}),K(async()=>{w.fetchLastExam(),k.fetchZamats(),o.fetchApplicationCounts(),u()}),(l,s)=>{var i,M,D,L;const C=T("RouterLink");return r(),n("div",H,[e("div",J,[e("div",O,[e("h1",Q,d((i=x(w).exam)==null?void 0:i.name)+"-এর নিবন্ধন তালিকা",1),e("div",W,[e("div",X,[s[3]||(s[3]=m(" মোট নিবন্ধন: ")),e("span",null,d((M=x(o))==null?void 0:M.totalApplications)+" টি",1)]),e("div",Y,[s[4]||(s[4]=m(" পেন্ডিং নিবন্ধন: ")),e("span",null,d((D=x(o))==null?void 0:D.pendingApplications)+" টি",1)]),e("div",p,[s[5]||(s[5]=m(" পেইড নিবন্ধন: ")),e("span",null,d((L=x(o))==null?void 0:L.paidApplications)+" টি",1)])])]),c(C,{to:{name:"ApplicationForm"},class:"btn-2"},{default:N(()=>s[6]||(s[6]=[m("নতুন নিবন্ধন যুক্ত করুন")])),_:1})]),e("div",tt,[e("div",et,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>y.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:z(u,["enter"])},null,544),[[V,y.value]]),y.value?(r(),n("button",{key:0,onClick:u,class:"absolute right-3 top-2"},s[7]||(s[7]=[e("i",{class:"fas fa-search"},null,-1)]))):b("",!0)]),e("div",st,[g(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.value=t),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:z(u,["enter"])},null,544),[[V,a.value]]),a.value?(r(),n("button",{key:0,onClick:u,class:"absolute right-3 top-2"},s[8]||(s[8]=[e("i",{class:"fas fa-search"},null,-1)]))):b("",!0)]),g(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>_.value=t),class:"text-black input-1 px-2 py-1"},[s[9]||(s[9]=e("option",{value:""},"- সকল মারহালা -",-1)),(r(!0),n(B,null,U(x(k).zamats,t=>(r(),n("option",{key:t.id,value:t.id},d(t.name),9,dt))),128))],512),[[R,_.value]])]),v.value?(r(),n("div",lt,s[10]||(s[10]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-sky-600"},null,-1)]))):(r(),n("div",ot,[e("table",nt,[s[17]||(s[17]=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-center"},"তারিখ"),e("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),e("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),e("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),e("th",{class:"py-3 px-4 text-right"},"টাকা"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),e("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),e("th",{class:"py-3 px-4 text-center"},"ইউজার"),e("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),e("tbody",rt,[x(o).applications.length?(r(!0),n(B,{key:0},U(x(o).applications,(t,I)=>(r(),n("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",ut,d(I+1),1),e("td",xt,d(new Date(t==null?void 0:t.application_date).toLocaleDateString("bn-BD")),1),e("td",mt,d(t==null?void 0:t.id),1),e("td",at,[e("div",null,d(t==null?void 0:t.institute_code_name),1),e("div",null,[s[11]||(s[11]=e("strong",{class:""},"কেন্দ্র: ",-1)),e("span",{class:F(t!=null&&t.center_name?"":"text-red-500")},d((t==null?void 0:t.center_name)||"নির্বাচন করা নেই"),3)])]),e("td",yt,d(t==null?void 0:t.area_name),1),e("td",_t,d(t==null?void 0:t.zamat_name),1),e("td",ft,d(t==null?void 0:t.student_count)+" জন",1),e("td",vt,d(t==null?void 0:t.total_amount),1),e("td",ht,d(t==null?void 0:t.payment_method),1),e("td",ct,[e("span",{class:F([{"text-yellow-600 bg-yellow-200":(t==null?void 0:t.payment_status)==="Pending","text-green-600 bg-green-200":(t==null?void 0:t.payment_status)==="Paid","text-red-600 bg-red-200":(t==null?void 0:t.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},d(t==null?void 0:t.payment_status),3)]),e("td",gt,[e("div",null,[s[12]||(s[12]=e("strong",{class:""},"প্রেরণ: ",-1)),m(d((t==null?void 0:t.submitted_by_name)||"N/A"),1)]),s[14]||(s[14]=e("hr",null,null,-1)),e("div",null,[s[13]||(s[13]=e("strong",{class:""},"গ্রহণ: ",-1)),m(d((t==null?void 0:t.approved_by_name)||"N/A"),1)])]),e("td",bt,[e("div",wt,[c(C,{to:{name:"ApplicationShow",params:{id:t.id}},class:"btn-2"},{default:N(()=>s[15]||(s[15]=[m(" দেখুন ")])),_:2},1032,["to"]),(t==null?void 0:t.payment_status)==="Pending"?(r(),n("button",{key:0,onClick:Ct=>P(t.id),class:"btn-contrast"}," গ্রহণ ",8,kt)):b("",!0)])])]))),128)):(r(),n("tr",At,s[16]||(s[16]=[e("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),c(Z,{show:x(o).showStatusModal,"application-id":A.value,onClose:S,onDataUpdated:j},null,8,["show","application-id"])])}}};export{Vt as default};
