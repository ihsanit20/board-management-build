import{C as it,r as W,h as dt,z as S,c as l,i as n,a as t,t as i,y,f as b,m as _,A as f,F as v,b as c,n as rt,d as X,w as ut,p as pt,x as mt,o,v as g}from"./index-CAgUe3_x.js";import{u as _t}from"./application-Be9hgU5U.js";import{u as vt}from"./institute-11XyoncV.js";import{u as yt}from"./group-bcA-TgRu.js";import{u as ct}from"./area-o0GG4u4j.js";import{u as bt}from"./zamat-BpWAG0c2.js";import{u as ft}from"./center-CXE4Gpup.js";import{_ as gt}from"./ApplicationStatusModal-tiieBH_-.js";const kt={class:"my-container space-y-4"},xt={key:0,class:"flex justify-center items-center"},St={key:1,class:"card-bg p-4 md:p-8 space-y-4"},ht={class:"space-y-4"},wt={class:"relative"},Vt={class:"flex flex-col justify-center items-center"},Ct={class:"title-md text-center"},Ut={class:"absolute top-0 right-0"},Dt={class:"space-y-2"},zt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},At={key:0},Et=["value"],Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bt={class:"space-y-2"},Lt={class:"flex gap-4"},Rt={key:0},jt={key:0},Ft=["disabled"],It=["value"],Nt={key:0},Pt=["disabled"],qt=["value"],Gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Tt={key:0},Zt=["label"],$t=["value"],Ht={key:0},Jt=["disabled"],Kt=["value"],Ot={key:0},Qt={class:"relative"},Wt={class:"absolute top-0 right-0"},Xt={class:"overflow-x-auto"},Yt={class:"table-auto w-full text-left border-collapse"},te={class:"border px-4 py-2"},ee={class:"border px-4 py-2"},se={key:0},le=["onUpdate:modelValue"],oe={class:"border px-4 py-2"},ae={key:0},ne=["onUpdate:modelValue"],ie={class:"border px-4 py-2"},de={class:"border px-4 py-2"},re={key:0},ue=["onUpdate:modelValue"],pe={class:"border px-4 py-2"},me={key:0},_e=["onUpdate:modelValue"],ve={class:"flex justify-between gap-4"},ye={key:2,class:"text-center text-red-500"},Ce={__name:"ApplicationList",setup(ce){const k=_t(),h=ct(),w=vt(),V=yt(),C=bt(),x=ft(),U=pt().params.id,{application:a,loading:Y}=it(k),u=W(!1),p=W(!1),D=async()=>{try{await Promise.all([k.fetchApplication(U),h.fetchAreas(),C.fetchZamats(),x.fetchCenters()])}catch(d){console.error("Failed to load application:",d)}};dt(D),S(()=>{var d;return(d=a.value)==null?void 0:d.area_id},async d=>{d&&await w.fetchInstitutes({area_id:d,per_page:"all"})}),S(()=>{var d;return(d=a.value)==null?void 0:d.zamat_id},async d=>{d&&(await V.fetchGroups({zamat_id:d}),z())}),S(()=>{var d;return(d=a.value)==null?void 0:d.group_id},async d=>{d&&z()});const z=async()=>{var d,e;(d=a.value)!=null&&d.zamat_id&&((e=a.value)!=null&&e.group_id)&&await x.fetchCenters({zamat_id:a.value.zamat_id,group_id:a.value.group_id})},tt=()=>{u.value=!u.value},et=()=>{p.value=!p.value},st=async()=>{u.value=!1},lt=async()=>{p.value=!1},ot=()=>{k.showStatusModal=!0},at=async()=>{await D()};return(d,e)=>{var A,E,M,B,L,R,j,F,I,N,P,q,G,T,Z,$,H,J,K,O,Q;const nt=mt("router-link");return o(),l("div",kt,[n(Y)?(o(),l("div",xt,e[5]||(e[5]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):n(a)?(o(),l("div",St,[t("div",ht,[t("div",wt,[t("div",Vt,[t("h4",Ct,i((E=(A=n(a))==null?void 0:A.exam)==null?void 0:E.name),1),e[6]||(e[6]=t("h1",{class:"title-lg text-center"},"নিবন্ধনের বিস্তারিত",-1))]),t("div",Ut,[u.value?b("",!0):(o(),l("button",{key:0,class:"btn-3",onClick:tt},e[7]||(e[7]=[t("i",{class:"fas fa-edit"},null,-1),y(" Edit ")]))),u.value?(o(),l("button",{key:1,class:"btn-2",onClick:st},e[8]||(e[8]=[t("i",{class:"fas fa-save"},null,-1),y(" Save ")]))):b("",!0)])]),t("div",Dt,[e[18]||(e[18]=t("hr",null,null,-1)),t("div",zt,[t("div",null,[e[9]||(e[9]=t("b",null,"নিবন্ধন নং:",-1)),t("p",null,i(n(a).id),1)]),t("div",null,[e[10]||(e[10]=t("b",null,"নিবন্ধনের তারিখ:",-1)),t("p",null,i(new Date(n(a).created_at).toLocaleDateString("bn-BD"))+" ইং",1)]),t("div",null,[e[12]||(e[12]=t("b",null,"অঞ্চল:",-1)),u.value?_((o(),l("select",{key:1,"onUpdate:modelValue":e[0]||(e[0]=s=>n(a).area_id=s),class:"input-1"},[e[11]||(e[11]=t("option",{value:"",disabled:""},"Select Area",-1)),(o(!0),l(v,null,c(n(h).areas,s=>(o(),l("option",{key:s.id,value:s.id},i(s.name),9,Et))),128))],512)),[[f,n(a).area_id]]):(o(),l("p",At,i((B=(M=n(a))==null?void 0:M.area)==null?void 0:B.name),1))])]),e[19]||(e[19]=t("hr",null,null,-1)),t("div",Mt,[t("div",Bt,[t("div",Lt,[u.value?b("",!0):(o(),l("div",Rt,[e[13]||(e[13]=t("b",null,"ইলহাক:",-1)),t("p",null,i((R=(L=n(a))==null?void 0:L.institute)==null?void 0:R.institute_code),1)])),t("div",null,[e[15]||(e[15]=t("b",null,"শিক্ষা প্রতিষ্ঠানের নাম ও ঠিকানা:",-1)),u.value?_((o(),l("select",{key:1,"onUpdate:modelValue":e[1]||(e[1]=s=>n(a).institute_id=s),class:"input-1",disabled:!n(a).area_id,required:""},[e[14]||(e[14]=t("option",{value:"",disabled:""},"Select Institute",-1)),(o(!0),l(v,null,c(n(w).institutes,s=>(o(),l("option",{key:s.id,value:s.id},i(s.institute_code)+" - "+i(s.name),9,It))),128))],8,Ft)),[[f,n(a).institute_id]]):(o(),l("p",jt,i((F=(j=n(a))==null?void 0:j.institute)==null?void 0:F.name),1))])])]),t("div",null,[e[17]||(e[17]=t("b",null,"কেন্দ্র:",-1)),u.value?_((o(),l("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=s=>n(a).center_id=s),class:"input-1",disabled:!n(a).zamat_id,required:""},[e[16]||(e[16]=t("option",{value:"",disabled:""},"Select Center",-1)),(o(!0),l(v,null,c(n(x).centers,s=>{var r;return o(),l("option",{key:s.id,value:s==null?void 0:s.institute_id},i((r=s==null?void 0:s.institute)==null?void 0:r.name),9,qt)}),128))],8,Pt)),[[f,n(a).center_id]]):(o(),l("p",Nt,i(((N=(I=n(a))==null?void 0:I.center)==null?void 0:N.name)||"নির্বাচন করা নেই"),1))])])]),e[29]||(e[29]=t("hr",null,null,-1)),t("div",Gt,[t("div",null,[e[21]||(e[21]=t("b",null,"মারহালা:",-1)),u.value?_((o(),l("select",{key:1,"onUpdate:modelValue":e[3]||(e[3]=s=>n(a).zamat_id=s),class:"input-1",required:""},[e[20]||(e[20]=t("option",{value:"",disabled:""},"Select Marhala",-1)),(o(!0),l(v,null,c(n(C).departments,s=>(o(),l("optgroup",{label:s.name,key:s.id},[(o(!0),l(v,null,c(s.zamats,r=>(o(),l("option",{key:r.id,value:r.id},i(r.name),9,$t))),128))],8,Zt))),128))],512)),[[f,n(a).zamat_id]]):(o(),l("p",Tt,i((q=(P=n(a))==null?void 0:P.zamat)==null?void 0:q.name),1))]),t("div",null,[e[24]||(e[24]=t("b",null,"গ্রুপ:",-1)),u.value?_((o(),l("select",{key:1,"onUpdate:modelValue":e[4]||(e[4]=s=>n(a).group_id=s),class:"input-1",disabled:!n(a).zamat_id},[e[23]||(e[23]=t("option",{value:"",disabled:""},"Select Group",-1)),(o(!0),l(v,null,c(n(V).groups,s=>(o(),l("option",{key:s.id,value:s.id},[y(i(s.name)+" (",1),(o(!0),l(v,null,c(s.areas,(r,m)=>(o(),l(v,{key:r.id},[m?(o(),l("span",Ot,", ")):b("",!0),t("span",null,i(r.name),1)],64))),128)),e[22]||(e[22]=y(") "))],8,Kt))),128))],8,Jt)),[[f,n(a).group_id]]):(o(),l("p",Ht,i(((T=(G=n(a))==null?void 0:G.group)==null?void 0:T.name)||"প্রযোজ্য নয়"),1))]),t("div",null,[t("b",null,"টাকার পরিমাণ ("+i((Z=n(a))==null?void 0:Z.payment_method)+"):",1),t("p",null,[y(i(($=n(a))==null?void 0:$.total_amount)+" টাকা ",1),t("span",{class:rt([{"text-yellow-600 bg-yellow-200":((H=n(a))==null?void 0:H.payment_status)==="Pending","text-green-600 bg-green-200":((J=n(a))==null?void 0:J.payment_status)==="Paid","text-red-600 bg-red-200":((K=n(a))==null?void 0:K.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},i((O=n(a))==null?void 0:O.payment_status),3)])])]),e[30]||(e[30]=t("hr",null,null,-1)),t("div",Qt,[e[27]||(e[27]=t("div",{class:"flex justify-center"},[t("h2",{class:"title-lg"},"পরীক্ষার্থীদের তথ্য")],-1)),t("div",Wt,[p.value?b("",!0):(o(),l("button",{key:0,class:"btn-3",onClick:et},e[25]||(e[25]=[t("i",{class:"fas fa-edit"},null,-1),y(" Edit ")]))),p.value?(o(),l("button",{key:1,class:"btn-2",onClick:lt},e[26]||(e[26]=[t("i",{class:"fas fa-save"},null,-1),y(" Save ")]))):b("",!0)])]),t("div",Xt,[t("table",Yt,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"bg-gray-200"},[t("th",{class:"border px-4 py-2"},"#"),t("th",{class:"border px-4 py-2"},"নাম"),t("th",{class:"border px-4 py-2"},"পিতার নাম"),t("th",{class:"border px-4 py-2"},"জন্ম তারিখ"),t("th",{class:"border px-4 py-2"},"পারার বিবরণ"),t("th",{class:"border px-4 py-2"},"ঠিকানা (গ্রাম, ডাকঘর, থানা, জেলা)")])],-1)),t("tbody",null,[(o(!0),l(v,null,c(n(a).students,(s,r)=>(o(),l("tr",{key:r},[t("td",te,i(r+1),1),t("td",ee,[p.value?_((o(),l("input",{key:1,"onUpdate:modelValue":m=>s.name=m,type:"text",class:"input-1"},null,8,le)),[[g,s.name]]):(o(),l("span",se,i(s.name),1))]),t("td",oe,[p.value?_((o(),l("input",{key:1,"onUpdate:modelValue":m=>s.father_name=m,type:"text",class:"input-1"},null,8,ne)),[[g,s.father_name]]):(o(),l("span",ae,i(s.father_name),1))]),t("td",ie,i(new Date(s.date_of_birth).toLocaleDateString("bn-BD"))+" ইং ",1),t("td",de,[p.value?_((o(),l("input",{key:1,"onUpdate:modelValue":m=>s.para=m,type:"text",class:"input-1"},null,8,ue)),[[g,s.para]]):(o(),l("span",re,i(s.para||"প্রযোজ্য নয়"),1))]),t("td",pe,[p.value?_((o(),l("input",{key:1,"onUpdate:modelValue":m=>s.address=m,type:"text",class:"input-1"},null,8,_e)),[[g,s.address]]):(o(),l("span",me,i(s.address),1))])]))),128))])])])]),t("div",ve,[X(nt,{to:{name:"ApplicationList"},class:"btn-2"},{default:ut(()=>e[31]||(e[31]=[y("তালিকায় যান")])),_:1}),e[32]||(e[32]=t("button",{onclick:"window.print()",class:"btn-3"},"প্রিন্ট করুন",-1)),((Q=n(a))==null?void 0:Q.payment_status)==="Pending"?(o(),l("button",{key:0,onClick:ot,class:"btn-contrast"}," নিবন্ধন গ্রহণ ")):b("",!0)])])):(o(),l("div",ye,e[33]||(e[33]=[t("p",null,"Application not found.",-1)]))),X(gt,{applicationId:n(U),onDataUpdated:at},null,8,["applicationId"])])}}};export{Ce as default};
