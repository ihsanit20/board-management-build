import{A as Z,r as x,B as q,o as G,c as d,a as t,t as l,b as r,y as f,f as B,w as H,j as c,C as b,l as J,v as j,D as F,h,F as k,e as w,k as O,z as Q,d as n,n as E,L as W}from"./index-D8px5qaH.js";import{_ as X}from"./ApplicationStatusModal-JTwb0xJZ.js";import{u as Y}from"./application-BoFPXIiI.js";import{u as tt}from"./zamat--iypjKXa.js";const et={class:"space-y-2 px-6 py-4"},st={class:"md:flex justify-between items-center"},lt={class:""},ot={class:"title-lg"},nt={class:"md:flex divide-x md:divide-black text-sm"},dt={class:"md:pr-2"},ut={class:"md:px-2"},rt={class:"md:pl-2"},at={class:"card-bg p-4 grid md:grid-cols-4"},xt={class:"relative"},vt={class:"relative"},mt=["value"],_t={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},yt={class:"min-w-full table-auto"},ft={class:"text-gray-700 text-sm font-light"},it={class:"py-3 px-4 text-left"},ct={class:"flex items-center"},gt={class:"mr-2"},bt={key:0,class:"font-medium"},ht={key:1,class:"font-medium"},kt={class:"py-3 px-4 text-center"},wt={class:"py-3 px-4 text-center"},pt={class:"py-3 px-4 text-left"},At={class:"py-3 px-4 text-left"},Ct={class:"py-3 px-4 text-left"},St={class:"py-3 px-4 text-center"},Vt={class:"py-3 px-4 text-right"},Lt={class:"py-3 px-4 text-center"},Nt={class:"py-3 px-4 text-center"},Dt={class:"py-3 px-4 text-left"},Mt={class:"py-3 px-4 text-center"},Pt={class:"flex items-center justify-end gap-2"},Ut=["href"],zt=["onClick"],Bt={key:1},jt={class:"flex justify-between items-center mt-4"},Ft=["disabled"],Et={class:"flex space-x-1"},It=["disabled"],Gt={__name:"ApplicationList",setup(Kt){const p=Z(),A=tt(),o=Y(),C=x(null),v=x(""),i=x(""),m=x(""),g=x(!0),_=x(15),u=x(1),I=a=>{C.value=a,o.showStatusModal=!0},S=()=>{o.showStatusModal=!1},K=async()=>{await o.fetchApplications(V()),S()},V=()=>{const a={page:u.value,per_page:_.value};return i.value&&(a.zamat_id=i.value),v.value&&(a.institute_code=v.value),m.value&&(a.application_id=m.value),a},y=async()=>{g.value=!0;const a=V();await o.fetchApplications(a),g.value=!1},$=()=>{u.value<o.pagination.last_page&&(u.value+=1)},R=()=>{u.value>1&&(u.value-=1)};return q([u,_,i,m,v],y),G(async()=>{await p.fetchLastExam(),await A.fetchZamats(),await o.fetchApplicationCounts(),y()}),(a,s)=>{var L,N,D,M,P,U;const T=Q("RouterLink");return n(),d("div",et,[t("div",st,[t("div",lt,[t("h1",ot,l((L=r(p).exam)==null?void 0:L.name)+"-এর নিবন্ধন তালিকা",1),t("div",nt,[t("div",dt,[s[5]||(s[5]=f(" মোট নিবন্ধন: ")),t("span",null,l((N=r(o))==null?void 0:N.totalApplications)+" টি",1)]),t("div",ut,[s[6]||(s[6]=f(" পেন্ডিং নিবন্ধন: ")),t("span",null,l((D=r(o))==null?void 0:D.pendingApplications)+" টি",1)]),t("div",rt,[s[7]||(s[7]=f(" পেইড নিবন্ধন: ")),t("span",null,l((M=r(o))==null?void 0:M.paidApplications)+" টি",1)])])]),B(T,{to:{name:"ApplicationForm"},class:"btn-2"},{default:H(()=>s[8]||(s[8]=[f("নতুন নিবন্ধন যুক্ত করুন")])),_:1})]),t("div",at,[t("div",null,[s[10]||(s[10]=t("p",null,"প্রতি পৃষ্ঠায় নিবন্ধন সংখ্যা",-1)),c(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),class:"text-black input-1 px-2 py-1"},s[9]||(s[9]=[J('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[b,_.value]])]),t("div",null,[s[12]||(s[12]=t("p",null,"নিবন্ধন নাম্বার দিয়ে খুঁজুন",-1)),t("div",xt,[c(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"নিবন্ধন নং",onKeyup:F(y,["enter"])},null,544),[[j,m.value]]),m.value?(n(),d("button",{key:0,onClick:y,class:"absolute right-3 top-2"},s[11]||(s[11]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[14]||(s[14]=t("p",null,"ইলহাক নাম্বার দিয়ে খুঁজুন",-1)),t("div",vt,[c(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>v.value=e),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"ইলহাক নং",onKeyup:F(y,["enter"])},null,544),[[j,v.value]]),v.value?(n(),d("button",{key:0,onClick:y,class:"absolute right-3 top-2"},s[13]||(s[13]=[t("i",{class:"fas fa-search"},null,-1)]))):h("",!0)])]),t("div",null,[s[16]||(s[16]=t("p",null,"মারহালা অনুসারে খুঁজুন",-1)),c(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>i.value=e),class:"text-black input-1 px-2 py-1"},[s[15]||(s[15]=t("option",{value:""},"- সকল মারহালা -",-1)),(n(!0),d(k,null,w(r(A).zamats,e=>(n(),d("option",{key:e.id,value:e.id},l(e.name),9,mt))),128))],512),[[b,i.value]])])]),g.value?(n(),O(W,{key:0})):(n(),d("div",_t,[t("table",yt,[s[22]||(s[22]=t("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[t("tr",null,[t("th",{class:"py-3 px-4 text-left"},"ক্র"),t("th",{class:"py-3 px-4 text-center"},"তারিখ"),t("th",{class:"py-3 px-4 text-center"},"নিবন্ধন নং"),t("th",{class:"py-3 px-4 text-left"},"ইলহাক ও মাদরাসার নাম"),t("th",{class:"py-3 px-4 text-left"},"অঞ্চল"),t("th",{class:"py-3 px-4 text-left"},"মারহালা"),t("th",{class:"py-3 px-4 text-center"},"পরীক্ষার্থী সংখ্যা"),t("th",{class:"py-3 px-4 text-right"},"টাকা"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট মেথড"),t("th",{class:"py-3 px-4 text-center"},"পেমেন্ট স্ট্যাটাস"),t("th",{class:"py-3 px-4 text-center"},"ইউজার"),t("th",{class:"py-3 px-4 text-center"},"Actions")])],-1)),t("tbody",ft,[r(o).applications&&r(o).applications.length?(n(!0),d(k,{key:0},w(r(o).applications,(e,z)=>(n(),d("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[t("td",it,[t("div",ct,[t("div",gt,[_.value==="all"?(n(),d("p",bt,l(z+1),1)):(n(),d("p",ht,l((u.value-1)*_.value+z+1),1))])])]),t("td",kt,l(new Date(e==null?void 0:e.application_date).toLocaleDateString("bn-BD")),1),t("td",wt,l(e==null?void 0:e.id),1),t("td",pt,[t("div",null,l(e==null?void 0:e.institute_code_name),1),t("div",null,[s[17]||(s[17]=t("strong",{class:""},"কেন্দ্র: ",-1)),t("span",{class:E(e!=null&&e.center_name?"":"text-red-500")},l((e==null?void 0:e.center_name)||"নির্বাচন করা নেই"),3)])]),t("td",At,l(e==null?void 0:e.area_name),1),t("td",Ct,l(e==null?void 0:e.zamat_name),1),t("td",St,l(e==null?void 0:e.student_count)+" জন",1),t("td",Vt,l(e==null?void 0:e.total_amount),1),t("td",Lt,l(e==null?void 0:e.payment_method),1),t("td",Nt,[t("span",{class:E([{"text-yellow-600 bg-yellow-200":(e==null?void 0:e.payment_status)==="Pending","text-green-600 bg-green-200":(e==null?void 0:e.payment_status)==="Paid","text-red-600 bg-red-200":(e==null?void 0:e.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},l(e==null?void 0:e.payment_status),3)]),t("td",Dt,[t("div",null,[s[18]||(s[18]=t("strong",{class:""},"প্রেরণ: ",-1)),f(l((e==null?void 0:e.submitted_by_name)||"N/A"),1)]),s[20]||(s[20]=t("hr",null,null,-1)),t("div",null,[s[19]||(s[19]=t("strong",{class:""},"গ্রহণ: ",-1)),f(l((e==null?void 0:e.approved_by_name)||"N/A"),1)])]),t("td",Mt,[t("div",Pt,[t("a",{href:`/applications/${e.id}`,class:"btn-2",target:"_blank",rel:"noopener noreferrer"}," দেখুন ",8,Ut),(e==null?void 0:e.payment_status)==="Pending"?(n(),d("button",{key:0,onClick:$t=>I(e.id),class:"btn-contrast"}," গ্রহণ ",8,zt)):h("",!0)])])]))),128)):(n(),d("tr",Bt,s[21]||(s[21]=[t("td",{colspan:"11",class:"text-center text-red-500 py-6"},"No applications found",-1)])))])])])),t("div",jt,[t("button",{class:"btn-1",disabled:u.value===1,onClick:R},"Prev",8,Ft),t("div",Et,[c(t("select",{"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),class:"btn-1"},[(n(!0),d(k,null,w(((P=r(o).pagination)==null?void 0:P.last_page)||1,e=>(n(),d("option",{key:e},l(e),1))),128))],512),[[b,u.value]])]),t("button",{class:"btn-1",disabled:u.value===((U=r(o).pagination)==null?void 0:U.last_page),onClick:$}," Next ",8,It)]),B(X,{show:r(o).showStatusModal,"application-id":C.value,onClose:S,onDataUpdated:K},null,8,["show","application-id"])])}}};export{Gt as default};
