import{_ as D,d as m,c as p,a as t,y as u,F as L,e as U,t as i,h as $,n as S,f as w,w as N,z as I,o as B,j as d,v as b,b as l,D as x,G as F}from"./index-4ATOSoLI.js";import{u as M}from"./application-payment-DZG_8Zhp.js";const R={class:"rounded-2xl border border-slate-200 bg-white"},T={key:0,class:"p-8 text-center text-slate-500"},z={key:1,class:"p-8 text-center text-slate-500"},j={key:2,class:"overflow-x-auto"},E={class:"w-full min-w-[900px] border-separate border-spacing-0"},K={class:"td font-medium text-slate-700"},Z={class:"td font-mono text-sm"},q={class:"td"},G={class:"flex flex-col"},O={class:"font-medium text-slate-700"},X={class:"text-xs text-slate-500"},H={key:0},J={class:"td"},Q={class:"td"},W={class:"td text-right font-semibold"},Y={class:"td"},tt={class:"td"},et={class:"td"},st={class:"flex flex-col"},lt={class:"text-xs text-slate-400"},nt={class:"td"},at={class:"flex flex-wrap items-center justify-between gap-3 border-t border-slate-100 p-3"},ot={class:"text-sm text-slate-500"},it={class:"font-medium text-slate-700"},dt={class:"font-medium text-slate-700"},rt={class:"flex items-center gap-2"},ut=["disabled"],mt={class:"text-sm text-slate-600"},pt={class:"font-medium"},ft={class:"font-medium"},bt=["disabled"],xt={__name:"PaymentsTable",props:{rows:{type:Array,default:()=>[]},meta:{type:Object,default:()=>({})},isLoading:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1},hasPrev:{type:Boolean,default:!1}},emits:["view","next","prev","reload"],setup(r){function s(o){return o==null?"—":Number(o).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function f(o){const e=(o==null?void 0:o.meta)||{};return Number(e.students??e.students_count??0)}function c(o){if(!o)return"—";const e=new Date(o);return isNaN(e)?o:e.toLocaleString("en-GB")}function v(o){const e="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium";switch((o||"").toLowerCase()){case"completed":case"paid":return e+" bg-emerald-100 text-emerald-700";case"pending":return e+" bg-amber-100 text-amber-700";case"failed":case"cancelled":return e+" bg-rose-100 text-rose-700";default:return e+" bg-slate-100 text-slate-700"}}function g(o){const e="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium";return(o||"").toLowerCase()==="bkash"?e+" bg-fuchsia-100 text-fuchsia-700":o==="Bank"?e+" bg-blue-100 text-blue-700":e+" bg-slate-100 text-slate-700"}return(o,e)=>{var a,h,P,_;const y=I("RouterLink");return m(),p("section",R,[r.isLoading?(m(),p("div",T,e[2]||(e[2]=[t("span",{class:"loading-spinner mr-2"},null,-1),u(" Loading payments... ")]))):(a=r.rows)!=null&&a.length?(m(),p("div",j,[t("table",E,[e[4]||(e[4]=t("thead",null,[t("tr",{class:"bg-slate-50 text-left text-sm text-slate-600"},[t("th",{class:"th"},"ID"),t("th",{class:"th"},"TRX"),t("th",{class:"th"},"Institute"),t("th",{class:"th"},"Zamat"),t("th",{class:"th"},"Students"),t("th",{class:"th text-right"},"Amount"),t("th",{class:"th"},"Method"),t("th",{class:"th"},"Status"),t("th",{class:"th"},"Paid At"),t("th",{class:"th"},"Actions")])],-1)),t("tbody",null,[(m(!0),p(L,null,U(r.rows,n=>{var k,A,C,V;return m(),p("tr",{key:n.id,class:"border-b border-slate-100 hover:bg-slate-50"},[t("td",K,"#"+i(n.id),1),t("td",Z,i(n.trx_id||"—"),1),t("td",q,[t("div",G,[t("span",O,i(((k=n==null?void 0:n.institute)==null?void 0:k.name)||"—"),1),t("span",X,[u(i(((A=n==null?void 0:n.institute)==null?void 0:A.institute_code)||"")+" ",1),(C=n==null?void 0:n.institute)!=null&&C.phone?(m(),p("span",H," • "+i(n.institute.phone),1)):$("",!0)])])]),t("td",J,i(((V=n==null?void 0:n.zamat)==null?void 0:V.name)||"—"),1),t("td",Q,i(f(n)||"—")+" জন",1),t("td",W,i(s(n.amount)),1),t("td",Y,[t("span",{class:S(["badge",g(n.payment_method)])},i(n.payment_method),3)]),t("td",tt,[t("span",{class:S(["badge",v(n.status)])},i(n.status),3)]),t("td",et,[t("div",st,[t("span",null,i(c(n.paid_at)),1),t("span",lt,"c: "+i(c(n.created_at)),1)])]),t("td",nt,[w(y,{to:{name:"ApplicationPaymentInvoice",params:{paymentId:n.id}},class:"inline-flex items-center rounded-lg border border-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50"},{default:N(()=>e[3]||(e[3]=[u(" View Invoice ")])),_:2},1032,["to"])])])}),128))])]),t("div",at,[t("div",ot,[e[5]||(e[5]=u(" Showing ")),t("span",it,i(r.rows.length),1),e[6]||(e[6]=u(" of ")),t("span",dt,i(((h=r.meta)==null?void 0:h.total)??0),1),e[7]||(e[7]=u(" results "))]),t("div",rt,[t("button",{class:"btn-ghost",disabled:!r.hasPrev,onClick:e[0]||(e[0]=n=>o.$emit("prev"))},"‹ Prev",8,ut),t("span",mt,[e[8]||(e[8]=u(" Page ")),t("span",pt,i(((P=r.meta)==null?void 0:P.current_page)??1),1),e[9]||(e[9]=u(" / ")),t("span",ft,i(((_=r.meta)==null?void 0:_.last_page)??1),1)]),t("button",{class:"btn-ghost",disabled:!r.hasNext,onClick:e[1]||(e[1]=n=>o.$emit("next"))},"Next ›",8,bt)])])])):(m(),p("div",z,"No payments found."))])}}},ct=D(xt,[["__scopeId","data-v-94c7fcf9"]]),vt={class:"p-4 sm:p-6"},gt={class:"mb-5 flex flex-wrap items-center justify-between gap-3"},yt={class:"flex items-center gap-2"},wt={class:"mb-5 rounded-2xl border border-slate-200 bg-white p-4"},ht={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4"},Pt={class:"md:col-span-2 lg:col-span-2"},_t={__name:"ApplicationPayments",setup(r){const s=M();async function f(){s.setPage(1),await s.fetchPayments()}async function c(){await s.nextPage()}async function v(){await s.prevPage()}function g(){s.resetFilters(),f()}return B(f),(o,e)=>{const y=I("RouterLink");return m(),p("div",vt,[t("header",gt,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-xl font-semibold text-slate-800"},"Application Payments"),t("p",{class:"text-sm text-slate-500"},"Search, filter and review payment records.")],-1)),t("div",yt,[w(y,{to:{name:"ApplicationPaymentCreate"},class:"btn-primary"},{default:N(()=>e[12]||(e[12]=[t("i",{class:"far fa-plus-circle mr-1"},null,-1),u(" New Payment ")])),_:1})])]),t("section",wt,[t("div",ht,[t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Exam",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).filters.exam_id=a),type:"number",placeholder:"Exam ID",class:"input"},null,512),[[b,l(s).filters.exam_id]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"Institute",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).filters.institute_id=a),type:"number",placeholder:"Institute ID",class:"input"},null,512),[[b,l(s).filters.institute_id]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"label"},"Zamat",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).filters.zamat_id=a),type:"number",placeholder:"Zamat ID",class:"input"},null,512),[[b,l(s).filters.zamat_id]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"Application",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).filters.application_id=a),type:"number",placeholder:"Application ID",class:"input"},null,512),[[b,l(s).filters.application_id]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"label"},"Status",-1)),d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).filters.status=a),class:"input"},e[18]||(e[18]=[t("option",{value:"all"},"All",-1),t("option",null,"Completed",-1),t("option",null,"Pending",-1),t("option",null,"Failed",-1),t("option",null,"Cancelled",-1)]),512),[[x,l(s).filters.status]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"label"},"Method",-1)),d(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>l(s).filters.method=a),class:"input"},e[20]||(e[20]=[t("option",{value:"all"},"All",-1),t("option",{value:"bkash"},"bKash",-1),t("option",{value:"Bank"},"Bank",-1),t("option",{value:"Cash Payment"},"Cash Payment",-1)]),512),[[x,l(s).filters.method]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"label"},"From",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>l(s).filters.date_from=a),type:"date",class:"input"},null,512),[[b,l(s).filters.date_from]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"label"},"To",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>l(s).filters.date_to=a),type:"date",class:"input"},null,512),[[b,l(s).filters.date_to]])]),t("div",Pt,[e[24]||(e[24]=t("label",{class:"label"},"Search",-1)),d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l(s).filters.q=a),type:"text",placeholder:"Search trx id / msisdn / institute...",class:"input",onKeyup:F(f,["enter"])},null,544),[[b,l(s).filters.q]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"label"},"Sort",-1)),d(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>l(s).filters.sort=a),class:"input"},e[25]||(e[25]=[t("option",{value:"paid_at"},"Paid At",-1),t("option",{value:"created_at"},"Created At",-1),t("option",{value:"amount"},"Amount",-1),t("option",{value:"id"},"ID",-1)]),512),[[x,l(s).filters.sort]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"label"},"Order",-1)),d(t("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>l(s).filters.order=a),class:"input"},e[27]||(e[27]=[t("option",{value:"desc"},"DESC",-1),t("option",{value:"asc"},"ASC",-1)]),512),[[x,l(s).filters.order]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"label"},"Per Page",-1)),d(t("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>l(s).filters.per_page=a),class:"input"},e[29]||(e[29]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1),t("option",{value:"all"},"All",-1)]),512),[[x,l(s).filters.per_page]])]),t("div",{class:"flex gap-4 items-end"},[t("button",{class:"btn-primary w-full",onClick:f},"Apply Filters"),t("button",{class:"btn-ghost",onClick:g},"Reset")])])]),w(ct,{rows:l(s).rows,meta:l(s).meta,"is-loading":l(s).isLoading,"has-next":l(s).hasNext,"has-prev":l(s).hasPrev,onReload:f,onNext:c,onPrev:v,onView:o.openDetails},null,8,["rows","meta","is-loading","has-next","has-prev","onView"])])}}},Ct=D(_t,[["__scopeId","data-v-81cb44fa"]]);export{Ct as default};
