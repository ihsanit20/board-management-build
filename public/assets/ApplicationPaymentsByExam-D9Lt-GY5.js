import{B as F,H as j,i as _,r as q,C as M,o as T,c as n,a as t,y as p,t as l,b as o,h as r,j as K,v as U,G as z,f as N,w as E,F as G,e as H,z as I,d as i,q as $,s as J}from"./index-DEpdMT1V.js";import{u as O}from"./application-payment-CpOmH0RO.js";const Q={class:"my-container p-4 sm:p-6"},W={class:"mb-5 flex flex-wrap items-center justify-between gap-3"},X={class:"flex justify-between"},Y={class:"text-sm text-slate-500"},Z={key:0,class:"ml-2"},tt={class:"flex items-center gap-2"},et={key:0,class:"far fa-spinner-third animate-spin mr-1"},st={key:0,class:"mb-3 rounded border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm"},at={key:1,class:"rounded border bg-white p-4"},nt={key:2,class:"rounded border bg-white p-6 text-center text-slate-500"},ot={key:3,class:"rounded border bg-white overflow-auto"},it={class:"min-w-full text-sm"},lt={class:"px-3 py-2 font-medium"},rt={class:"px-3 py-2"},dt={class:"px-3 py-2"},ut={class:"px-3 py-2"},ct={class:"px-3 py-2"},mt=["disabled","onClick"],ht={__name:"ApplicationPaymentsByExam",setup(pt){const B=$(),C=J(),y=O(),L=F(),{listByExam:d,loadingList:c,errorList:h}=j(y),u=_(()=>Number(B.params.examId)),x=q("");function S(a){return Number(a||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}async function m(){await y.fetchListByExam(u.value,{q:x.value||void 0})}function V(a){C.push({name:"ApplicationPaymentsExamInstituteShow",params:{examId:u.value,instituteId:a}})}M(u,()=>{Number.isNaN(u.value)||m()}),T(async()=>{await L.fetchExams(),await m()});const D=_(()=>{var a,e;return(((e=(a=d.value)==null?void 0:a.items)==null?void 0:e.length)??0)>0}),P=_(()=>{var a,e;return(((e=(a=d.value)==null?void 0:a.items)==null?void 0:e.length)??0)===0});return(a,e)=>{var f,b;const A=I("router-link"),R=I("RouterLink");return i(),n("div",Q,[t("header",W,[t("div",X,[t("div",null,[e[3]||(e[3]=t("h1",{class:"text-xl font-semibold"},"ইনস্টিটিউটভিত্তিক পেমেন্ট লিস্ট",-1)),t("p",Y,[p(" Exam ID: "+l(u.value)+" ",1),(b=(f=o(d))==null?void 0:f.exam)!=null&&b.name?(i(),n("span",Z,"— "+l(o(d).exam.name),1)):r("",!0)]),t("div",tt,[K(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),placeholder:"ইনস্টিটিউট নাম/কোড",class:"input-1",onKeyup:z(m,["enter"])},null,544),[[U,x.value,void 0,{trim:!0}]]),t("button",{class:"btn-3",onClick:m},[o(c)?(i(),n("i",et)):r("",!0),e[1]||(e[1]=p(" সার্চ "))])]),N(A,{to:{name:"ApplicationPayments"},class:"btn-link"},{default:E(()=>e[2]||(e[2]=[p(" সকল পেমেন্টের তথ্য ")])),_:1})])]),N(R,{to:{name:"ApplicationPaymentCreate"},class:"btn-2"},{default:E(()=>e[4]||(e[4]=[t("i",{class:"far fa-plus-circle mr-1"},null,-1),p(" New Payment ")])),_:1})]),o(h)?(i(),n("div",st,l(o(h)),1)):r("",!0),o(c)?(i(),n("div",at,"লোড হচ্ছে...")):r("",!0),!o(c)&&P.value?(i(),n("div",nt," কোনো তথ্য পাওয়া যায়নি। ")):r("",!0),!o(c)&&D.value?(i(),n("section",ot,[t("table",it,[e[5]||(e[5]=t("thead",null,[t("tr",{class:"bg-slate-50 text-left"},[t("th",{class:"px-3 py-2"},"মাদরাসা"),t("th",{class:"px-3 py-2"},"পেমেন্ট সংখ্যা"),t("th",{class:"px-3 py-2"},"মোট এমাউন্ট"),t("th",{class:"px-3 py-2"},"মোট শিক্ষার্থী"),t("th",{class:"px-3 py-2"})])],-1)),t("tbody",null,[(i(!0),n(G,null,H(o(d).items,s=>{var v,w,k;return i(),n("tr",{key:s.institute&&s.institute.id?s.institute.id:Math.random(),class:"border-t"},[t("td",lt,l(((v=s.institute)==null?void 0:v.institute_code)??"-")+"-"+l(((w=s.institute)==null?void 0:w.name)??"Unknown Institute"),1),t("td",rt,l(s.payments_count),1),t("td",dt,l(S(s.total_amount)),1),t("td",ut,l(s.total_students),1),t("td",ct,[t("button",{class:"btn-3",disabled:!((k=s.institute)!=null&&k.id),onClick:xt=>{var g;return V((g=s.institute)==null?void 0:g.id)},title:"View details"}," View ",8,mt)])])}),128))])])])):r("",!0)])}}};export{ht as default};
