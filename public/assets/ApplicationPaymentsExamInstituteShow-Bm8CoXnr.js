import{_ as N}from"./logo-name-CJ0dX4ea.js";import{i,o as k,c as l,a as t,t as e,h as p,F as I,e as B,l as C,d as n,n as F,q as E}from"./index-B7fQsvqV.js";import{u as L}from"./application-payment-fiaJrVDk.js";const P={class:"mx-auto max-w-5xl p-4 sm:p-6 print:p-0"},T={class:"mb-4 flex items-center justify-between print:hidden"},V={class:"text-sm text-slate-500"},j={key:0,class:"mb-3 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-red-700 text-sm"},$={key:1,class:"rounded-lg border bg-white p-4"},z={key:2,class:"rounded-2xl border bg-white shadow-sm print:shadow-none print:border-0"},A={class:"flex flex-col gap-4 border-b p-6 sm:flex-row sm:items-start sm:justify-between"},M={class:"grid w-full max-w-xs grid-cols-2 gap-x-3 gap-y-1 text-sm"},R={class:"font-medium"},X={class:"font-medium"},q={class:"grid gap-4 border-b p-6 sm:grid-cols-2"},O={class:"rounded-lg border border-slate-200 p-4"},G={class:"mt-1 text-base font-semibold"},H={class:"text-sm text-slate-600"},J={class:"text-sm text-slate-600"},K={class:"rounded-lg border border-slate-200 p-4"},Q={class:"mt-1 text-base font-semibold"},U={class:"text-sm text-slate-600"},W={class:"text-sm text-slate-600"},Y={class:"text-sm font-medium text-slate-800"},Z={class:"p-6"},tt={class:"overflow-hidden rounded-lg border"},st={class:"min-w-full border-collapse text-sm"},et={class:"px-3 py-2"},at={class:"px-3 py-2"},ot={class:"px-3 py-2"},dt={class:"px-3 py-2"},it={class:"px-3 py-2"},lt={class:"px-3 py-2"},nt={class:"px-3 py-2"},rt={class:"px-3 py-2 text-right font-medium"},ct={class:"border-t bg-slate-50"},mt={class:"px-3 py-2 text-right font-bold"},bt={__name:"ApplicationPaymentsExamInstituteShow",setup(ut){const v=E(),c=L(),m=i(()=>Number(v.params.examId)),u=i(()=>Number(v.params.instituteId)),f=i(()=>c.loadingShow),b=i(()=>c.errorShow),o=i(()=>c.showData);k(async()=>{await c.fetchShowByExamInstitute(m.value,u.value)});function x(d){return Number(d||0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2})}function y(d){if(!d)return"-";try{return new Date(String(d).replace(" ","T")).toLocaleString("bn-BD",{hour12:!0})}catch{return d}}function w(d){const s=(d==null?void 0:d.meta)||{};return Number(s.students??s.students_count??0)}const S=i(()=>{var r,_,g,h;const d=((_=(r=o.value)==null?void 0:r.exam)==null?void 0:_.id)??m.value,s=((h=(g=o.value)==null?void 0:g.institute)==null?void 0:h.id)??u.value,a=new Date().toISOString().slice(0,19).replace(/[-:T]/g,"");return`INV-EX${d}-IN${s}-${a}`});function D(){window.print()}return(d,s)=>(n(),l("div",P,[t("div",T,[t("div",null,[s[0]||(s[0]=t("h1",{class:"text-xl font-semibold"},"ইনভয়েস / রশিদ",-1)),t("p",V," পরীক্ষা আইডি: "+e(m.value)+" • প্রতিষ্ঠান আইডি: "+e(u.value),1)]),t("button",{class:"btn-2",onClick:D},"প্রিন্ট")]),b.value?(n(),l("div",j,e(b.value),1)):p("",!0),f.value?(n(),l("div",$,"লোড হচ্ছে...")):p("",!0),o.value?(n(),l("section",z,[t("header",A,[s[3]||(s[3]=t("div",{class:"space-y-1 p-4"},[t("img",{src:N,alt:"প্রতিষ্ঠানের লোগো"}),t("div",{class:"text-slate-700 text-center"},"পেমেন্ট ইনভয়েস")],-1)),t("div",M,[s[1]||(s[1]=t("div",{class:"text-slate-500"},"ইনভয়েস নং",-1)),t("div",R,e(S.value),1),s[2]||(s[2]=t("div",{class:"text-slate-500"},"প্রিন্টের সময়",-1)),t("div",X,e(new Date().toLocaleString("bn-BD",{hour12:!0})),1)])]),t("section",q,[t("div",O,[s[4]||(s[4]=t("div",{class:"text-xs tracking-wide text-slate-500"},"প্রতিষ্ঠান (বিল গ্রহীতা)",-1)),t("div",G,e(o.value.institute.name),1),t("div",H,"কোড: "+e(o.value.institute.institute_code||"-"),1),t("div",J,"ফোন: "+e(o.value.institute.phone||"-"),1)]),t("div",K,[s[5]||(s[5]=t("div",{class:"text-xs tracking-wide text-slate-500"},"পরীক্ষা",-1)),t("div",Q,e(o.value.exam.name),1),t("div",U,"মোট পেমেন্ট: "+e(o.value.summary.payments_count),1),t("div",W," মোট শিক্ষার্থী: "+e(o.value.summary.total_students),1),t("div",Y," মোট পরিমাণ: "+e(x(o.value.summary.total_amount))+" টাকা ",1)])]),t("section",Z,[s[8]||(s[8]=t("div",{class:"mb-3 text-sm text-slate-600"}," নিচে এই পরীক্ষায় উক্ত প্রতিষ্ঠানের সকল পেমেন্ট দেখানো হলো। ",-1)),t("div",tt,[t("table",st,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-slate-50 text-left text-slate-700"},[t("th",{class:"px-3 py-2 font-medium"},"আইডি"),t("th",{class:"px-3 py-2 font-medium"},"মারহালা"),t("th",{class:"px-3 py-2 font-medium"},"মাধ্যম"),t("th",{class:"px-3 py-2 font-medium"},"অবস্থা"),t("th",{class:"px-3 py-2 font-medium"},"TRX"),t("th",{class:"px-3 py-2 font-medium"},"পরিশোধের সময়"),t("th",{class:"px-3 py-2 font-medium"},"পরীক্ষার্থী"),t("th",{class:"px-3 py-2 text-right font-semibold"},"পরিমাণ")])],-1)),t("tbody",null,[(n(!0),l(I,null,B(o.value.payments,a=>{var r;return n(),l("tr",{key:a.id,class:"border-t"},[t("td",et,e(a.id),1),t("td",at,e(((r=a.zamat)==null?void 0:r.name)||"-"),1),t("td",ot,e(a.payment_method),1),t("td",dt,[t("span",{class:F(["inline-flex rounded-full border px-2 py-0.5 text-xs",{"border-emerald-300 bg-emerald-50 text-emerald-700":a.status==="Completed","border-amber-300 bg-amber-50 text-amber-700":a.status==="Pending","border-red-300 bg-red-50 text-red-700":a.status==="Failed","border-slate-300 bg-slate-50 text-slate-700":a.status==="Cancelled"}])},e(a.status),3)]),t("td",it,e(a.trx_id),1),t("td",lt,e(y(a.paid_at)),1),t("td",nt,e(w(a))+" জন",1),t("td",rt,e(x(a.amount)),1)])}),128))]),t("tfoot",null,[t("tr",ct,[s[6]||(s[6]=t("td",{colspan:"7",class:"px-3 py-2 text-right font-semibold"},"সর্বমোট",-1)),t("td",mt,e(x(o.value.summary.total_amount)),1)])])])])]),s[9]||(s[9]=C('<section class="flex flex-col gap-6 border-t p-6 sm:flex-row sm:items-end sm:justify-between"><div class="text-xs leading-relaxed text-slate-600"> • এই ইনভয়েসটি সিস্টেম-জেনারেটেড। প্রয়োজন হলে অফিসিয়াল সিল/স্বাক্ষরসহ কপি সংগ্রহ করুন।<br> • পেমেন্টের অবস্থা “Completed” হলে তবেই ‘Paid’ হিসেবে গণ্য হবে। </div><div class="grid grid-cols-3 gap-6 print:gap-10"><div class="w-40 text-center"><div class="mb-2 h-px bg-slate-300"></div><div class="text-xs text-slate-600">প্রস্তুতকারক</div></div><div class="w-40 text-center"><div class="mb-2 h-px bg-slate-300"></div><div class="text-xs text-slate-600">অনুমোদনকারী</div></div><div class="w-40 text-center"><div class="mb-2 h-px bg-slate-300"></div><div class="text-xs text-slate-600">গ্রহণকারী</div></div></div></section>',1))])):p("",!0)]))}};export{bt as default};
