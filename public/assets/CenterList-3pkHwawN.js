import{u as D}from"./center-SeV0Jjpj.js";import{r as k,C as N,o as I,d as l,c as o,a as t,p as q,j as C,D as h,F as b,e as _,t as m,b as M,y as S,h as y,O as Z,k as V,L as B}from"./index-BXAMF6o-.js";import{u as E}from"./institute-DxQAmFCI.js";import{u as G}from"./zamat-BaUOEr0I.js";import{u as L}from"./group-1TEJpn6S.js";const O={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},F={class:"card-bg md:p-8 p-4 md:w-1/2"},T={class:"mb-4"},H=["value"],J={class:"mb-4"},K=["value"],P={key:0},Q={class:"mb-4"},R={class:"grid gap-4"},W=["onUpdate:modelValue"],X=["value"],Y=["onClick"],tt={class:"flex justify-center gap-4"},et={__name:"AddCenterModal",emits:["close","saved"],setup($,{emit:v}){const p=v,d=k({institute_ids:[],zamat_id:null,group_id:null,gender:null});N(()=>d.value.zamat_id,async()=>{await u.fetchGroups(d.value.zamat_id)});const r=D(),f=E(),x=G(),u=L();I(async()=>{await x.fetchZamats(),await f.fetchInstitutes({per_page:"all",is_center:1})});const g=async()=>{await r.createCenter(d.value),p("saved"),p("close")};return(w,s)=>(l(),o("div",O,[t("div",F,[s[16]||(s[16]=t("h2",{class:"text-xl font-bold mb-4"},"মারকায যুক্ত করুন",-1)),t("form",{onSubmit:q(g,["prevent"])},[t("div",T,[s[6]||(s[6]=t("label",{class:"block mb-2"},"মারহালা",-1)),C(t("select",{"onUpdate:modelValue":s[0]||(s[0]=n=>d.value.zamat_id=n),class:"w-full p-2 border rounded",required:""},[s[5]||(s[5]=t("option",{disabled:"",value:""},"Select Zamat",-1)),(l(!0),o(b,null,_(M(x).zamats,n=>(l(),o("option",{key:n.id,value:n.id},m(n.name),9,H))),128))],512),[[h,d.value.zamat_id]])]),t("div",J,[s[9]||(s[9]=t("label",{class:"block mb-2"},"গ্রুপ",-1)),C(t("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>d.value.group_id=n),class:"w-full p-2 border rounded"},[s[8]||(s[8]=t("option",{disabled:"",value:""},"Select Group",-1)),(l(!0),o(b,null,_(M(u).groups,n=>(l(),o("option",{key:n.id,value:n.id},[S(m(n.name)+" (",1),(l(!0),o(b,null,_(n.areas,(c,i)=>(l(),o(b,{key:c.id},[i?(l(),o("span",P,", ")):y("",!0),t("span",null,m(c.name),1)],64))),128)),s[7]||(s[7]=S(") "))],8,K))),128))],512),[[h,d.value.group_id]])]),t("div",Q,[s[11]||(s[11]=t("label",{class:"block mb-2"},"ইনস্টিটিউট",-1)),t("div",R,[(l(!0),o(b,null,_(d.value.institute_ids.length,n=>(l(),o("div",{key:n,class:"flex items-center gap-4"},[C(t("select",{"onUpdate:modelValue":c=>d.value.institute_ids[n-1]=c,class:"w-full p-2 border rounded",required:""},[s[10]||(s[10]=t("option",{disabled:"",value:""},"Select Institute",-1)),(l(!0),o(b,null,_(M(f).institutes,c=>(l(),o("option",{key:c.id,value:c.id},m(c.institute_code)+" - "+m(c.name),9,X))),128))],8,W),[[h,d.value.institute_ids[n-1]]]),t("i",{onClick:c=>d.value.institute_ids.splice(n-1,1),class:"fas fa-trash cursor-pointer text-red-600"},null,8,Y)]))),128)),t("i",{onClick:s[2]||(s[2]=n=>d.value.institute_ids.push("")),class:"fas fa-plus-circle cursor-pointer text-sky-600"})])]),y("",!0),s[15]||(s[15]=t("hr",{class:"my-6"},null,-1)),t("div",tt,[s[14]||(s[14]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),t("button",{type:"button",onClick:s[4]||(s[4]=n=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},st={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},lt={class:"card-bg md:p-8 p-4 md:w-1/2"},ot={class:"mb-4"},nt=["value"],it={class:"mb-4"},at=["value"],dt={class:"mb-4"},rt=["value"],ut={key:0},pt={class:"flex justify-center gap-4"},ct={__name:"EditCenterModal",props:{center:Object},emits:["close","updated"],setup($,{emit:v}){const p=v,d=$,r=Z({institute_id:null,zamat_id:null,group_id:null,gender:"male"}),f=D(),x=E(),u=G(),g=L(),w=k([]),s=k([]),n=k([]);N(()=>d.center,i=>{r.institute_id=i.institute_id||null,r.zamat_id=i.zamat_id||null,r.group_id=i.group_id||null,r.gender=i.gender||null},{immediate:!0}),I(async()=>{await x.fetchInstitutes({per_page:"all",is_center:1}),await u.fetchZamats(),await g.fetchGroups(),w.value=x.institutes,s.value=u.zamats,n.value=g.groups});const c=async()=>{await f.updateCenter(d.center.id,r),p("updated"),p("close")};return(i,e)=>(l(),o("div",st,[t("div",lt,[e[15]||(e[15]=t("h2",{class:"text-xl font-bold mb-4"},"মারকায সম্পাদনা",-1)),t("form",{onSubmit:q(c,["prevent"])},[t("div",ot,[e[6]||(e[6]=t("label",{class:"block mb-2"},"ইনস্টিটিউট",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.institute_id=a),class:"w-full p-2 border rounded",required:""},[e[5]||(e[5]=t("option",{disabled:"",value:""},"Select Institute",-1)),(l(!0),o(b,null,_(w.value,a=>(l(),o("option",{key:a.id,value:a.id},m(a.name),9,nt))),128))],512),[[h,r.institute_id]])]),t("div",it,[e[8]||(e[8]=t("label",{class:"block mb-2"},"মারহালা",-1)),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.zamat_id=a),class:"w-full p-2 border rounded",required:""},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Select Zamat",-1)),(l(!0),o(b,null,_(s.value,a=>(l(),o("option",{key:a.id,value:a.id},m(a.name),9,at))),128))],512),[[h,r.zamat_id]])]),t("div",dt,[e[11]||(e[11]=t("label",{class:"block mb-2"},"গ্রুপ",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.group_id=a),class:"w-full p-2 border rounded"},[e[10]||(e[10]=t("option",{disabled:"",value:""},"Select Group",-1)),(l(!0),o(b,null,_(n.value.filter(a=>parseInt(a.zamat_id)===parseInt(r.zamat_id)),a=>(l(),o("option",{key:a.id,value:a.id},[S(m(a.name)+" (",1),(l(!0),o(b,null,_(a.areas,(z,j)=>(l(),o(b,{key:z.id},[j?(l(),o("span",ut,", ")):y("",!0),t("span",null,m(z.name),1)],64))),128)),e[9]||(e[9]=S(") "))],8,rt))),128))],512),[[h,r.group_id]])]),y("",!0),t("div",pt,[e[14]||(e[14]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),t("button",{type:"button",onClick:e[4]||(e[4]=a=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},mt={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},bt={class:"card-bg p-4 md:p-8"},vt={class:"flex justify-end mt-4"},ft={__name:"DeleteCenterModal",props:{center:{type:Object,required:!0}},emits:["close","deleted"],setup($,{emit:v}){const p=v,d=$,r=D(),f=async()=>{await r.deleteCenter(d.center.id),p("deleted"),p("close")};return(x,u)=>{var g,w;return l(),o("div",mt,[t("div",bt,[u[3]||(u[3]=t("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মারহালা",-1)),t("p",null,[u[1]||(u[1]=S("আপনি কি (")),t("b",null,m((w=(g=$.center)==null?void 0:g.institute)==null?void 0:w.name),1),u[2]||(u[2]=S(") ডিলিট করতে চান?"))]),t("div",vt,[t("button",{onClick:u[0]||(u[0]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),t("button",{onClick:f,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])])}}},yt={class:"my-container space-y-2"},_t={key:1,class:"overflow-x-auto"},xt={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},gt={class:"bg-gray-200 text-gray-700 text-sm leading-normal"},kt={class:"text-gray-600 text-sm font-light"},wt={class:"py-3 px-2 text-left whitespace-nowrap"},$t={class:"flex items-center"},Ct={class:"mr-2"},ht={class:"font-medium"},St={class:"py-3 px-2 text-left"},zt={class:"title-md"},Mt={class:"py-3 px-2 text-left"},jt={class:"title-md"},Vt={class:"py-3 px-2 text-left"},Dt={class:"title-md"},It={class:"py-3 px-2 text-center print:hidden"},Ut={class:"flex item-center justify-center gap-4"},At=["onClick"],Nt={key:1},Ot={__name:"CenterList",setup($){const v=D(),p=k(!1),d=k(!1),r=k(!1),f=k(null),x=k(!0),u=()=>p.value=!0,g=async()=>{p.value=!1,await v.fetchCenters()},w=c=>{f.value=c,d.value=!0},s=async()=>{d.value=!1,await v.fetchCenters()},n=()=>r.value=!1;return I(async()=>{try{await v.fetchCenters()}finally{x.value=!1}}),(c,i)=>(l(),o("div",yt,[t("div",{class:"flex justify-between items-center"},[i[0]||(i[0]=t("h1",{class:"title-lg"},"মারকায তালিকা",-1)),t("button",{class:"btn-2",onClick:u},"নতুন যুক্ত করুন")]),x.value?(l(),V(B,{key:0})):(l(),o("div",_t,[t("table",xt,[t("thead",null,[t("tr",gt,[i[1]||(i[1]=t("th",{class:"py-3 px-2 text-left"},"#",-1)),i[2]||(i[2]=t("th",{class:"py-3 px-2 text-left"},"মারহালা",-1)),i[3]||(i[3]=t("th",{class:"py-3 px-2 text-left"},"গ্রুপ",-1)),i[4]||(i[4]=t("th",{class:"py-3 px-2 text-left"},"মারকাযের নাম",-1)),i[5]||(i[5]=t("th",{class:"py-3 px-2 text-center print:hidden"},"একশন",-1)),y("",!0)])]),t("tbody",kt,[M(v).centers.length?(l(!0),o(b,{key:0},_(M(v).centers,(e,a)=>{var z,j,U,A;return l(),o("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100"},[t("td",wt,[t("div",$t,[t("div",Ct,[t("p",ht,m(a+1),1)])])]),t("td",St,[t("p",zt,m((z=e==null?void 0:e.zamat)==null?void 0:z.name),1)]),t("td",Mt,[t("p",jt,m(((j=e==null?void 0:e.group)==null?void 0:j.name)||"N/A"),1)]),t("td",Vt,[t("p",Dt,m((U=e.institute)==null?void 0:U.institute_code)+" - "+m(((A=e.institute)==null?void 0:A.name)||"N/A"),1)]),y("",!0),t("td",It,[t("div",Ut,[t("button",{onClick:qt=>w(e),class:"text-blue-600 hover:text-blue-800"},i[6]||(i[6]=[t("i",{class:"fas fa-edit"},null,-1)]),8,At),y("",!0)])])])}),128)):(l(),o("tr",Nt,i[8]||(i[8]=[t("td",{colspan:"5",class:"text-center text-red-500 py-4"},"No centers found",-1)])))])])])),p.value?(l(),V(et,{key:2,class:"z-40",onClose:g})):y("",!0),d.value?(l(),V(ct,{key:3,class:"z-40",center:f.value,onClose:s},null,8,["center"])):y("",!0),r.value?(l(),V(ft,{key:4,class:"z-40",center:f.value,onClose:n},null,8,["center"])):y("",!0)]))}};export{Ot as default};
