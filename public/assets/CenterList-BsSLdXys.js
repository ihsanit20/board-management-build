import{u as M}from"./center-BDwyEMTM.js";import{r as g,z as q,h as V,o as l,c as n,a as t,l as E,m as C,A as h,F as f,b as k,t as m,i as S,y as z,f as x,M as B,N as j}from"./index-MlIbSbKR.js";import{u as G}from"./institute-BDQGJ1k1.js";import{u as I}from"./zamat-B1NWVKr8.js";import{u as Z}from"./group-B5JAKGt7.js";const L={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},F={class:"card-bg md:p-8 p-4 md:w-1/2"},O={class:"mb-4"},T=["value"],H={class:"mb-4"},J=["value"],K={key:0},P={class:"mb-4"},Q={class:"grid gap-4"},R=["onUpdate:modelValue"],W=["value"],X=["onClick"],Y={class:"flex justify-center gap-4"},tt={__name:"AddCenterModal",emits:["close","saved"],setup($,{emit:b}){const p=b,a=g({institute_ids:[],zamat_id:null,group_id:null,gender:null});q(()=>a.value.zamat_id,async()=>{await u.fetchGroups(a.value.zamat_id)});const r=M(),v=G(),y=I(),u=Z();V(async()=>{await y.fetchZamats(),await v.fetchInstitutes({per_page:"all",is_center:1})});const _=async()=>{await r.createCenter(a.value),p("saved"),p("close")};return(w,s)=>(l(),n("div",L,[t("div",F,[s[16]||(s[16]=t("h2",{class:"text-xl font-bold mb-4"},"মারকাজ যুক্ত করুন",-1)),t("form",{onSubmit:E(_,["prevent"])},[t("div",O,[s[6]||(s[6]=t("label",{class:"block mb-2"},"মারহালা",-1)),C(t("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>a.value.zamat_id=i),class:"w-full p-2 border rounded",required:""},[s[5]||(s[5]=t("option",{disabled:"",value:""},"Select Zamat",-1)),(l(!0),n(f,null,k(S(y).zamats,i=>(l(),n("option",{key:i.id,value:i.id},m(i.name),9,T))),128))],512),[[h,a.value.zamat_id]])]),t("div",H,[s[9]||(s[9]=t("label",{class:"block mb-2"},"গ্রুপ",-1)),C(t("select",{"onUpdate:modelValue":s[1]||(s[1]=i=>a.value.group_id=i),class:"w-full p-2 border rounded"},[s[8]||(s[8]=t("option",{disabled:"",value:""},"Select Group",-1)),(l(!0),n(f,null,k(S(u).groups,i=>(l(),n("option",{key:i.id,value:i.id},[z(m(i.name)+" (",1),(l(!0),n(f,null,k(i.areas,(c,o)=>(l(),n(f,{key:c.id},[o?(l(),n("span",K,", ")):x("",!0),t("span",null,m(c.name),1)],64))),128)),s[7]||(s[7]=z(") "))],8,J))),128))],512),[[h,a.value.group_id]])]),t("div",P,[s[11]||(s[11]=t("label",{class:"block mb-2"},"ইনস্টিটিউট",-1)),t("div",Q,[(l(!0),n(f,null,k(a.value.institute_ids.length,i=>(l(),n("div",{key:i,class:"flex items-center gap-4"},[C(t("select",{"onUpdate:modelValue":c=>a.value.institute_ids[i-1]=c,class:"w-full p-2 border rounded",required:""},[s[10]||(s[10]=t("option",{disabled:"",value:""},"Select Institute",-1)),(l(!0),n(f,null,k(S(v).institutes,c=>(l(),n("option",{key:c.id,value:c.id},m(c.institute_code)+" - "+m(c.name),9,W))),128))],8,R),[[h,a.value.institute_ids[i-1]]]),t("i",{onClick:c=>a.value.institute_ids.splice(i-1,1),class:"fas fa-trash cursor-pointer text-red-600"},null,8,X)]))),128)),t("i",{onClick:s[2]||(s[2]=i=>a.value.institute_ids.push("")),class:"fas fa-plus-circle cursor-pointer text-sky-600"})])]),x("",!0),s[15]||(s[15]=t("hr",{class:"my-6"},null,-1)),t("div",Y,[s[14]||(s[14]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),t("button",{type:"button",onClick:s[4]||(s[4]=i=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},et={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},st={class:"card-bg md:p-8 p-4 md:w-1/2"},lt={class:"mb-4"},ot=["value"],nt={class:"mb-4"},it=["value"],at={class:"mb-4"},dt=["value"],rt={class:"flex justify-center gap-4"},ut={__name:"EditCenterModal",props:{center:Object},emits:["close","updated"],setup($,{emit:b}){const p=b,a=$,r=B({institute_id:null,zamat_id:null,group_id:null,gender:"male"}),v=M(),y=G(),u=I(),_=Z(),w=g([]),s=g([]),i=g([]);q(()=>a.center,o=>{r.institute_id=o.institute_id||null,r.zamat_id=o.zamat_id||null,r.group_id=o.group_id||null,r.gender=o.gender||null},{immediate:!0}),V(async()=>{await y.fetchInstitutes(),await u.fetchZamats(),await _.fetchGroups(),w.value=y.institutes,s.value=u.zamats,i.value=_.groups});const c=async()=>{await v.updateCenter(a.center.id,r),p("updated"),p("close")};return(o,e)=>(l(),n("div",et,[t("div",st,[e[14]||(e[14]=t("h2",{class:"text-xl font-bold mb-4"},"মারকাজ সম্পাদনা",-1)),t("form",{onSubmit:E(c,["prevent"])},[t("div",lt,[e[6]||(e[6]=t("label",{class:"block mb-2"},"ইনস্টিটিউট",-1)),C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=d=>r.institute_id=d),class:"w-full p-2 border rounded",required:""},[e[5]||(e[5]=t("option",{disabled:"",value:""},"Select Institute",-1)),(l(!0),n(f,null,k(w.value,d=>(l(),n("option",{key:d.id,value:d.id},m(d.name),9,ot))),128))],512),[[h,r.institute_id]])]),t("div",nt,[e[8]||(e[8]=t("label",{class:"block mb-2"},"মারহালা",-1)),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>r.zamat_id=d),class:"w-full p-2 border rounded",required:""},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Select Zamat",-1)),(l(!0),n(f,null,k(s.value,d=>(l(),n("option",{key:d.id,value:d.id},m(d.name),9,it))),128))],512),[[h,r.zamat_id]])]),t("div",at,[e[10]||(e[10]=t("label",{class:"block mb-2"},"গ্রুপ",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=d=>r.group_id=d),class:"w-full p-2 border rounded"},[e[9]||(e[9]=t("option",{disabled:"",value:""},"Select Group",-1)),(l(!0),n(f,null,k(i.value,d=>(l(),n("option",{key:d.id,value:d.id},m(d.name),9,dt))),128))],512),[[h,r.group_id]])]),x("",!0),t("div",rt,[e[13]||(e[13]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),t("button",{type:"button",onClick:e[4]||(e[4]=d=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},pt={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ct={class:"card-bg p-4 md:p-8"},mt={class:"flex justify-end mt-4"},bt={__name:"DeleteCenterModal",props:{center:{type:Object,required:!0}},emits:["close","deleted"],setup($,{emit:b}){const p=b,a=$,r=M(),v=async()=>{await r.deleteCenter(a.center.id),p("deleted"),p("close")};return(y,u)=>{var _,w;return l(),n("div",pt,[t("div",ct,[u[3]||(u[3]=t("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মারহালা",-1)),t("p",null,[u[1]||(u[1]=z("আপনি কি (")),t("b",null,m((w=(_=$.center)==null?void 0:_.institute)==null?void 0:w.name),1),u[2]||(u[2]=z(") ডিলিট করতে চান?"))]),t("div",mt,[t("button",{onClick:u[0]||(u[0]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),t("button",{onClick:v,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])])}}},vt={class:"my-container space-y-2"},ft={key:0,class:"flex justify-center items-center"},yt={key:1,class:"overflow-x-auto"},_t={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},xt={class:"bg-gray-200 text-gray-700 text-sm leading-normal"},gt={class:"text-gray-600 text-sm font-light"},kt={class:"py-3 px-2 text-left whitespace-nowrap"},wt={class:"flex items-center"},$t={class:"mr-2"},Ct={class:"font-medium"},ht={class:"py-3 px-2 text-left"},St={class:"title-md"},zt={class:"py-3 px-2 text-left"},Mt={class:"title-md"},jt={class:"py-3 px-2 text-left"},Vt={class:"title-md"},At={class:"py-3 px-2 text-center print:hidden"},Nt={class:"flex item-center justify-center gap-4"},Ut=["onClick"],Dt={key:1},Lt={__name:"CenterList",setup($){const b=M(),p=g(!1),a=g(!1),r=g(!1),v=g(null),y=g(!0),u=()=>p.value=!0,_=async()=>{p.value=!1,await b.fetchCenters()},w=c=>{v.value=c,a.value=!0},s=async()=>{a.value=!1,await b.fetchCenters()},i=()=>r.value=!1;return V(async()=>{try{await b.fetchCenters()}finally{y.value=!1}}),(c,o)=>(l(),n("div",vt,[t("div",{class:"flex justify-between items-center"},[o[0]||(o[0]=t("h1",{class:"title-lg"},"মারকাজ তালিকা",-1)),t("button",{class:"btn-2",onClick:u},"নতুন যুক্ত করুন")]),y.value?(l(),n("div",ft,o[1]||(o[1]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):(l(),n("div",yt,[t("table",_t,[t("thead",null,[t("tr",xt,[o[2]||(o[2]=t("th",{class:"py-3 px-2 text-left"},"#",-1)),o[3]||(o[3]=t("th",{class:"py-3 px-2 text-left"},"মারহালা",-1)),o[4]||(o[4]=t("th",{class:"py-3 px-2 text-left"},"গ্রুপ",-1)),o[5]||(o[5]=t("th",{class:"py-3 px-2 text-left"},"মারকাজের নাম",-1)),o[6]||(o[6]=t("th",{class:"py-3 px-2 text-center print:hidden"},"একশন",-1)),x("",!0)])]),t("tbody",gt,[S(b).centers.length?(l(!0),n(f,{key:0},k(S(b).centers,(e,d)=>{var A,N,U,D;return l(),n("tr",{key:e.id,class:"border-b border-gray-200 hover:bg-gray-100"},[t("td",kt,[t("div",wt,[t("div",$t,[t("p",Ct,m(d+1),1)])])]),t("td",ht,[t("p",St,m((A=e==null?void 0:e.zamat)==null?void 0:A.name),1)]),t("td",zt,[t("p",Mt,m(((N=e==null?void 0:e.group)==null?void 0:N.name)||"N/A"),1)]),t("td",jt,[t("p",Vt,m((U=e.institute)==null?void 0:U.institute_code)+" - "+m(((D=e.institute)==null?void 0:D.name)||"N/A"),1)]),x("",!0),t("td",At,[t("div",Nt,[t("button",{onClick:qt=>w(e),class:"text-blue-600 hover:text-blue-800"},o[7]||(o[7]=[t("i",{class:"fas fa-edit"},null,-1)]),8,Ut),x("",!0)])])])}),128)):(l(),n("tr",Dt,o[9]||(o[9]=[t("td",{colspan:"5",class:"text-center text-red-500 py-4"},"No centers found",-1)])))])])])),p.value?(l(),j(tt,{key:2,class:"z-40",onClose:_})):x("",!0),a.value?(l(),j(ut,{key:3,class:"z-40",center:v.value,onClose:s},null,8,["center"])):x("",!0),r.value?(l(),j(bt,{key:4,class:"z-40",center:v.value,onClose:i},null,8,["center"])):x("",!0)]))}};export{Lt as default};
