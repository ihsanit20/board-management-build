import{B,r as g,i as p,o as N,C as D,c as l,a as t,k as r,t as o,j as I,D as V,F as v,e as h,b as x,m as z,d as n,h as F,L}from"./index-hvT126dx.js";import{u as T}from"./application-BdJeIiS-.js";import{u as j}from"./zamat-H2xY0ueG.js";const A={class:"my-container px-4 print:px-0"},G={class:"print:hidden mb-4"},M={class:"text-sm text-gray-500"},P={class:"card-bg p-4 grid gap-3 md:grid-cols-4 print:hidden"},U={class:"md:col-span-1"},W=["value"],q={class:"flex gap-2 items-end md:col-span-3"},H=["disabled"],J=["disabled"],K=["disabled"],O={key:1,class:"grid gap-3 mt-4"},Q={class:"grid grid-cols-3 gap-3"},R={class:"card-bg p-3 text-center"},X={class:"text-2xl font-semibold"},Y={class:"card-bg p-3 text-center"},$={class:"text-2xl font-semibold"},tt={class:"card-bg p-3 text-center"},st={class:"text-base font-semibold truncate"},et={class:"flex items-center justify-between px-4 py-3 border-b"},at={class:"flex flex-col"},ot={class:"text-lg font-semibold"},nt={key:0,class:"text-gray-500 text-sm font-normal"},lt={class:"text-sm text-gray-500"},dt={class:"text-right"},it={class:"inline-flex items-center rounded-full px-3 py-1 text-sm bg-green-100 text-green-700"},rt={class:"ml-1"},ct={class:"p-4 overflow-x-auto"},ut={class:"table-auto w-full text-left border-collapse print:border-none"},mt={class:"border px-2 py-1"},pt={class:"border px-2 py-1 text-right font-medium"},xt={class:"bg-gray-50 font-semibold"},_t={class:"border px-2 py-1 text-right"},bt={class:"bg-white rounded-xl shadow p-4 print:shadow-none"},ft={class:"flex items-center justify-between"},gt={class:"text-right text-xl font-bold"},vt={key:2,class:"text-center text-gray-500 py-8"},St={__name:"CenterWiseApplicationCount",setup(ht){const d=T(),i=B(),k=j(),c=g(""),_=g(""),b=g(""),m=p(()=>d.centerZamatSummary||[]),y=p(()=>d.centerZamatGrandTotal||0),S=p(()=>m.value.length),w=p(()=>{var e;return((e=i==null?void 0:i.exam)==null?void 0:e.name)||"—"});N(async()=>{await Promise.all([i.fetchExams(),k.fetchZamats()]);const e=await i.fetchLastExam();e!=null&&e.id&&(c.value=e.id,await i.fetchExam(e.id))}),D(c,async e=>{e&&await i.fetchExam(e)});const C=async()=>{const e={};c.value&&(e.exam_id=c.value),_.value&&(e.center_id=_.value),b.value&&(e.zamat_id=b.value),await d.fetchCenterZamatStudents(e)},E=()=>{_.value="",b.value="",d.centerZamatSummary=[],d.centerZamatGrandTotal=0},Z=()=>window.print(),u=e=>{try{return new Intl.NumberFormat("bn-BD").format(Number(e||0))}catch{return String(e??0)}};return(e,s)=>(n(),l("div",A,[t("div",G,[s[2]||(s[2]=t("h1",{class:"title-lg"},"মারকায ভিত্তিক নিবন্ধিত শিক্ষার্থী সংখ্যা (মারহালা অনুযায়ী)",-1)),t("p",M,[s[1]||(s[1]=r(" নির্বাচিত পরীক্ষা: ")),t("b",null,o(w.value),1)])]),t("div",P,[t("div",U,[s[4]||(s[4]=t("label",{class:"block text-sm mb-1"},"পরীক্ষা",-1)),I(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),class:"input-1 w-full text-black px-2 py-1"},[s[3]||(s[3]=t("option",{value:"",disabled:""},"- পরীক্ষা নির্বাচন করুন -",-1)),(n(!0),l(v,null,h(x(i).exams,a=>(n(),l("option",{key:a.id,value:a.id},o(a.name),9,W))),128))],512),[[V,c.value]])]),t("div",q,[t("button",{class:"btn-2",disabled:x(d).loading,onClick:C},s[5]||(s[5]=[t("i",{class:"fas fa-database pr-1"},null,-1),r(" ডাটা লোড করুন ")]),8,H),t("button",{class:"btn-2",disabled:x(d).loading,onClick:E},s[6]||(s[6]=[t("i",{class:"fas fa-undo pr-1"},null,-1),r(" ক্লিয়ার ")]),8,J),t("button",{class:"btn-2",disabled:!m.value.length,onClick:Z},s[7]||(s[7]=[t("i",{class:"fas fa-print pr-1"},null,-1),r(" প্রিন্ট ")]),8,K)])]),x(d).loading?(n(),z(L,{key:0})):m.value.length?(n(),l("div",O,[t("div",Q,[t("div",R,[s[8]||(s[8]=t("p",{class:"text-xs text-gray-500"},"মোট সেন্টার",-1)),t("p",X,o(u(S.value)),1)]),t("div",Y,[s[9]||(s[9]=t("p",{class:"text-xs text-gray-500"},"মোট শিক্ষার্থী",-1)),t("p",$,o(u(y.value)),1)]),t("div",tt,[s[10]||(s[10]=t("p",{class:"text-xs text-gray-500"},"নির্বাচিত পরীক্ষা",-1)),t("p",st,o(w.value),1)])]),(n(!0),l(v,null,h(m.value,a=>(n(),l("div",{key:a.center_id,class:"bg-white rounded-xl shadow card-border print:shadow-none"},[t("div",et,[t("div",at,[t("h2",ot,[r(o(a.center_name)+" ",1),a.center_code?(n(),l("span",nt," ("+o(a.center_code)+") ",1)):F("",!0)]),t("span",lt,"Center ID: "+o(a.center_id),1)]),t("div",dt,[t("span",it,[s[11]||(s[11]=r(" মোট শিক্ষার্থী: ")),t("b",rt,o(u(a.total_students)),1)])])]),t("div",ct,[t("table",ut,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-gray-100"},[t("th",{class:"border px-2 py-1"},"মারহালা"),t("th",{class:"border px-2 py-1 text-right"},"শিক্ষার্থী")])],-1)),t("tbody",null,[(n(!0),l(v,null,h(a.zamats,f=>(n(),l("tr",{key:f.zamat_id},[t("td",mt,o(f.zamat_name),1),t("td",pt,o(u(f.students)),1)]))),128))]),t("tfoot",null,[t("tr",xt,[s[12]||(s[12]=t("td",{class:"border px-2 py-1 text-right"},"মোট",-1)),t("td",_t,o(u(a.total_students)),1)])])])])]))),128)),t("div",bt,[t("div",ft,[s[14]||(s[14]=t("h3",{class:"text-lg font-semibold"},"গ্র্যান্ড টোটাল",-1)),t("div",gt,o(u(y.value)),1)])])])):(n(),l("div",vt,s[15]||(s[15]=[r(" কোনো ডাটা পাওয়া যায়নি। উপর থেকে ফিল্টার দিয়ে "),t("b",null,"ডাটা লোড করুন",-1),r(" বাটনে ক্লিক করুন। ")])))]))}};export{St as default};
