import{_ as H}from"./logo-name-CJ0dX4ea.js";import{_ as J,r as w,i as a,o as K,c as i,m as O,t as o,a as s,k as d,h as S,F as P,e as Q,q as W,d as p,L as Y}from"./index-CBPYhcDR.js";import{u as Z}from"./collect-fee-Bz7pXWb8.js";const $={class:"my-container space-y-4 max-w-4xl px-4 py-6 print:p-0"},tt={key:1,class:"text-red-600 font-semibold"},et={key:2,class:"max-w-4xl mx-auto bg-white p-6 shadow print:shadow-none print:p-0"},st={class:"flex flex-col md:flex-row items-start justify-between gap-4 border-b pb-4"},nt={key:0,class:"text-xs text-gray-500 mt-1"},lt={class:"grid md:grid-cols-2 gap-4 mt-6"},ot={class:"space-y-1"},at={class:"space-y-1 md:text-right"},rt={class:"grid md:grid-cols-3 gap-4 mt-4"},ut={class:"card-bg p-3"},dt={class:"text-xl font-semibold"},mt={class:"card-bg p-3"},pt={class:"text-xl font-semibold"},ct={class:"card-bg p-3"},it={class:"text-xl font-semibold"},vt={class:"mt-6"},xt={class:"w-full border-collapse border border-gray-300 text-sm"},gt={class:"border px-2 py-1 text-center"},_t={class:"border px-2 py-1"},bt={class:"border px-2 py-1 text-center"},yt={class:"border px-2 py-1 text-right"},ft={class:"border px-2 py-1 text-right"},ht={class:"border px-2 py-1 text-right"},wt={class:"border px-2 py-1 text-right font-semibold"},kt={key:0},Ct={__name:"CollectFeeReceipt",setup(Dt){const V=W(),b=Z(),y=w(!0),_=w(null),c=e=>Number(e??0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),k=e=>Number(e??0).toLocaleString("bn-BD"),z=e=>e?new Date(e).toLocaleString("bn-BD",{hour12:!0}):"—",u=a(()=>{var t;const e=b.receipt;return e?((t=e==null?void 0:e.data)==null?void 0:t.data)??(e==null?void 0:e.data)??e:null}),f=w(null),r=a(()=>{var e,t,l;return((e=u.value)==null?void 0:e.payment)??((l=(t=f.value)==null?void 0:t.data)==null?void 0:l.payment)??null}),h=a(()=>{var e,t;return((e=u.value)==null?void 0:e.institute)??((t=r.value)==null?void 0:t.institute)??null}),A=a(()=>{var e,t;return((e=u.value)==null?void 0:e.exam)??((t=r.value)==null?void 0:t.exam)??null}),I=a(()=>{var e,t;return((e=u.value)==null?void 0:e.zamat)??((t=r.value)==null?void 0:t.zamat)??null}),j=a(()=>{var e,t,l;return((e=r.value)==null?void 0:e.students_count)??((l=(t=u.value)==null?void 0:t.amounts)==null?void 0:l.students_count)??0}),C=a(()=>{var e,t,l;return((e=r.value)==null?void 0:e.gross_amount)??((l=(t=u.value)==null?void 0:t.amounts)==null?void 0:l.gross)??0}),D=a(()=>{var e,t,l;return((e=r.value)==null?void 0:e.service_charge)??((l=(t=u.value)==null?void 0:t.amounts)==null?void 0:l.service_charge)??0}),T=a(()=>{var e,t,l;return((e=r.value)==null?void 0:e.net_amount)!=null?r.value.net_amount:((l=(t=u.value)==null?void 0:t.amounts)==null?void 0:l.net)!=null?u.value.amounts.net:(C.value??0)-(D.value??0)}),F=a(()=>{var t,l,v;return(((t=u.value)==null?void 0:t.items)??((v=(l=f.value)==null?void 0:l.data)==null?void 0:v.items)??[]).map(n=>{var x,m,g,B,L,R;return{name:((x=n==null?void 0:n.student)==null?void 0:x.name)??(n==null?void 0:n.student_name)??"—",registration_number:(n==null?void 0:n.registration_number)??null,roll_number:(n==null?void 0:n.roll_number)??((m=n==null?void 0:n.student)==null?void 0:m.roll_number)??null,base_amount:(n==null?void 0:n.base_amount)??((g=n==null?void 0:n.amounts)==null?void 0:g.base)??0,late_fee:(n==null?void 0:n.late_fee)??((B=n==null?void 0:n.amounts)==null?void 0:B.late_fee)??0,discount:(n==null?void 0:n.discount)??((L=n==null?void 0:n.amounts)==null?void 0:L.discount)??0,net_amount:(n==null?void 0:n.net_amount)??((R=n==null?void 0:n.amounts)==null?void 0:R.net)??0}})}),N=a(()=>{var e,t;return((e=u.value)==null?void 0:e.receipt_no)??((t=u.value)==null?void 0:t.receiptNo)??"—"}),U=a(()=>{var e,t;return((e=r.value)==null?void 0:e.paid_at)??((t=r.value)==null?void 0:t.created_at)??null}),q=a(()=>{var e;return((e=r.value)==null?void 0:e.trx_id)??"—"}),E=a(()=>{var e,t;return((e=r.value)==null?void 0:e.payment_id)??((t=r.value)==null?void 0:t.gateway_payment_id)??"—"}),M=a(()=>{var e;return(((e=r.value)==null?void 0:e.channel)||"").toUpperCase()}),X=a(()=>{var e;return(((e=r.value)==null?void 0:e.method)||"-").toUpperCase()});K(async()=>{var e,t;try{y.value=!0,_.value=null;const l=V.params.id;try{await b.fetchReceipt(l)}catch{const n=await b.fetchCollectFee(l);f.value=n}}catch(l){_.value=((t=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:t.message)||(l==null?void 0:l.message)||"রিসিট লোড করা যায়নি"}finally{y.value=!1}});const G=()=>window.print();return(e,t)=>{var l,v,n,x;return p(),i("div",$,[y.value?(p(),O(Y,{key:0})):_.value?(p(),i("div",tt,o(_.value),1)):(p(),i("div",et,[s("div",st,[t[3]||(t[3]=s("div",null,[s("img",{src:H,alt:"",class:"h-[60px]"})],-1)),s("div",null,[t[1]||(t[1]=s("h1",{class:"text-2xl font-semibold"},"মানি রিসিট",-1)),t[2]||(t[2]=s("p",{class:"text-gray-600 text-sm"},"পরীক্ষা ফি প্রদানের নিশ্চিতকরণ",-1)),N.value?(p(),i("div",nt,[t[0]||(t[0]=d(" রিসিট নং: ")),s("strong",null,o(N.value),1)])):S("",!0)])]),s("div",lt,[s("div",ot,[s("p",null,[t[4]||(t[4]=s("strong",null,"প্রতিষ্ঠান:",-1)),d(" "+o((l=h.value)!=null&&l.institute_code?h.value.institute_code+" - ":"")+" "+o(((v=h.value)==null?void 0:v.name)??"—"),1)]),s("p",null,[t[5]||(t[5]=s("strong",null,"পরীক্ষা:",-1)),d(" "+o(((n=A.value)==null?void 0:n.name)??"—"),1)]),s("p",null,[t[6]||(t[6]=s("strong",null,"মারহালা:",-1)),d(" "+o(((x=I.value)==null?void 0:x.name)??"—"),1)]),s("p",null,[t[7]||(t[7]=s("strong",null,"শিক্ষার্থী:",-1)),d(" "+o(k(j.value)),1)])]),s("div",at,[s("p",null,[t[8]||(t[8]=s("strong",null,"চ্যানেল / মাধ্যম:",-1)),d(" "+o(M.value)+" / "+o(X.value),1)]),s("p",null,[t[9]||(t[9]=s("strong",null,"টিআরএক্স (TRX):",-1)),d(" "+o(q.value),1)]),s("p",null,[t[10]||(t[10]=s("strong",null,"পেমেন্ট আইডি:",-1)),d(" "+o(E.value),1)]),s("p",null,[t[11]||(t[11]=s("strong",null,"পরিশোধের সময়:",-1)),d(" "+o(z(U.value)),1)])])]),s("div",rt,[s("div",ut,[t[12]||(t[12]=s("p",{class:"text-xs text-gray-500"},"মোট পরিমাণ",-1)),s("p",dt,o(c(C.value)),1)]),s("div",mt,[t[13]||(t[13]=s("p",{class:"text-xs text-gray-500"},"সার্ভিস চার্জ",-1)),s("p",pt,o(c(D.value)),1)]),s("div",ct,[t[14]||(t[14]=s("p",{class:"text-xs text-gray-500"},"নেট পরিমাণ",-1)),s("p",it,o(c(T.value)),1)])]),s("div",vt,[t[17]||(t[17]=s("h3",{class:"font-semibold mb-2"},"শিক্ষার্থীভিত্তিক হিসাব",-1)),s("table",xt,[t[16]||(t[16]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"border px-2 py-2"},"#"),s("th",{class:"border px-2 py-2"},"নাম"),s("th",{class:"border px-2 py-2"},"রেজিস্ট্রেশন"),s("th",{class:"border px-2 py-2 text-right"},"মূল ফি"),s("th",{class:"border px-2 py-2 text-right"},"বিলম্ব"),s("th",{class:"border px-2 py-2 text-right"},"ছাড়"),s("th",{class:"border px-2 py-2 text-right"},"নেট")])],-1)),s("tbody",null,[(p(!0),i(P,null,Q(F.value,(m,g)=>(p(),i("tr",{key:g},[s("td",gt,o(k(g+1)),1),s("td",_t,o(m.name),1),s("td",bt,o(m.registration_number??"—"),1),s("td",yt,o(c(m.base_amount)),1),s("td",ft,o(c(m.late_fee)),1),s("td",ht,o(c(m.discount)),1),s("td",wt,o(c(m.net_amount)),1)]))),128)),F.value.length?S("",!0):(p(),i("tr",kt,t[15]||(t[15]=[s("td",{class:"border px-2 py-2 text-center text-gray-500",colspan:"7"},"কোনো আইটেম নেই",-1)])))])])]),t[18]||(t[18]=s("div",{class:"mt-6 text-xs text-gray-500"},[s("p",null,"এটি সিস্টেম জেনারেটেড রসিদ। অনুগ্রহ করে সংরক্ষণ করুন।")],-1))])),s("div",{class:"flex justify-center"},[s("button",{class:"btn-2 no-print",onClick:G},t[19]||(t[19]=[s("i",{class:"fas fa-print mr-2"},null,-1),d(" প্রিন্ট ")]))])])}}},Lt=J(Ct,[["__scopeId","data-v-296468e8"]]);export{Lt as default};
