import{_ as Y}from"./logo-name-CJ0dX4ea.js";import{_ as Z,r as w,i as a,o as $,c as v,m as tt,t as l,a as e,k as c,h as T,F as et,e as st,q as nt,d as p,L as ot}from"./index-DXxrbR31.js";import{u as lt}from"./collect-fee-DvcNmpYt.js";const at={class:"my-container space-y-4 max-w-4xl px-4 py-6 print:p-0"},rt={key:1,class:"text-red-600 font-semibold"},ut={key:2,class:"max-w-4xl mx-auto bg-white p-6 shadow print:shadow-none print:p-0"},dt={class:"flex flex-col md:flex-row items-start justify-between gap-4 border-b pb-4"},ct={key:0,class:"text-xs text-gray-500 mt-1"},mt={class:"grid md:grid-cols-2 gap-4 mt-6"},pt={class:"space-y-1"},vt={class:"space-y-1 md:text-right"},xt={class:"grid md:grid-cols-3 gap-4 mt-4"},it={class:"card-bg p-3"},gt={class:"text-xl font-semibold"},_t={class:"card-bg p-3"},bt={class:"text-xl font-semibold"},yt={class:"card-bg p-3"},ft={class:"text-xl font-semibold"},ht={class:"mt-6"},wt={class:"w-full border-collapse border border-gray-300 text-sm"},Nt={class:"border px-2 py-1 text-center"},kt={class:"border px-2 py-1"},Ct={class:"border px-2 py-1 text-center"},Dt={class:"border px-2 py-1 text-right"},Ft={class:"border px-2 py-1 text-right"},Bt={class:"border px-2 py-1 text-right"},Lt={class:"border px-2 py-1 text-right font-semibold"},Rt={class:"border px-2 py-1 text-right"},St={class:"border px-2 py-1 text-right font-semibold"},Vt={key:0},zt={__name:"CollectFeeReceipt",setup(At){const U=nt(),b=lt(),y=w(!0),_=w(null),m=s=>Number(s??0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),N=s=>Number(s??0).toLocaleString("bn-BD"),q=s=>s?new Date(s).toLocaleString("bn-BD",{hour12:!0}):"—",u=a(()=>{var t;const s=b.receipt;return s?((t=s==null?void 0:s.data)==null?void 0:t.data)??(s==null?void 0:s.data)??s:null}),f=w(null),r=a(()=>{var s,t,o;return((s=u.value)==null?void 0:s.payment)??((o=(t=f.value)==null?void 0:t.data)==null?void 0:o.payment)??null}),h=a(()=>{var s,t;return((s=u.value)==null?void 0:s.institute)??((t=r.value)==null?void 0:t.institute)??null}),E=a(()=>{var s,t;return((s=u.value)==null?void 0:s.exam)??((t=r.value)==null?void 0:t.exam)??null}),M=a(()=>{var s,t;return((s=u.value)==null?void 0:s.zamat)??((t=r.value)==null?void 0:t.zamat)??null}),X=a(()=>{var s,t,o;return((s=r.value)==null?void 0:s.students_count)??((o=(t=u.value)==null?void 0:t.amounts)==null?void 0:o.students_count)??0}),k=a(()=>{var s,t,o;return((s=r.value)==null?void 0:s.gross_amount)??((o=(t=u.value)==null?void 0:t.amounts)==null?void 0:o.gross)??0}),C=a(()=>{var s,t,o;return((s=r.value)==null?void 0:s.service_charge)??((o=(t=u.value)==null?void 0:t.amounts)==null?void 0:o.service_charge)??0}),G=a(()=>{var s,t,o;return((s=r.value)==null?void 0:s.net_amount)!=null?r.value.net_amount:((o=(t=u.value)==null?void 0:t.amounts)==null?void 0:o.net)!=null?u.value.amounts.net:(k.value??0)-(C.value??0)}),D=a(()=>{var t,o,x;return(((t=u.value)==null?void 0:t.items)??((x=(o=f.value)==null?void 0:o.data)==null?void 0:x.items)??[]).map(n=>{var R,S,V,z,A,I,j;const i=(n==null?void 0:n.base_amount)??((R=n==null?void 0:n.amounts)==null?void 0:R.base)??0,d=(n==null?void 0:n.late_fee)??((S=n==null?void 0:n.amounts)==null?void 0:S.late_fee)??0,g=(n==null?void 0:n.discount)??((V=n==null?void 0:n.amounts)==null?void 0:V.discount)??0,B=(n==null?void 0:n.service_charge)??((z=n==null?void 0:n.amounts)==null?void 0:z.service_charge)??0,L=(n==null?void 0:n.net_amount)??((A=n==null?void 0:n.amounts)==null?void 0:A.net)??Number(i)+Number(d)-Number(g),W=Number(L)+Number(B);return{name:((I=n==null?void 0:n.student)==null?void 0:I.name)??(n==null?void 0:n.student_name)??"—",registration_number:(n==null?void 0:n.registration_number)??null,roll_number:(n==null?void 0:n.roll_number)??((j=n==null?void 0:n.student)==null?void 0:j.roll_number)??null,base_amount:i,late_fee:d,discount:g,net_amount:L,service_charge:B,gross_amount:W}})}),F=a(()=>{var s,t;return((s=u.value)==null?void 0:s.receipt_no)??((t=u.value)==null?void 0:t.receiptNo)??"—"}),H=a(()=>{var s,t;return((s=r.value)==null?void 0:s.paid_at)??((t=r.value)==null?void 0:t.created_at)??null}),J=a(()=>{var s;return((s=r.value)==null?void 0:s.trx_id)??"—"}),K=a(()=>{var s,t;return((s=r.value)==null?void 0:s.payment_id)??((t=r.value)==null?void 0:t.gateway_payment_id)??"—"}),O=a(()=>{var s;return(((s=r.value)==null?void 0:s.channel)||"").toUpperCase()}),P=a(()=>{var s;return(((s=r.value)==null?void 0:s.method)||"-").toUpperCase()});$(async()=>{var s,t;try{y.value=!0,_.value=null;const o=U.params.id;try{await b.fetchReceipt(o)}catch{const n=await b.fetchCollectFee(o);f.value=n}}catch(o){_.value=((t=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:t.message)||(o==null?void 0:o.message)||"রিসিট লোড করা যায়নি"}finally{y.value=!1}});const Q=()=>window.print();return(s,t)=>{var o,x,n,i;return p(),v("div",at,[y.value?(p(),tt(ot,{key:0})):_.value?(p(),v("div",rt,l(_.value),1)):(p(),v("div",ut,[e("div",dt,[t[3]||(t[3]=e("div",null,[e("img",{src:Y,alt:"",class:"h-[60px]"})],-1)),e("div",null,[t[1]||(t[1]=e("h1",{class:"text-2xl font-semibold"},"মানি রিসিট",-1)),t[2]||(t[2]=e("p",{class:"text-gray-600 text-sm"},"পরীক্ষা ফি প্রদানের নিশ্চিতকরণ",-1)),F.value?(p(),v("div",ct,[t[0]||(t[0]=c(" রিসিট নং: ")),e("strong",null,l(F.value),1)])):T("",!0)])]),e("div",mt,[e("div",pt,[e("p",null,[t[4]||(t[4]=e("strong",null,"প্রতিষ্ঠান:",-1)),c(" "+l((o=h.value)!=null&&o.institute_code?h.value.institute_code+" - ":"")+" "+l(((x=h.value)==null?void 0:x.name)??"—"),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"পরীক্ষা:",-1)),c(" "+l(((n=E.value)==null?void 0:n.name)??"—"),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"মারহালা:",-1)),c(" "+l(((i=M.value)==null?void 0:i.name)??"—"),1)]),e("p",null,[t[7]||(t[7]=e("strong",null,"শিক্ষার্থী:",-1)),c(" "+l(N(X.value)),1)])]),e("div",vt,[e("p",null,[t[8]||(t[8]=e("strong",null,"চ্যানেল / মাধ্যম:",-1)),c(" "+l(O.value)+" / "+l(P.value),1)]),e("p",null,[t[9]||(t[9]=e("strong",null,"টিআরএক্স (TRX):",-1)),c(" "+l(J.value),1)]),e("p",null,[t[10]||(t[10]=e("strong",null,"পেমেন্ট আইডি:",-1)),c(" "+l(K.value),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"পরিশোধের সময়:",-1)),c(" "+l(q(H.value)),1)])])]),e("div",xt,[e("div",it,[t[12]||(t[12]=e("p",{class:"text-xs text-gray-500"},"মোট পরিমাণ",-1)),e("p",gt,l(m(k.value)),1)]),e("div",_t,[t[13]||(t[13]=e("p",{class:"text-xs text-gray-500"},"সার্ভিস চার্জ",-1)),e("p",bt,l(m(C.value)),1)]),e("div",yt,[t[14]||(t[14]=e("p",{class:"text-xs text-gray-500"},"নেট পরিমাণ",-1)),e("p",ft,l(m(G.value)),1)])]),e("div",ht,[t[17]||(t[17]=e("h3",{class:"font-semibold mb-2"},"শিক্ষার্থীভিত্তিক হিসাব",-1)),e("table",wt,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"border px-2 py-2"},"#"),e("th",{class:"border px-2 py-2"},"নাম"),e("th",{class:"border px-2 py-2"},"রেজিস্ট্রেশন"),e("th",{class:"border px-2 py-2 text-right"},"মূল ফি"),e("th",{class:"border px-2 py-2 text-right"},"বিলম্ব"),e("th",{class:"border px-2 py-2 text-right"},"ছাড়"),e("th",{class:"border px-2 py-2 text-right"},"নেট"),e("th",{class:"border px-2 py-2 text-right"},"সার্ভিস চার্জ"),e("th",{class:"border px-2 py-2 text-right"},"গ্রোস")])],-1)),e("tbody",null,[(p(!0),v(et,null,st(D.value,(d,g)=>(p(),v("tr",{key:g},[e("td",Nt,l(N(g+1)),1),e("td",kt,l(d.name),1),e("td",Ct,l(d.registration_number??"—"),1),e("td",Dt,l(m(d.base_amount)),1),e("td",Ft,l(m(d.late_fee)),1),e("td",Bt,l(m(d.discount)),1),e("td",Lt,l(m(d.net_amount)),1),e("td",Rt,l(m(d.service_charge)),1),e("td",St,l(m(d.gross_amount)),1)]))),128)),D.value.length?T("",!0):(p(),v("tr",Vt,t[15]||(t[15]=[e("td",{class:"border px-2 py-2 text-center text-gray-500",colspan:"9"},"কোনো আইটেম নেই",-1)])))])])]),t[18]||(t[18]=e("div",{class:"mt-6 text-xs text-gray-500"},[e("p",null,"এটি সিস্টেম জেনারেটেড রসিদ। অনুগ্রহ করে সংরক্ষণ করুন।")],-1))])),e("div",{class:"flex justify-center"},[e("button",{class:"btn-2 no-print",onClick:Q},t[19]||(t[19]=[e("i",{class:"fas fa-print mr-2"},null,-1),c(" প্রিন্ট ")]))])])}}},Ut=Z(zt,[["__scopeId","data-v-3b4cc6c8"]]);export{Ut as default};
