import{_ as J}from"./logo-name-CJ0dX4ea.js";import{_ as K,r as w,i as o,o as O,c as v,m as P,t as a,a as t,k as p,h as V,F as Q,e as W,q as Y,d as c,L as Z}from"./index-iNzLcFEe.js";import{u as $}from"./collect-fee-BQQzuIXu.js";const ee={class:"my-container space-y-4 max-w-4xl px-4 py-6 print:p-0"},te={key:1,class:"text-red-600 font-semibold"},se={key:2,class:"max-w-4xl mx-auto bg-white p-6 shadow print:shadow-none print:p-0"},ne={class:"flex flex-col md:flex-row items-start justify-between gap-4 border-b pb-4"},le={key:0,class:"text-xs text-gray-500 mt-1"},ae={class:"grid md:grid-cols-2 gap-4 mt-6"},oe={class:"space-y-1"},re={class:"space-y-1 md:text-right"},ue={class:"grid md:grid-cols-3 gap-4 mt-4"},de={class:"card-bg p-3"},pe={class:"text-xl font-semibold"},me={class:"card-bg p-3"},ce={class:"text-xl font-semibold"},ve={class:"card-bg p-3"},xe={class:"text-xl font-semibold"},ie={class:"mt-6"},ge={class:"w-full border-collapse border border-gray-300 text-sm"},_e={class:"border px-2 py-1 text-center"},be={class:"border px-2 py-1"},ye={class:"border px-2 py-1 text-center"},fe={class:"border px-2 py-1 text-right"},he={class:"border px-2 py-1 text-right"},we={class:"border px-2 py-1 text-right"},ke={class:"border px-2 py-1 text-right"},Ce={class:"border px-2 py-1 text-right font-semibold"},De={key:0},Fe={__name:"CollectFeeReceipt",setup(Ne){const z=Y(),b=$(),y=w(!0),_=w(null),m=s=>Number(s??0).toLocaleString("bn-BD",{minimumFractionDigits:2,maximumFractionDigits:2}),k=s=>Number(s??0).toLocaleString("bn-BD"),A=s=>s?new Date(s).toLocaleString("bn-BD",{hour12:!0}):"—",u=o(()=>{var e;const s=b.receipt;return s?((e=s==null?void 0:s.data)==null?void 0:e.data)??(s==null?void 0:s.data)??s:null}),f=w(null),r=o(()=>{var s,e,l;return((s=u.value)==null?void 0:s.payment)??((l=(e=f.value)==null?void 0:e.data)==null?void 0:l.payment)??null}),h=o(()=>{var s,e;return((s=u.value)==null?void 0:s.institute)??((e=r.value)==null?void 0:e.institute)??null}),I=o(()=>{var s,e;return((s=u.value)==null?void 0:s.exam)??((e=r.value)==null?void 0:e.exam)??null}),j=o(()=>{var s,e;return((s=u.value)==null?void 0:s.zamat)??((e=r.value)==null?void 0:e.zamat)??null}),T=o(()=>{var s,e,l;return((s=r.value)==null?void 0:s.students_count)??((l=(e=u.value)==null?void 0:e.amounts)==null?void 0:l.students_count)??0}),C=o(()=>{var s,e,l;return((s=r.value)==null?void 0:s.gross_amount)??((l=(e=u.value)==null?void 0:e.amounts)==null?void 0:l.gross)??0}),D=o(()=>{var s,e,l;return((s=r.value)==null?void 0:s.service_charge)??((l=(e=u.value)==null?void 0:e.amounts)==null?void 0:l.service_charge)??0}),U=o(()=>{var s,e,l;return((s=r.value)==null?void 0:s.net_amount)!=null?r.value.net_amount:((l=(e=u.value)==null?void 0:e.amounts)==null?void 0:l.net)!=null?u.value.amounts.net:(C.value??0)-(D.value??0)}),F=o(()=>{var e,l,x;return(((e=u.value)==null?void 0:e.items)??((x=(l=f.value)==null?void 0:l.data)==null?void 0:x.items)??[]).map(n=>{var i,d,g,B,L,R,S;return{name:((i=n==null?void 0:n.student)==null?void 0:i.name)??(n==null?void 0:n.student_name)??"—",registration_number:(n==null?void 0:n.registration_number)??null,roll_number:(n==null?void 0:n.roll_number)??((d=n==null?void 0:n.student)==null?void 0:d.roll_number)??null,base_amount:(n==null?void 0:n.base_amount)??((g=n==null?void 0:n.amounts)==null?void 0:g.base)??0,late_fee:(n==null?void 0:n.late_fee)??((B=n==null?void 0:n.amounts)==null?void 0:B.late_fee)??0,discount:(n==null?void 0:n.discount)??((L=n==null?void 0:n.amounts)==null?void 0:L.discount)??0,service_charge:(n==null?void 0:n.service_charge)??((R=n==null?void 0:n.amounts)==null?void 0:R.service_charge)??0,net_amount:(n==null?void 0:n.net_amount)??((S=n==null?void 0:n.amounts)==null?void 0:S.net)??0}})}),N=o(()=>{var s,e;return((s=u.value)==null?void 0:s.receipt_no)??((e=u.value)==null?void 0:e.receiptNo)??"—"}),q=o(()=>{var s,e;return((s=r.value)==null?void 0:s.paid_at)??((e=r.value)==null?void 0:e.created_at)??null}),E=o(()=>{var s;return((s=r.value)==null?void 0:s.trx_id)??"—"}),M=o(()=>{var s,e;return((s=r.value)==null?void 0:s.payment_id)??((e=r.value)==null?void 0:e.gateway_payment_id)??"—"}),X=o(()=>{var s;return(((s=r.value)==null?void 0:s.channel)||"").toUpperCase()}),G=o(()=>{var s;return(((s=r.value)==null?void 0:s.method)||"-").toUpperCase()});O(async()=>{var s,e;try{y.value=!0,_.value=null;const l=z.params.id;try{await b.fetchReceipt(l)}catch{const n=await b.fetchCollectFee(l);f.value=n}}catch(l){_.value=((e=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:e.message)||(l==null?void 0:l.message)||"রিসিট লোড করা যায়নি"}finally{y.value=!1}});const H=()=>window.print();return(s,e)=>{var l,x,n,i;return c(),v("div",ee,[y.value?(c(),P(Z,{key:0})):_.value?(c(),v("div",te,a(_.value),1)):(c(),v("div",se,[t("div",ne,[e[3]||(e[3]=t("div",null,[t("img",{src:J,alt:"",class:"h-[60px]"})],-1)),t("div",null,[e[1]||(e[1]=t("h1",{class:"text-২xl font-semibold"},"মানি রিসিট",-1)),e[2]||(e[2]=t("p",{class:"text-gray-600 text-sm"},"পরীক্ষা ফি প্রদানের নিশ্চিতকরণ",-1)),N.value?(c(),v("div",le,[e[0]||(e[0]=p(" রিসিট নং: ")),t("strong",null,a(N.value),1)])):V("",!0)])]),t("div",ae,[t("div",oe,[t("p",null,[e[4]||(e[4]=t("strong",null,"প্রতিষ্ঠান:",-1)),p(" "+a((l=h.value)!=null&&l.institute_code?h.value.institute_code+" - ":"")+" "+a(((x=h.value)==null?void 0:x.name)??"—"),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"পরীক্ষা:",-1)),p(" "+a(((n=I.value)==null?void 0:n.name)??"—"),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"মারহালা:",-1)),p(" "+a(((i=j.value)==null?void 0:i.name)??"—"),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"শিক্ষার্থী:",-1)),p(" "+a(k(T.value)),1)])]),t("div",re,[t("p",null,[e[8]||(e[8]=t("strong",null,"চ্যানেল / মাধ্যম:",-1)),p(" "+a(X.value)+" / "+a(G.value),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"টিআরএক্স (TRX):",-1)),p(" "+a(E.value),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"পেমেন্ট আইডি:",-1)),p(" "+a(M.value),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"পরিশোধের সময়:",-1)),p(" "+a(A(q.value)),1)])])]),t("div",ue,[t("div",de,[e[12]||(e[12]=t("p",{class:"text-xs text-gray-500"},"মোট পরিমাণ",-1)),t("p",pe,a(m(C.value)),1)]),t("div",me,[e[13]||(e[13]=t("p",{class:"text-xs text-gray-500"},"সার্ভিস চার্জ",-1)),t("p",ce,a(m(D.value)),1)]),t("div",ve,[e[14]||(e[14]=t("p",{class:"text-xs text-gray-500"},"নেট পরিমাণ",-1)),t("p",xe,a(m(U.value)),1)])]),t("div",ie,[e[17]||(e[17]=t("h3",{class:"font-semibold mb-2"},"শিক্ষার্থীভিত্তিক হিসাব",-1)),t("table",ge,[e[16]||(e[16]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"border px-2 py-2"},"#"),t("th",{class:"border px-2 py-2"},"নাম"),t("th",{class:"border px-2 py-2"},"রেজিস্ট্রেশন"),t("th",{class:"border px-2 py-2 text-right"},"মূল ফি"),t("th",{class:"border px-2 py-2 text-right"},"বিলম্ব"),t("th",{class:"border px-2 py-2 text-right"},"ছাড়"),t("th",{class:"border px-2 py-2 text-right"},"সার্ভিস চার্জ"),t("th",{class:"border px-2 py-2 text-right"},"নেট")])],-1)),t("tbody",null,[(c(!0),v(Q,null,W(F.value,(d,g)=>(c(),v("tr",{key:g},[t("td",_e,a(k(g+1)),1),t("td",be,a(d.name),1),t("td",ye,a(d.registration_number??"—"),1),t("td",fe,a(m(d.base_amount)),1),t("td",he,a(m(d.late_fee)),1),t("td",we,a(m(d.discount)),1),t("td",ke,a(m(d.service_charge)),1),t("td",Ce,a(m(d.net_amount)),1)]))),128)),F.value.length?V("",!0):(c(),v("tr",De,e[15]||(e[15]=[t("td",{class:"border px-2 py-2 text-center text-gray-500",colspan:"8"},"কোনো আইটেম নেই",-1)])))])])]),e[18]||(e[18]=t("div",{class:"mt-6 text-xs text-gray-500"},[t("p",null,"এটি সিস্টেম জেনারেটেড রসিদ। অনুগ্রহ করে সংরক্ষণ করুন।")],-1))])),t("div",{class:"flex justify-center"},[t("button",{class:"btn-2 no-print",onClick:H},e[19]||(e[19]=[t("i",{class:"fas fa-print mr-2"},null,-1),p(" প্রিন্ট ")]))])])}}},Se=K(Fe,[["__scopeId","data-v-a024d9ab"]]);export{Se as default};
