import{H as D,r as m,i as F,o as U,c as r,a as t,n as v,k as j,F as L,e as B,t as n,j as u,v as c,N as M,p as N,h as S,d as i,L as A}from"./index-VisWtOtk.js";import{u as E}from"./committee-store-DH7sxf1D.js";const T={class:"px-4 space-y-2"},q={class:"flex"},z={class:"flex items-center space-x-4 bg-white p-2 rounded-lg"},H={key:1,class:"overflow-x-auto"},R={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},G={class:"text-gray-600 text-sm font-light"},I={class:"py-3 px-2 text-left"},J={class:"font-medium"},K={class:"py-3 px-2 text-left"},O={class:"font-medium"},P={class:"py-3 px-2 text-left"},Q={class:"font-medium"},W={class:"py-3 px-2 text-left"},X={class:"font-medium"},Y={class:"py-3 px-2 text-left"},Z={class:"py-3 px-2 text-center flex justify-center"},tt=["onClick","title"],et={class:"py-3 px-2 text-center"},st={class:"flex item-center justify-center gap-4"},lt=["onClick"],ot=["onClick"],at=["onClick"],nt={key:1},it={key:2,open:"",class:"w-full max-w-lg rounded-lg shadow-lg"},dt={class:"text-lg font-semibold"},rt={class:"grid gap-2"},ut={class:"grid grid-cols-2 gap-2"},ct={class:"inline-flex items-center gap-2"},ft={__name:"CommitteesList",setup(pt){const d=E(),{committees:x}=D(d),a=m(""),y=m(!0),p=m(!1),o=m({id:null,name:"",session:"",start_date:"",end_date:"",is_active:!0,notes:""}),b=F(()=>{let l=Array.isArray(x.value)?x.value:[];return a.value==="active"?l.filter(e=>!!e.is_active):a.value==="inactive"?l.filter(e=>!e.is_active):l});function C(){o.value={id:null,name:"",session:"",start_date:"",end_date:"",is_active:!0,notes:""}}function k(){C(),p.value=!0}function w(l){o.value={id:l.id,name:l.name||"",session:l.session||"",start_date:(l.start_date||"").slice(0,10),end_date:(l.end_date||"").slice(0,10),is_active:!!l.is_active,notes:l.notes||""},p.value=!0}function _(){p.value=!1}async function $(){const l={...o.value};try{l.id?await d.updateCommittee(l.id,l):await d.createCommittee(l),_(),await g()}catch(e){console.error(e)}}async function V(l){if(confirm(`"${l.name}" কমিটিটি মুছে ফেলতে চাও?`))try{await d.deleteCommittee(l.id),await g()}catch(e){console.error(e)}}async function g(){await d.fetchCommittees()}const h=l=>l?String(l).slice(0,10):"—";return U(async()=>{try{await d.fetchCommittees()}finally{y.value=!1}}),(l,e)=>(i(),r("div",T,[t("div",{class:"flex justify-between items-center"},[e[9]||(e[9]=t("h1",{class:"title-lg"},"কমিটি তালিকা",-1)),t("button",{class:"btn-2",onClick:k},"নতুন যুক্ত করুন")]),t("div",q,[t("div",z,[t("button",{class:v(["btn-1",{"btn-2":a.value===""}]),onClick:e[0]||(e[0]=s=>a.value="")},"সব",2),t("button",{class:v(["btn-1",{"btn-2":a.value==="active"}]),onClick:e[1]||(e[1]=s=>a.value="active")}," একটিভ ",2),t("button",{class:v(["btn-1",{"btn-2":a.value==="inactive"}]),onClick:e[2]||(e[2]=s=>a.value="inactive")}," ইন-একটিভ ",2)]),e[10]||(e[10]=t("div",{class:"flex-1"},null,-1))]),y.value?(i(),j(A,{key:0})):(i(),r("div",H,[t("table",R,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"bg-gray-200 text-gray-700 text-sm leading-normal"},[t("th",{class:"py-3 px-2 text-left"},"নাম"),t("th",{class:"py-3 px-2 text-left"},"সেশন"),t("th",{class:"py-3 px-2 text-left"},"শুরুর তারিখ"),t("th",{class:"py-3 px-2 text-left"},"শেষ তারিখ"),t("th",{class:"py-3 px-2 text-left"},"অবস্থা"),t("th",{class:"py-3 px-2 text-center"},"মেম্বার"),t("th",{class:"py-3 px-2 text-center"},"একশন")])],-1)),t("tbody",G,[b.value.length?(i(!0),r(L,{key:0},B(b.value,s=>(i(),r("tr",{key:s.id,class:"border-b border-gray-200 hover:bg-gray-100"},[t("td",I,[t("p",J,n(s.name),1)]),t("td",K,[t("p",O,n(s.session||"—"),1)]),t("td",P,[t("p",Q,n(h(s.start_date)),1)]),t("td",W,[t("p",X,n(h(s.end_date)),1)]),t("td",Y,[t("p",{class:v(["font-medium",s.is_active?"text-green-600":"text-gray-400"])},n(s.is_active?"একটিভ":"ইন-একটিভ"),3)]),t("td",Z,[t("button",{class:"btn-4",onClick:f=>l.$router.push({name:"CommitteeDetail",params:{id:s.id}}),title:`${s.members_count||0} জন সদস্য`},n(s.members_count||0)+" জন ",9,tt)]),t("td",et,[t("div",st,[t("button",{class:"text-blue-600 hover:text-blue-800",onClick:f=>l.$router.push({name:"CommitteeDetail",params:{id:s.id}}),title:"View"},e[11]||(e[11]=[t("i",{class:"fas fa-eye"},null,-1)]),8,lt),t("button",{class:"text-blue-600 hover:text-blue-800",onClick:f=>w(s),title:"Edit"},e[12]||(e[12]=[t("i",{class:"fas fa-edit"},null,-1)]),8,ot),t("button",{class:"text-red-600 hover:text-red-800",onClick:f=>V(s),title:"Delete"},e[13]||(e[13]=[t("i",{class:"fas fa-trash"},null,-1)]),8,at)])])]))),128)):(i(),r("tr",nt,e[14]||(e[14]=[t("td",{colspan:"7",class:"text-center text-red-500 py-4"},"No committees found",-1)])))])])])),p.value?(i(),r("dialog",it,[t("form",{onSubmit:N($,["prevent"]),class:"bg-white p-4 rounded-lg space-y-3"},[t("h3",dt,n(o.value.id?"কমিটি সম্পাদনা":"নতুন কমিটি"),1),t("div",rt,[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.name=s),class:"border rounded px-3 py-2",placeholder:"কমিটির নাম",required:""},null,512),[[c,o.value.name]]),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.session=s),class:"border rounded px-3 py-2",placeholder:"সেশন (e.g. 2025-2027)"},null,512),[[c,o.value.session]]),t("div",ut,[u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.start_date=s),type:"date",class:"border rounded px-3 py-2"},null,512),[[c,o.value.start_date]]),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.end_date=s),type:"date",class:"border rounded px-3 py-2"},null,512),[[c,o.value.end_date]])]),t("label",ct,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>o.value.is_active=s)},null,512),[[M,o.value.is_active]]),e[16]||(e[16]=t("span",null,"Active",-1))]),u(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.notes=s),class:"border rounded px-3 py-2",placeholder:"নোটস"},null,512),[[c,o.value.notes]])]),t("div",{class:"flex justify-end gap-2 pt-2"},[t("button",{type:"button",class:"btn-1",onClick:_},"বাতিল"),e[17]||(e[17]=t("button",{type:"submit",class:"btn-2"},"সেভ",-1))])],32)])):S("",!0)]))}};export{ft as default};
