import{A as G,r as x,N as H,i as J,o as K,B as W,c as a,a as e,l as X,t as r,b as V,m as n,C as y,F as v,e as b,v as d,z as c,h as I,M as Y,x as Z,f as h,w as ee,y as te,d as o,L as se}from"./index-CuVS5FRI.js";import{u as le}from"./area-DrFpZOqC.js";import{u as ne}from"./examiner-DEMbNlab.js";import{u as oe}from"./institute-BbaT11yi.js";import{u as ie}from"./center-BCVrggZ5.js";const ae={class:"p-2"},de={class:"my-container max-w-2xl mx-auto space-y-4 card-bg md:p-8 p-4"},re={class:"grid gap-2"},ue={class:"font-semibold"},pe={class:"grid md:grid-cols-2 gap-4"},me=["disabled"],xe=["value"],ve=["value"],ce={class:"grid gap-2"},ge={class:"grid gap-2"},ye={class:"grid md:grid-cols-2 gap-4"},be={class:"grid md:grid-cols-3 gap-4"},fe=["onUpdate:modelValue"],ke=["onUpdate:modelValue"],Ve=["onUpdate:modelValue"],_e={class:"grid md:grid-cols-2 gap-4 mt-2"},Ue=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],we={class:"flex justify-center"},qe=["onClick"],Ee={class:"grid gap-2"},Ce={class:"grid gap-2"},Le={class:"grid gap-2"},Be={class:"grid gap-2"},je=["value"],Ae={key:0,disabled:""},Fe=["value"],Me={class:"flex items-center justify-center mt-4"},Ne={class:"flex justify-center"},Ie=["disabled"],Te={key:0,class:"modal-bg z-[999]"},De={class:"modal-card"},ze={key:1,class:"text-red-600 text-center"},Oe={class:"flex justify-center mt-4"},Pe={key:2},Re={class:"text-lg font-bold text-green-600 text-center"},$e={class:"flex justify-center"},Xe={__name:"ExaminerFormPublic",setup(Qe){const f=G(),w=le(),_=oe(),q=ie(),T=ne(),D=x(!0),U=x(""),S=x(!1),m=x(null),k=x(!1),p=x(null),l=H({name:"",phone:"",nid:"",address:"",education:[{exam:"",passing_year:"",result:"",institute:"",board:""}],institute_id:"",type:"",designation:"",exam_id:"",center_id:"",ex_experience:"",student_count:"",experience:{duration:"",books:""},status:"pending"}),z=()=>{Object.assign(l,{name:"",phone:"",nid:"",address:"",education:[{exam:"",passing_year:"",result:"",institute:"",board:""}],institute_id:"",type:"",designation:"",exam_id:"",center_id:"",ex_experience:"",student_count:"",experience:{duration:"",books:""},status:"pending"})},O=J(()=>l.type==="examiner"?["মুমতাহিন (খাতা)","মুমতাহিন (মৌখিক, মীযান বালক)","মুমতাহিনা (মৌখিক, মীযান বালিকা)","মুমতাহিন (নাযিরা)","মুমতাহিন (হিফয)"]:l.type==="guard"?["হল পরিদর্শক","নেগরানে আলা","সহকারী নেগরান","হল ব্যবস্থাপক"]:[]),P=()=>{l.education.push({exam:"",passing_year:"",result:"",institute:"",board:""})},R=i=>{l.education.splice(i,1)},$=async()=>{k.value=!0,p.value=null;try{if(!l.exam_id){console.error("Exam ID is missing!");return}const i=await T.createExaminerPublic(l);m.value=i,z()}catch(i){i.response&&i.response.data&&i.response.data.message.includes("SQLSTATE[23000]")?p.value="আপনি ইতিমধ্যে আবেদন করেছেন":(console.error("Failed to save examiner:",i),p.value="আবেদন সম্পন্ন করতে ব্যর্থ হয়েছে। অনুগ্রহ করে পুনরায় চেষ্টা করুন।")}finally{k.value=!1}};return K(async()=>{var i;try{await f.fetchLastExam(),await q.fetchCenters(),(i=f.exam)!=null&&i.id&&(l.exam_id=f.exam.id),await w.fetchAreas()}finally{D.value=!1}}),W(()=>U.value,async i=>{i?(S.value=!0,await _.fetchInstitutesByArea(i),S.value=!1):_.institutesByArea=[]}),(i,t)=>{var E,C,L,B,j,A,F,M,N;const Q=te("RouterLink");return o(),a(v,null,[e("div",ae,[e("div",de,[t[35]||(t[35]=e("h1",{class:"text-2xl font-bold text-center"},"নেগরান/মুমতাহিন নিবন্ধন",-1)),e("form",{onSubmit:X($,["prevent"]),class:"space-y-4"},[e("div",re,[e("p",ue,"পরীক্ষা: "+r(((E=V(f).exam)==null?void 0:E.name)||"No exam selected"),1),t[19]||(t[19]=e("hr",{class:"border-gray-500"},null,-1)),e("div",pe,[e("div",null,[t[16]||(t[16]=e("label",{class:"block"},null,-1)),n(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.type=s),required:"",class:"input-1"},t[15]||(t[15]=[e("option",{value:"",disabled:"",selected:""},"আবেদনের ধরণ নির্বাচন করুন",-1),e("option",{value:"guard"},"নেগরান",-1),e("option",{value:"examiner"},"মুমতাহিন",-1)]),512),[[y,l.type]])]),e("div",null,[n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.designation=s),class:"input-1",disabled:!l.type,required:""},[t[17]||(t[17]=e("option",{value:"",disabled:"",selected:""},"পদবি নির্বাচন করুন",-1)),(o(!0),a(v,null,b(O.value,s=>(o(),a("option",{key:s,value:s},r(s),9,xe))),128))],8,me),[[y,l.designation]])])]),e("div",null,[n(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.center_id=s),class:"input-1",required:""},[t[18]||(t[18]=e("option",{value:"",disabled:""},"কাঙ্খিত মারকায নির্বাচন করুন",-1)),(o(!0),a(v,null,b(V(q).centers,s=>{var g;return o(),a("option",{key:s.id,value:s==null?void 0:s.institute_id},r((g=s==null?void 0:s.institute)==null?void 0:g.name),9,ve)}),128))],512),[[y,l.center_id]])]),t[20]||(t[20]=e("p",{class:"text-red-500 text-sm"}," **আবেদনের এই অংশ তানযীম কর্তৃপক্ষ পরিবর্তন করার অধিকার সংরক্ষণ করে। ",-1))]),e("div",ce,[t[21]||(t[21]=e("p",{class:"block font-bold"},"ব্যক্তিগত তথ্য",-1)),t[22]||(t[22]=e("hr",{class:"border-gray-500"},null,-1)),e("div",ge,[n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.name=s),type:"text",class:"input-1",required:"",placeholder:"নেগরান/মুমতাহিন-এর পূর্ণ নাম"},null,512),[[d,l.name]]),e("div",ye,[n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.phone=s),type:"text",class:"input-1",required:"",placeholder:"মোবাইল নাম্বার (বিকাশ)"},null,512),[[d,l.phone]]),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.nid=s),type:"text",class:"input-1",required:"",placeholder:"জাতীয় পরিচয়পত্র নাম্বার"},null,512),[[d,l.nid]])]),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.address=s),type:"text",class:"input-1",required:"",placeholder:"ঠিকানা (গ্রাম, পোস্ট, থানা, জেলা)"},null,512),[[d,l.address]])])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block font-bold"},"শিক্ষাগত যোগ্যতা",-1)),(o(!0),a(v,null,b(l.education,(s,g)=>(o(),a("div",{key:g,class:"border p-4 rounded mb-2"},[e("div",be,[n(e("input",{"onUpdate:modelValue":u=>s.exam=u,type:"text",class:"input-1",required:"",placeholder:"পরীক্ষার নাম"},null,8,fe),[[d,s.exam]]),n(e("input",{"onUpdate:modelValue":u=>s.passing_year=u,type:"number",class:"input-1",required:"",placeholder:"পাসের সন"},null,8,ke),[[d,s.passing_year]]),n(e("input",{"onUpdate:modelValue":u=>s.result=u,type:"text",class:"input-1",required:"",placeholder:"ফলাফল"},null,8,Ve),[[d,s.result]])]),e("div",_e,[n(e("input",{"onUpdate:modelValue":u=>s.institute=u,type:"text",class:"input-1",placeholder:"শিক্ষা প্রতিষ্ঠানের নাম"},null,8,Ue),[[d,s.institute]]),n(e("input",{"onUpdate:modelValue":u=>s.board=u,type:"text",class:"input-1",placeholder:"বোর্ডের নাম"},null,8,Se),[[d,s.board]])]),e("div",we,[e("button",{type:"button",class:"bg-red-500 text-white px-4 py-2 rounded mt-2",onClick:u=>R(g)},t[23]||(t[23]=[e("i",{class:"fas fa-trash"},null,-1),c(" যোগ্যতাটি মুছুন ")]),8,qe)])]))),128)),e("div",{class:"flex justify-center"},[e("button",{type:"button",class:"bg-gray-400 text-white px-4 py-2 rounded",onClick:P},t[24]||(t[24]=[e("i",{class:"fas fa-plus-circle pr-2"},null,-1),c("আরো যোগ্যতা যুক্ত করুন ")]))])]),e("div",Ee,[t[26]||(t[26]=e("p",{class:"font-bold"},"অভিজ্ঞতা",-1)),t[27]||(t[27]=e("hr",{class:"border-gray-500"},null,-1)),e("div",Ce,[e("div",null,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.experience.duration=s),type:"text",class:"input-1",placeholder:"শিক্ষকতার সময়কাল কত বছর?"},null,512),[[d,l.experience.duration]])]),e("div",null,[n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.experience.books=s),type:"text",class:"input-1",placeholder:"এ বছর কোন কোন কিতাব পড়াচ্ছেন?"},null,512),[[d,l.experience.books]])]),e("div",null,[n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.ex_experience=s),type:"text",class:"input-1",placeholder:"পূর্বে নেগরানীর অভিজ্ঞতা কত বছরের?"},null,512),[[d,l.ex_experience]])])])]),e("div",Le,[t[31]||(t[31]=e("p",{class:"font-bold"},"কর্মরত প্রতিষ্ঠানের তথ্য",-1)),t[32]||(t[32]=e("hr",{class:"border-gray-500"},null,-1)),e("div",Be,[n(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>U.value=s),class:"input-1",required:""},[t[28]||(t[28]=e("option",{disabled:"",value:""},"অঞ্চল নির্বাচন করুন",-1)),(o(!0),a(v,null,b(V(w).areas,s=>(o(),a("option",{key:s.id,value:s.id},r(s.name),9,je))),128))],512),[[y,U.value]]),n(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.institute_id=s),class:"input-1",required:""},[t[29]||(t[29]=e("option",{disabled:"",value:""},"মাদরাসা নির্বাচন করুন",-1)),S.value?(o(),a("option",Ae,"মাদরাসা লোড হচ্ছে...")):I("",!0),(o(!0),a(v,null,b(V(_).institutesByArea,s=>(o(),a("option",{key:s.id,value:s.id}," ("+r(s.institute_code)+")-"+r(s.name),9,Fe))),128))],512),[[y,l.institute_id]]),e("div",null,[t[30]||(t[30]=e("p",null,"অত্র প্রতিষ্ঠানে এ বছর তানযীম পরীক্ষার্থী সংখ্যা কত?",-1)),n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.student_count=s),type:"text",class:"input-1",placeholder:"পরীক্ষার্থী সংখ্যা"},null,512),[[d,l.student_count]])])])]),t[34]||(t[34]=e("div",{class:"border p-4 rounded-md bg-sky-100"},[e("p",{class:"font-bold"},"আবেদনের শর্তাবলী"),e("ul",{class:"list-disc pl-6 space-y-2 text-sm"},[e("li",null,"আবেদনকারীকে অবশ্যই সঠিক তথ্য প্রদান করতে হবে।"),e("li",null,"আবেদন সাবমিট করার পর কোন তথ্য আপনি সংশোধন করতে পারবেন না।"),e("li",null,"কোন তথ্য মিথ্যা প্রমাণিত হলে আবেদন বাতিল বলে গণ্য হবে।"),e("li",null,"তানযীম কর্তৃপক্ষ যে কোনো সিদ্ধান্ত গ্রহণের অধিকার রাখে।")])],-1)),e("div",Me,[n(e("input",{id:"agreement",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=s=>l.agreement=s),class:"mr-2"},null,512),[[Y,l.agreement]]),t[33]||(t[33]=e("label",{for:"agreement",class:"text-sm btn-link"}," আমি শর্তগুলো মেনে আবেদন করছি। ",-1))]),e("div",Ne,[e("button",{type:"submit",class:"btn-2",disabled:!l.agreement},"আবেদন করুন",8,Ie)])],32)])]),p.value||m.value||k.value?(o(),a("div",Te,[e("div",De,[k.value?(o(),Z(se,{key:0,class:"shadow-none"})):p.value?(o(),a("div",ze,[t[36]||(t[36]=e("h2",{class:"text-lg font-bold"},"সমস্যা!",-1)),e("p",null,r(p.value),1),e("div",Oe,[e("button",{class:"btn-2",onClick:t[14]||(t[14]=s=>p.value=null)},"আবার চেষ্টা করি")])])):(o(),a("div",Pe,[e("h2",Re," আপনার "+r(((L=(C=m.value)==null?void 0:C.examiner)==null?void 0:L.type)==="examiner"?"মুমতাহিন":"নেগরান")+" আবেদন সফলভাবে সম্পন্ন হয়েছে! ",1),e("p",null,[t[37]||(t[37]=e("strong",null,"নাম:",-1)),c(" "+r((j=(B=m.value)==null?void 0:B.examiner)==null?void 0:j.name),1)]),e("p",null,[t[38]||(t[38]=e("strong",null,"ফোন:",-1)),c(" "+r((F=(A=m.value)==null?void 0:A.examiner)==null?void 0:F.phone),1)]),e("p",null,[t[39]||(t[39]=e("strong",null,"নিবন্ধন কোড:",-1)),c(" "+r((N=(M=m.value)==null?void 0:M.examiner)==null?void 0:N.examiner_code),1)]),t[40]||(t[40]=e("p",{class:"text-red-600 text-sm text-center pt-4"}," আপনার নিবন্ধন কোড নাম্বারটি সংরক্ষণ করুন ",-1))])),e("div",$e,[h(Q,{to:{name:"ExaminerShow"},class:"btn-link"},{default:ee(()=>t[41]||(t[41]=[c("পিছনে যাই")])),_:1})])])])):I("",!0)],64)}}};export{Xe as default};
