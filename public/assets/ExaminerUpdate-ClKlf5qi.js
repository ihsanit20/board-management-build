import{A as I,r as g,N as M,i as q,o as O,B as J,c as i,x as R,a as t,t as r,b,m as l,C as p,F as c,e as x,v as d,z as C,h as T,l as z,p as $,d as o,q as G,L as H}from"./index-DZMr5Sly.js";import{u as K}from"./area-Dw4OyzOU.js";import{u as P}from"./examiner-C5QEMdTK.js";import{u as Q}from"./institute-DOYWfJPF.js";import{u as W}from"./center-B8KX1O41.js";const X={class:"p-2"},Y={key:1,class:"my-container max-w-2xl mx-auto space-y-4 card-bg md:p-8 p-4"},Z={class:"grid gap-2"},ee={class:"font-semibold"},te={class:"grid md:grid-cols-2 gap-4"},se=["disabled"],ne=["value"],le=["value"],oe={class:"grid gap-2"},ie={class:"grid gap-2"},de={class:"grid md:grid-cols-2 gap-4"},ae={class:"grid md:grid-cols-3 gap-4"},ue=["onUpdate:modelValue"],re=["onUpdate:modelValue"],pe=["onUpdate:modelValue"],me={class:"grid md:grid-cols-2 gap-4 mt-2"},ce=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],ve={class:"flex justify-center"},ye=["onClick"],ge={class:"grid gap-2"},be={class:"grid gap-2"},fe={class:"grid gap-2"},Ve={class:"grid gap-2"},Ue=["value"],_e={key:0,disabled:""},ke=["value"],Le={__name:"ExaminerUpdate",setup(we){const U=G(),F=$(),_=I(),k=K(),f=Q(),w=W(),S=P(),v=g(!0),y=g(""),V=g(!1),E=g(F.params.id),n=M({name:"",phone:"",nid:"",address:"",education:[],institute_id:"",type:"",designation:"",exam_id:"",center_id:"",ex_experience:"",student_count:"",experience:{duration:"",books:""},status:"pending"}),L=q(()=>n.type==="examiner"?["মুমতাহিন (খাতা)","মুমতাহিন (মৌখিক, মীযান বালক)","মুমতাহিনা (মৌখিক, মীযান বালিকা)","মুমতাহিন (নাযিরা)","মুমতাহিন (হিফয)"]:n.type==="guard"?["হল পরিদর্শক","নেগরানে আলা","সহকারী নেগরান","হল ব্যবস্থাপক"]:[]),N=()=>{n.education.push({exam:"",passing_year:"",result:"",institute:"",board:""})},A=a=>{n.education.splice(a,1)},h=async()=>{var a;v.value=!0;try{const e=await S.fetchExaminer(E.value);console.log("Fetched Data:",e),n.name=(e==null?void 0:e.name)||"",n.phone=(e==null?void 0:e.phone)||"",n.nid=(e==null?void 0:e.nid)||"",n.address=(e==null?void 0:e.address)||"",n.education=typeof(e==null?void 0:e.education)=="string"?JSON.parse(e.education):e.education||[],n.experience=typeof(e==null?void 0:e.experience)=="string"?JSON.parse(e.experience):e.experience||{},n.institute_id=(e==null?void 0:e.institute_id)||"",n.type=(e==null?void 0:e.type)||"",n.designation=(e==null?void 0:e.designation)||"",n.exam_id=(e==null?void 0:e.exam_id)||"",n.center_id=(e==null?void 0:e.center_id)||"",n.ex_experience=(e==null?void 0:e.ex_experience)||"",n.student_count=(e==null?void 0:e.student_count)||"",n.status=(e==null?void 0:e.status)||"pending",y.value=((a=e==null?void 0:e.institute)==null?void 0:a.area_id)||""}catch(e){console.error("Failed to load examiner data:",e)}finally{v.value=!1}},j=async()=>{try{await S.updateExaminer(E.value,n),U.push({name:"ExaminerList"})}catch(a){console.error("Failed to update examiner:",a)}};O(async()=>{try{await _.fetchLastExam(),await w.fetchCenters(),await k.fetchAreas(),await h()}finally{v.value=!1}}),J(()=>y.value,async a=>{a?(V.value=!0,await f.fetchInstitutesByArea(a),V.value=!1):f.institutesByArea=[]});const D=()=>{U.push({name:"ExaminerList"})};return(a,e)=>{var B;return o(),i("div",X,[v.value?(o(),R(H,{key:0})):(o(),i("div",Y,[e[32]||(e[32]=t("h1",{class:"text-2xl font-bold text-center"},"নেগরান/মুমতাহিন সম্পাদনা করুন",-1)),t("form",{onSubmit:z(j,["prevent"]),class:"space-y-4"},[t("div",Z,[t("p",ee,"পরীক্ষা: "+r(((B=b(_).exam)==null?void 0:B.name)||"No exam selected"),1),e[19]||(e[19]=t("hr",{class:"border-gray-500"},null,-1)),t("div",te,[t("div",null,[l(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.type=s),class:"input-1"},e[14]||(e[14]=[t("option",{value:"",disabled:""},"আবেদনের ধরণ নির্বাচন করুন",-1),t("option",{value:"guard"},"নেগরান",-1),t("option",{value:"examiner"},"মুমতাহিন",-1)]),512),[[p,n.type]])]),t("div",null,[l(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.designation=s),class:"input-1",disabled:!n.type},[e[15]||(e[15]=t("option",{value:"",disabled:""},"পদবি নির্বাচন করুন",-1)),(o(!0),i(c,null,x(L.value,s=>(o(),i("option",{key:s,value:s},r(s),9,ne))),128))],8,se),[[p,n.designation]])])]),t("div",null,[l(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.center_id=s),class:"input-1"},[e[16]||(e[16]=t("option",{value:"",disabled:""},"কাঙ্খিত মারকায নির্বাচন করুন",-1)),(o(!0),i(c,null,x(b(w).centers,s=>{var m;return o(),i("option",{key:s.id,value:s==null?void 0:s.institute_id},r((m=s==null?void 0:s.institute)==null?void 0:m.name),9,le)}),128))],512),[[p,n.center_id]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block"},"আবেদনের অবস্থা",-1)),l(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.status=s),class:"input-1"},e[17]||(e[17]=[t("option",{value:"pending"},"পেন্ডিং",-1),t("option",{value:"active"},"একটিভ",-1),t("option",{value:"rejected"},"রিজেক্ট",-1)]),512),[[p,n.status]])])]),t("div",oe,[e[20]||(e[20]=t("p",{class:"block font-bold"},"ব্যক্তিগত তথ্য",-1)),e[21]||(e[21]=t("hr",{class:"border-gray-500"},null,-1)),t("div",ie,[l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>n.name=s),type:"text",class:"input-1",placeholder:"নাম",required:""},null,512),[[d,n.name]]),t("div",de,[l(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>n.phone=s),type:"text",class:"input-1",placeholder:"ফোন",required:""},null,512),[[d,n.phone]]),l(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>n.nid=s),type:"text",class:"input-1",placeholder:"এনআইডি"},null,512),[[d,n.nid]])]),l(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>n.address=s),type:"text",class:"input-1",placeholder:"ঠিকানা"},null,512),[[d,n.address]])])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block font-bold"},"শিক্ষাগত যোগ্যতা",-1)),(o(!0),i(c,null,x(n.education,(s,m)=>(o(),i("div",{key:m,class:"border p-4 rounded mb-2"},[t("div",ae,[t("div",null,[l(t("input",{"onUpdate:modelValue":u=>s.exam=u,type:"text",class:"input-1",placeholder:"পরীক্ষার নাম"},null,8,ue),[[d,s.exam]])]),t("div",null,[l(t("input",{"onUpdate:modelValue":u=>s.passing_year=u,type:"number",class:"input-1",placeholder:"পাসের সন"},null,8,re),[[d,s.passing_year]])]),t("div",null,[l(t("input",{"onUpdate:modelValue":u=>s.result=u,type:"text",class:"input-1",placeholder:"ফলাফল"},null,8,pe),[[d,s.result]])])]),t("div",me,[l(t("input",{"onUpdate:modelValue":u=>s.institute=u,type:"text",class:"input-1",placeholder:"শিক্ষা প্রতিষ্ঠানের নাম"},null,8,ce),[[d,s.institute]]),l(t("input",{"onUpdate:modelValue":u=>s.board=u,type:"text",class:"input-1",placeholder:"বোর্ডের নাম"},null,8,xe),[[d,s.board]])]),t("div",ve,[t("button",{type:"button",class:"bg-red-500 text-white px-4 py-2 rounded mt-2",onClick:u=>A(m)},e[22]||(e[22]=[t("i",{class:"fas fa-trash"},null,-1),C(" যোগ্যতাটি মুছুন ")]),8,ye)])]))),128)),t("div",{class:"flex justify-center"},[t("button",{type:"button",class:"bg-gray-400 text-white px-4 py-2 rounded",onClick:N},e[23]||(e[23]=[t("i",{class:"fas fa-plus-circle pr-2"},null,-1),C("আরো যোগ্যতা যুক্ত করুন ")]))])]),t("div",ge,[e[25]||(e[25]=t("p",{class:"font-bold"},"অভিজ্ঞতা",-1)),e[26]||(e[26]=t("hr",{class:"border-gray-500"},null,-1)),t("div",be,[t("div",null,[l(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>n.experience.duration=s),type:"text",class:"input-1",placeholder:"শিক্ষকতার সময়কাল কত বছর?"},null,512),[[d,n.experience.duration]])]),t("div",null,[l(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>n.experience.books=s),type:"text",class:"input-1",placeholder:"এ বছর কোন কোন কিতাব পড়াচ্ছেন?"},null,512),[[d,n.experience.books]])]),t("div",null,[l(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>n.ex_experience=s),type:"text",class:"input-1",placeholder:"পূর্বে নেগরানীর অভিজ্ঞতা কত বছরের?"},null,512),[[d,n.ex_experience]])])])]),t("div",fe,[e[29]||(e[29]=t("p",{class:"font-bold"},"কর্মরত প্রতিষ্ঠানের তথ্য",-1)),e[30]||(e[30]=t("hr",{class:"border-gray-500"},null,-1)),t("div",Ve,[l(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>y.value=s),class:"input-1"},[e[27]||(e[27]=t("option",{disabled:"",value:""},"অঞ্চল নির্বাচন করুন",-1)),(o(!0),i(c,null,x(b(k).areas,s=>(o(),i("option",{key:s.id,value:s.id},r(s.name),9,Ue))),128))],512),[[p,y.value]]),l(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>n.institute_id=s),class:"input-1"},[e[28]||(e[28]=t("option",{disabled:"",value:""},"মাদরাসা নির্বাচন করুন",-1)),V.value?(o(),i("option",_e,"মাদরাসা লোড হচ্ছে...")):T("",!0),(o(!0),i(c,null,x(b(f).institutesByArea,s=>(o(),i("option",{key:s.id,value:s.id}," ("+r(s.institute_code)+")-"+r(s.name),9,ke))),128))],512),[[p,n.institute_id]]),t("div",null,[l(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>n.student_count=s),type:"text",class:"input-1",placeholder:"পরীক্ষার্থী সংখ্যা"},null,512),[[d,n.student_count]])])])]),t("div",{class:"flex justify-between"},[t("button",{type:"button",onClick:D,class:"bg-gray-500 text-white px-4 py-2 rounded"}," বাতিল করুন "),e[31]||(e[31]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"}," আপডেট করুন ",-1))])],32)]))])}}};export{Le as default};
