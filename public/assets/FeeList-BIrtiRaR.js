import{u as M}from"./fee-rm-vAGzY.js";import{u as B}from"./zamat-CazijuuD.js";import{r as h,B as j,o as L,C as U,d as a,c as n,a as e,t as f,b as w,j as v,N as O,v as y,F,e as V,p as E,O as Z,f as I,L as q,l as P,y as C,k as z,h as D}from"./index-q8lYwX3i.js";const T={class:"card-bg md:p-8 p-4"},G={class:"mb-4 flex gap-4"},H={class:"font-semibold"},J={class:"flex mb-4"},K={key:0},Q={class:"mb-4"},R={class:"mb-4"},W={key:1},X={class:"flex items-center"},Y={class:"ml-2"},A=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],te={class:"mb-4"},le={class:"mb-4"},se={class:"flex justify-center gap-4"},ae=["disabled"],oe={__name:"AddFeeModal",emits:["close","saved"],setup(k,{emit:_}){const r=_,t=h({isSameFee:!0,singleFee:{exam_id:null,amount:0,late_fee:null},zamat_amounts:[],last_date:"",final_date:""}),o=M(),m=j(),p=B(),d=h(!1);L(async()=>{var i;await Promise.all([m.fetchLastExam(),p.fetchZamats()]),m.exam&&(t.value.singleFee.exam_id=m.exam.id),(i=p.zamats)!=null&&i.length&&p.zamats.forEach(l=>{t.value.zamat_amounts.push({zamat_id:l.id,amount:0,late_fee:null})})}),U(()=>t.value.last_date,i=>{t.value.last_date=i?i.toString():""}),U(()=>t.value.final_date,i=>{t.value.final_date=i?i.toString():""});const g=async()=>{d.value=!0;try{const i={exam_id:t.value.singleFee.exam_id,zamat_amounts:t.value.isSameFee?[{zamat_id:null,amount:t.value.singleFee.amount,late_fee:t.value.singleFee.late_fee}]:t.value.zamat_amounts,last_date:t.value.last_date,final_date:t.value.final_date};console.log("Sending Data:",i),await o.createFee(i),r("saved"),r("close")}finally{d.value=!1}};return(i,l)=>{var u;return a(),n("div",T,[l[13]||(l[13]=e("h2",{class:"text-xl font-bold mb-4"},"ফি যুক্ত করুন",-1)),e("form",{onSubmit:E(g,["prevent"])},[e("div",G,[l[6]||(l[6]=e("label",{class:"block mb-2"},"পরীক্ষা:",-1)),e("p",H,f(((u=w(m).exam)==null?void 0:u.name)||"No exam selected"),1)]),e("div",J,[v(e("input",{type:"checkbox",id:"same-fee","onUpdate:modelValue":l[0]||(l[0]=s=>t.value.isSameFee=s)},null,512),[[O,t.value.isSameFee]]),l[7]||(l[7]=e("label",{for:"same-fee",class:"ml-2"},"সকল ক্লাসে একই ফি",-1))]),t.value.isSameFee?(a(),n("div",K,[e("div",Q,[l[8]||(l[8]=e("label",{class:"block mb-2"},"মূল পরিমাণ",-1)),v(e("input",{"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.singleFee.amount=s),type:"number",class:"w-full p-2 border rounded",required:""},null,512),[[y,t.value.singleFee.amount]])]),e("div",R,[l[9]||(l[9]=e("label",{class:"block mb-2"},"অতিরিক্ত পরিমাণ (ঐচ্ছিক)",-1)),v(e("input",{"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.singleFee.late_fee=s),type:"number",class:"w-full p-2 border rounded",placeholder:"Optional"},null,512),[[y,t.value.singleFee.late_fee]])])])):(a(),n("div",W,[l[10]||(l[10]=e("div",{class:"grid grid-cols-3 gap-4 mb-4"},[e("label",{class:"block mb-2"},"মারহালা"),e("label",{class:"block mb-2"},"মূল পরিমাণ"),e("label",{class:"block mb-2"},"অতিরিক্ত পরিমাণ (ঐচ্ছিক)")],-1)),(a(!0),n(F,null,V(t.value.zamat_amounts,(s,c)=>(a(),n("div",{key:c,class:"grid grid-cols-3 gap-4 mb-4"},[e("div",X,[e("label",Y,f(w(p).findNameById(s.zamat_id)),1)]),e("div",null,[v(e("input",{"onUpdate:modelValue":x=>s.amount=x,type:"number",class:"w-full p-2 border rounded",required:""},null,8,A),[[y,s.amount]])]),e("div",null,[v(e("input",{"onUpdate:modelValue":x=>s.late_fee=x,type:"number",class:"w-full p-2 border rounded",placeholder:"Optional"},null,8,ee),[[y,s.late_fee]])])]))),128))])),e("div",te,[l[11]||(l[11]=e("label",{class:"block mb-2"},"শেষ তারিখ",-1)),v(e("input",{"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.last_date=s),type:"date",class:"w-full p-2 border rounded",required:""},null,512),[[y,t.value.last_date]])]),e("div",le,[l[12]||(l[12]=e("label",{class:"block mb-2"},"চূড়ান্ত তারিখ",-1)),v(e("input",{"onUpdate:modelValue":l[4]||(l[4]=s=>t.value.final_date=s),type:"date",class:"w-full p-2 border rounded",required:""},null,512),[[y,t.value.final_date]])]),e("div",se,[e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",disabled:d.value}," Save ",8,ae),e("button",{type:"button",onClick:l[5]||(l[5]=s=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])}}},ne={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 p-4"},de={class:"card-bg md:p-8 p-4 w-full md:w-1/2 max-h-screen overflow-y-auto"},ie={class:"title-lg"},ue={key:0,class:"flex justify-center items-center py-8"},re={class:"mb-4"},ce={class:"flex items-center"},me={class:"ml-2"},pe=["onUpdate:modelValue"],be=["onUpdate:modelValue"],fe={class:"mb-4"},_e={class:"mb-4"},ve={class:"flex flex-col md:flex-row justify-center gap-4"},xe={__name:"EditFeeModal",props:{fee:Object},emits:["close","updated"],setup(k,{emit:_}){const r=_,t=k,o=Z({exam_id:null,zamat_amounts:[],last_date:"",final_date:""}),m=M(),p=j(),d=B(),g=h(!0),i=u=>{u&&(o.exam_id=u.exam_id||null,o.zamat_amounts=u.zamat_amounts||[],o.last_date=u.last_date||"",o.final_date=u.final_date||"")};U(()=>t.fee,u=>{i(u)},{immediate:!0}),L(async()=>{g.value=!0;try{await Promise.all([p.fetchExams(),d.fetchZamats()]),i(t.fee)}finally{g.value=!1}});const l=async()=>{const u={exam_id:o.exam_id,zamat_amounts:o.zamat_amounts,last_date:o.last_date,final_date:o.final_date};await m.updateFee(t.fee.id,u),r("updated"),r("close")};return(u,s)=>(a(),n("div",ne,[e("div",de,[e("h2",ie,f(k.fee.exam.name)+"-এর ফি সম্পাদনা",1),g.value?(a(),n("div",ue,[I(q,{class:"shadow-none"})])):(a(),n("form",{key:1,onSubmit:E(l,["prevent"])},[e("div",re,[s[3]||(s[3]=P('<h3 class="text-lg font-bold mb-2">মারহালা অনুযায়ী ফি</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><label class="block">মারহালা</label><label class="block">মূল পরিমাণ</label><label class="block">অতিরিক্ত পরিমাণ (ঐচ্ছিক)</label></div>',2)),(a(!0),n(F,null,V(o.zamat_amounts,(c,x)=>(a(),n("div",{key:x,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},[e("div",ce,[e("label",me,f(w(d).findNameById(c.zamat_id)||"সকল মারহালা"),1)]),e("div",null,[v(e("input",{"onUpdate:modelValue":b=>c.amount=b,type:"number",class:"w-full p-2 border rounded",required:""},null,8,pe),[[y,c.amount]])]),e("div",null,[v(e("input",{"onUpdate:modelValue":b=>c.late_fee=b,type:"number",class:"w-full p-2 border rounded",placeholder:"Optional"},null,8,be),[[y,c.late_fee]])])]))),128))]),e("div",fe,[s[4]||(s[4]=e("label",{class:"block mb-2"},"শেষ তারিখ",-1)),v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>o.last_date=c),type:"date",class:"w-full p-2 border rounded",required:""},null,512),[[y,o.last_date]])]),e("div",_e,[s[5]||(s[5]=e("label",{class:"block mb-2"},"চূড়ান্ত তারিখ",-1)),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>o.final_date=c),type:"date",class:"w-full p-2 border rounded",required:""},null,512),[[y,o.final_date]])]),e("div",ve,[s[6]||(s[6]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:s[2]||(s[2]=c=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32))])]))}},ye={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ge={class:"card-bg p-4 md:p-8"},he={class:"flex justify-end mt-4"},ke={__name:"DeleteFeeModal",props:{fee:{type:Object,required:!0}},emits:["close","deleted"],setup(k,{emit:_}){const r=_,t=k,o=M(),m=async()=>{await o.deleteFee(t.fee.id),r("deleted"),r("close")};return(p,d)=>(a(),n("div",ye,[e("div",ge,[d[3]||(d[3]=e("h2",{class:"text-xl font-bold mb-4"},"ডিলেট ফি",-1)),e("p",null,[d[1]||(d[1]=C("আপনি কি (")),e("b",null,f(k.fee.exam.name),1),d[2]||(d[2]=C(")-এর এই ফি ডিলিট করতে চান?"))]),e("div",he,[e("button",{onClick:d[0]||(d[0]=g=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),e("button",{onClick:m,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])]))}},$e={class:"my-container space-y-4"},we={key:2},Se={key:0,class:"space-y-4"},Fe={class:"title-lg"},ze={class:"md:flex gap-4"},Ve={class:"flex gap-4"},Ce=["onClick"],Me=["onClick"],De={class:"min-w-full table-auto border"},Ue={class:"text-gray-700 text-sm font-light"},Be={class:"py-3 px-4 text-left"},Le={class:"py-3 px-4 text-left"},Ne={class:"py-3 px-4 text-left"},je={class:"py-3 px-4 text-left"},Ee={key:1,class:"text-center text-red-500 py-4"},Ie={__name:"FeeList",setup(k){const _=M(),r=B(),t=h(!1),o=h(!1),m=h(!1),p=h(null),d=h(!0),g=()=>t.value=!0,i=async()=>{t.value=!1,await _.fetchFees()},l=x=>{p.value=x,o.value=!0},u=async()=>{o.value=!1,await _.fetchFees()},s=x=>{p.value=x,m.value=!0},c=()=>m.value=!1;return L(async()=>{try{await Promise.all([_.fetchFees(),r.fetchZamats()])}finally{d.value=!1}}),(x,b)=>(a(),n(F,null,[e("div",$e,[e("div",{class:"flex justify-between items-center"},[b[0]||(b[0]=e("h1",{class:"title-lg"},"ফি তালিকা",-1)),e("button",{class:"btn-2",onClick:g},"ফি যুক্ত করুন")]),t.value?(a(),z(oe,{key:0,class:"z-40",onClose:i})):D("",!0),d.value?(a(),z(q,{key:1})):(a(),n("div",we,[w(_).fees.length?(a(),n("div",Se,[(a(!0),n(F,null,V([...w(_).fees].reverse(),$=>(a(),n("div",{key:$.id,class:"card-bg md:p-8 p-4"},[e("div",null,[e("h4",Fe,f($.exam.name),1),e("div",ze,[e("p",null,"শেষ তারিখ: "+f(new Date($.last_date).toLocaleDateString("bn-BD"))+" ইং",1),e("p",null,"চূড়ান্ত তারিখ: "+f(new Date($.final_date).toLocaleDateString("bn-BD"))+" ইং",1),e("div",Ve,[e("button",{onClick:S=>l($),class:"text-blue-600 hover:text-blue-800"},b[1]||(b[1]=[e("i",{class:"fas fa-edit"},null,-1),C(" সম্পাদনা ")]),8,Ce),e("button",{onClick:S=>s($),class:"text-red-600 hover:text-red-800"},b[2]||(b[2]=[e("i",{class:"fas fa-trash"},null,-1),C(" মুছুন ")]),8,Me)])])]),e("table",De,[b[3]||(b[3]=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"ক্র"),e("th",{class:"py-3 px-4 text-left"},"মারহালা"),e("th",{class:"py-3 px-4 text-left"},"ফি"),e("th",{class:"py-3 px-4 text-left"},"বর্ধিত")])],-1)),e("tbody",Ue,[(a(!0),n(F,null,V($.zamat_amounts,(S,N)=>(a(),n("tr",{key:N,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",Be,f((N+1).toLocaleString("bn-BD")),1),e("td",Le,f(w(r).findNameById(S.zamat_id)||"সকল মারহালা"),1),e("td",Ne,f(S.amount),1),e("td",je,f(S.late_fee),1)]))),128))])])]))),128))])):(a(),n("div",Ee,"No fees found"))]))]),o.value?(a(),z(xe,{key:0,class:"z-50",fee:p.value,onClose:u},null,8,["fee"])):D("",!0),m.value?(a(),z(ke,{key:1,class:"z-50",fee:p.value,onClose:c},null,8,["fee"])):D("",!0)],64))}};export{Ie as default};
