import{_ as W,r as v,i as _,o as C,c as o,a as t,n as m,y as b,t as r,F as p,e as h,h as g,q,d as a,s as z}from"./index-BXAMF6o-.js";import{u as L}from"./institute-DxQAmFCI.js";const R={class:"my-container"},j={class:"flex justify-center gap-2 p-2 rounded"},B={class:"card-bg md:p-8 p-4 min-h-[calc(80vh_-_200px)]"},S={key:0,class:"flex justify-center items-center p-12"},V={key:1},F={key:0},P={class:"print:hidden mb-3 text-sm flex flex-wrap gap-4"},T={class:"inline-flex items-center gap-2 rounded border px-3 py-1"},$={class:"inline-flex items-center gap-2 rounded border px-3 py-1"},D={class:"overflow-x-auto"},E={class:"table-auto w-full text-left"},M={class:"odd:bg-white even:bg-gray-50 print:break-inside-avoid"},U={class:"border px-4 py-2"},G={class:"border px-4 py-2"},H={class:"border px-4 py-2"},J={class:"border px-4 py-2 text-center font-semibold"},K={class:"print:break-inside-avoid"},O={class:"border px-4 py-2 bg-gray-50 text-sm",colspan:"4"},Q={class:"flex flex-wrap gap-2"},X=["title"],Y={class:"truncate max-w-[16ch]"},Z={key:1,class:"text-gray-500"},tt={key:0},et={class:"bg-gray-100 font-semibold"},st={class:"border px-4 py-2 text-center"},ot={key:1},at={class:"overflow-x-auto"},rt={class:"table-auto w-full text-left"},nt={class:"border px-4 py-2"},it={class:"border px-4 py-2"},lt={class:"border px-4 py-2"},dt={__name:"InstituteApplications",setup(ct){const l=L(),f=q(),y=z(),n=v("registered"),i=v(!1),u=_(()=>l.institutesWithApplications||[]),w=_(()=>l.institutesWithoutApplications||[]),x=_(()=>u.value.reduce((d,e)=>d+Number((e==null?void 0:e.total_students)||0),0));C(async()=>{const d=f.query.tab||"registered";n.value=d,i.value=!0,d==="registered"?await l.fetchInstitutesWithApplications():d==="unregistered"&&await l.fetchInstitutesWithoutApplications(),i.value=!1});const k=async()=>{n.value="registered",i.value=!0,await l.fetchInstitutesWithApplications(),i.value=!1,y.push({query:{tab:"registered"}})},A=async()=>{n.value="unregistered",i.value=!0,await l.fetchInstitutesWithoutApplications(),i.value=!1,y.push({query:{tab:"unregistered"}})},I=()=>window.print();return(d,e)=>(a(),o("div",R,[t("div",j,[t("button",{id:"registered-button",class:m(["btn-1",{"btn-2":n.value==="registered"}]),onClick:k}," নিবন্ধনপত্র জমা দিয়েছে ",2),t("button",{id:"unregistered-button",class:m(["btn-1",{"btn-2":n.value==="unregistered"}]),onClick:A}," নিবন্ধনপত্র জমা দেয়নি ",2)]),t("div",{class:"flex justify-center print:hidden py-2"},[t("button",{onClick:I,class:"btn-3"},"Print")]),t("div",B,[i.value?(a(),o("div",S,e[0]||(e[0]=[t("div",{class:"loader"},null,-1)]))):(a(),o("div",V,[n.value==="registered"?(a(),o("div",F,[e[6]||(e[6]=t("h4",{class:"title-lg text-center mb-2"},"যে সকল মাদরাসা নিবন্ধন জমা দিয়েছে",-1)),t("div",P,[t("span",T,[e[1]||(e[1]=b(" মোট মাদরাসা: ")),t("b",null,r(u.value.length),1)]),t("span",$,[e[2]||(e[2]=b(" মোট শিক্ষার্থী: ")),t("b",null,r(x.value),1)])]),t("div",D,[t("table",E,[e[5]||(e[5]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"border px-4 py-2 whitespace-nowrap"},"ইলহাক"),t("th",{class:"border px-4 py-2 whitespace-nowrap"},"মাদরাসার নাম"),t("th",{class:"border px-4 py-2 whitespace-nowrap"},"ফোন"),t("th",{class:"border px-4 py-2 text-center whitespace-nowrap"},"মোট শিক্ষার্থী")])],-1)),t("tbody",null,[(a(!0),o(p,null,h(u.value,s=>(a(),o(p,{key:s.id},[t("tr",M,[t("td",U,r(s.institute_code),1),t("td",G,r(s.name),1),t("td",H,r(s.phone),1),t("td",J,r(s.total_students??(s.zamats||[]).reduce((c,N)=>c+Number(N.students||0),0)),1)]),t("tr",K,[t("td",O,[t("div",Q,[(s.zamats||[]).length?(a(!0),o(p,{key:0},h(s.zamats,c=>(a(),o("span",{key:`${s.id}-${c.zamat_id}`,class:"inline-flex items-center gap-2 pill",title:c.zamat_name},[t("span",Y,r(c.zamat_name),1),e[3]||(e[3]=b(": ")),t("b",null,r(Number(c.students||0)),1)],8,X))),128)):(a(),o("span",Z,"কোনো জামাতভিত্তিক তথ্য নেই"))])])])],64))),128))]),u.value.length?(a(),o("tfoot",tt,[t("tr",et,[e[4]||(e[4]=t("td",{class:"border px-4 py-2 text-right",colspan:"3"},"মোট",-1)),t("td",st,r(x.value),1)])])):g("",!0)])])])):g("",!0),n.value==="unregistered"?(a(),o("div",ot,[e[8]||(e[8]=t("h4",{class:"title-lg text-center mb-6"},"যে সকল মাদরাসা নিবন্ধন জমা দেয়নি",-1)),t("div",at,[t("table",rt,[e[7]||(e[7]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"border px-4 py-2"},"ইলহাক"),t("th",{class:"border px-4 py-2"},"মাদরাসার নাম"),t("th",{class:"border px-4 py-2"},"ফোন")])],-1)),t("tbody",null,[(a(!0),o(p,null,h(w.value,s=>(a(),o("tr",{key:s.id,class:"odd:bg-white even:bg-gray-50"},[t("td",nt,r(s.institute_code),1),t("td",it,r(s.name),1),t("td",lt,r(s.phone),1)]))),128))])])])])):g("",!0)]))])]))}},_t=W(dt,[["__scopeId","data-v-cfd5cae6"]]);export{_t as default};
