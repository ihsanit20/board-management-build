import{H as E,o as A,a,c as d,b as e,w as B,i as c,v as S,z as $,F as V,m as C,t as _,d as f,D as k,q as y,s as I,r as x,I as U,j,y as N,e as K}from"./index-DDuwzY18.js";import{u as M}from"./institute-CTY5MPyn.js";import{u as q}from"./area-D3RczJB-.js";const Q={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},W={class:"card-bg md:p-8 p-4 md:w-1/2"},X=e("h2",{class:"text-xl font-bold mb-4"},"মাদরাসা নিবন্ধন করুন",-1),Y={class:"mb-4"},Z=e("label",{class:"block mb-2"},"নাম",-1),ee={class:"mb-4"},te=e("label",{class:"block mb-2"},"ফোন",-1),se={class:"mb-4"},oe=e("label",{class:"block mb-2"},"অঞ্চল",-1),le=["value"],ne={class:"mb-4"},ae=e("label",{class:"block mb-2"},"পরীক্ষার কেন্দ্র কিনা?",-1),ie={class:"inline-flex items-center"},de={class:"inline-flex items-center ml-4"},ce={class:"flex justify-center gap-4"},re=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1),ue={__name:"AddInstituteModal",emits:["close","saved"],setup(g,{emit:u}){const r=u,i=E({name:"",phone:"",area_id:null,is_active:!0,is_center:!1}),o=M(),m=q();A(async()=>{await m.fetchAreas()});const b=async()=>{await o.createInstitute(i),r("saved"),r("close")};return(p,s)=>(a(),d("div",Q,[e("div",W,[X,e("form",{onSubmit:B(b,["prevent"])},[e("div",Y,[Z,c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>i.name=t),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[S,i.name]])]),e("div",ee,[te,c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.phone=t),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[S,i.phone]])]),e("div",se,[oe,c(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>i.area_id=t),class:"w-full p-2 border rounded",required:""},[(a(!0),d(V,null,C(f(m).areas,t=>(a(),d("option",{key:t.id,value:t.id},_(t.name),9,le))),128))],512),[[$,i.area_id]])]),e("div",ne,[ae,e("div",null,[e("label",ie,[c(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=t=>i.is_center=t),value:!0,class:"mr-2"},null,512),[[k,i.is_center]]),y(" হ্যাঁ ")]),e("label",de,[c(e("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=t=>i.is_center=t),value:!1,class:"mr-2"},null,512),[[k,i.is_center]]),y(" না ")])])]),e("div",ce,[re,e("button",{type:"button",onClick:s[5]||(s[5]=t=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},_e={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},pe={class:"card-bg md:p-8 p-4 md:w-1/2"},me=e("h2",{class:"text-xl font-bold mb-4"},"মাদরাসা নিবন্ধন সম্পাদনা",-1),be={class:"mb-4"},ve=e("label",{class:"block mb-2"},"নাম",-1),he={class:"mb-4"},xe=e("label",{class:"block mb-2"},"ফোন",-1),fe={class:"mb-4"},ye=e("label",{class:"block mb-2"},"অঞ্চল",-1),ge=e("option",{value:"",disabled:""},"অঞ্চল নির্বাচন করুন",-1),$e=["value"],ke={class:"mb-4"},we=e("label",{class:"block mb-2"},"এটি কি একটিভ আছে?",-1),Ve={class:"inline-flex items-center"},Ce={class:"inline-flex items-center ml-4"},Se={class:"mb-4"},Me=e("label",{class:"block mb-2"},"পরীক্ষার কেন্দ্র কিনা?",-1),Ue={class:"inline-flex items-center"},je={class:"inline-flex items-center ml-4"},Ie={class:"flex justify-center gap-4"},Ae=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1),qe={__name:"EditInstituteModal",props:{institute:Object},emits:["close","updated"],setup(g,{emit:u}){const r=u,i=g,o=E({name:"",phone:"",area_id:null,is_active:!0,is_center:!0}),m=M(),b=q();A(async()=>{await b.fetchAreas()}),I(()=>i.institute,s=>{o.name=s.name||"",o.phone=s.phone||"",o.area_id=s.area_id||null,o.is_active=s.is_active,o.is_center=s.is_center},{immediate:!0});const p=async()=>{await m.updateInstitute(i.institute.id,o),r("updated"),r("close")};return(s,t)=>(a(),d("div",_e,[e("div",pe,[me,e("form",{onSubmit:B(p,["prevent"])},[e("div",be,[ve,c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.name=n),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[S,o.name]])]),e("div",he,[xe,c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.phone=n),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[S,o.phone]])]),e("div",fe,[ye,c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.area_id=n),class:"w-full p-2 border rounded",required:""},[ge,(a(!0),d(V,null,C(f(b).areas,n=>(a(),d("option",{key:n.id,value:n.id},_(n.name),9,$e))),128))],512),[[$,o.area_id]])]),e("div",ke,[we,e("div",null,[e("label",Ve,[c(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=n=>o.is_active=n),value:"1",class:"mr-2",name:"active"},null,512),[[k,o.is_active]]),y(" হ্যাঁ ")]),e("label",Ce,[c(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=n=>o.is_active=n),value:"0",class:"mr-2",name:"active"},null,512),[[k,o.is_active]]),y(" না ")])])]),e("div",Se,[Me,e("div",null,[e("label",Ue,[c(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=n=>o.is_center=n),value:"1",class:"mr-2",name:"center"},null,512),[[k,o.is_center]]),y(" হ্যাঁ ")]),e("label",je,[c(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=n=>o.is_center=n),value:"0",class:"mr-2",name:"center"},null,512),[[k,o.is_center]]),y(" না ")])])]),e("div",Ie,[Ae,e("button",{type:"button",onClick:t[7]||(t[7]=n=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},ze={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},De={class:"card-bg p-4 md:p-8"},Ne=e("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মাদরাসা",-1),Ee={class:"flex justify-end mt-4"},Be={__name:"DeleteInstituteModal",props:{institute:{type:Object,required:!0}},emits:["close","deleted"],setup(g,{emit:u}){const r=u,i=g,o=M(),m=async()=>{await o.deleteInstitute(i.institute.id),r("deleted"),r("close")};return(b,p)=>(a(),d("div",ze,[e("div",De,[Ne,e("p",null,[y("আপনি কি ("),e("b",null,_(g.institute.name),1),y(") ডিলিট করতে চান?")]),e("div",Ee,[e("button",{onClick:p[0]||(p[0]=s=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),e("button",{onClick:m,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])]))}},Pe={class:"space-y-2 p-4"},Fe={class:"flex justify-between items-center"},Le=e("h1",{class:"title-lg"},"মাদরাসা তালিকা",-1),Oe={class:"flex items-center gap-4"},Te=e("label",{for:"pageSize",class:"text-sm"},"ডাটা সংখ্যা:",-1),He=K('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5),Re=[He],Ge={key:0,class:"flex justify-center items-center"},Je=e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1),Ke=[Je],Qe={key:1,class:"overflow-x-auto"},We={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},Xe={class:"bg-gray-200 text-gray-700 text-sm leading-normal"},Ye=e("th",{class:"py-3 px-2 text-left"},"#",-1),Ze=e("th",{class:"py-3 px-2 text-left"},"ইলহাক",-1),et=e("th",{class:"py-3 px-2 text-left"},"নাম",-1),tt=e("th",{class:"py-3 px-2 text-left"},"ফোন",-1),st={class:"py-3 px-2 text-left"},ot=e("option",{value:""},"-সকল অঞ্চল-",-1),lt=["value"],nt={class:"py-3 px-2 text-center"},at=e("option",{value:""},"-কেন্দ্র কিনা-",-1),it=e("option",{value:1},"পরীক্ষা কেন্দ্র",-1),dt=e("option",{value:0},"কেন্দ্র নয়",-1),ct=[at,it,dt],rt=e("th",{class:"py-3 px-2 text-center"},"সক্রিয়",-1),ut=e("th",{class:"py-3 px-2 text-center"},"একশন",-1),_t={class:"text-gray-600 text-sm font-light"},pt={class:"py-3 px-2 text-left whitespace-nowrap"},mt={class:"flex items-center"},bt={class:"mr-2"},vt={key:0,class:"font-medium"},ht={key:1,class:"font-medium"},xt={class:"py-3 px-2 text-left"},ft={class:"title-md"},yt={class:"py-3 px-2 text-left"},gt={class:"title-md"},$t={class:"py-3 px-2 text-left"},kt={class:"py-3 px-2 text-left"},wt={class:"py-3 px-2 text-center"},Vt={class:"py-3 px-2 text-center"},Ct={class:"py-3 px-2 text-center"},St={class:"flex item-center justify-center gap-4"},Mt=["onClick"],Ut=e("i",{class:"fas fa-edit"},null,-1),jt=[Ut],It=["onClick"],At=e("i",{class:"fas fa-trash"},null,-1),qt=[At],zt={key:1},Dt=e("td",{colspan:"8",class:"text-center text-red-500 py-4"},"No institutes found",-1),Nt=[Dt],Et={class:"flex justify-between items-center mt-4"},Bt=["disabled"],Pt={class:"flex space-x-1"},Ft=["disabled"],Ht={__name:"InstituteList",setup(g){const u=M(),r=q(),i=x(!1),o=x(!1),m=x(!1),b=x(null),p=x(15),s=x(1),t=x(""),n=x(""),P=()=>i.value=!0,F=async()=>{i.value=!1,await w()},L=v=>{b.value=v,o.value=!0},O=async()=>{o.value=!1,await w()},T=v=>{b.value=v,m.value=!0},H=()=>m.value=!1,R=()=>{s.value<u.pagination.last_page&&(s.value+=1)},G=()=>{s.value>1&&(s.value-=1)};I(s,async()=>{await w()}),I([p,t,n],()=>{s.value===1?w():s.value=1}),A(async()=>{await w(),await r.fetchAreas()});const w=async()=>{const v={page:s.value,per_page:p.value};t.value&&(v.area_id=t.value),n.value!==""&&(v.is_center=n.value),await u.fetchInstitutes(v)};return(v,h)=>{var z;return a(),d("div",Pe,[e("div",Fe,[Le,e("div",Oe,[Te,c(e("select",{id:"pageSize","onUpdate:modelValue":h[0]||(h[0]=l=>p.value=l),class:"border rounded px-2 py-1"},Re,512),[[$,p.value]]),e("button",{class:"btn-2",onClick:P},"নিবন্ধন করুন")])]),f(u).loading?(a(),d("div",Ge,Ke)):(a(),d("div",Qe,[e("table",We,[e("thead",null,[e("tr",Xe,[Ye,Ze,et,tt,e("th",st,[c(e("select",{"onUpdate:modelValue":h[1]||(h[1]=l=>t.value=l)},[ot,(a(!0),d(V,null,C(f(r).areas,l=>(a(),d("option",{key:l.id,value:l.id},_(l.name),9,lt))),128))],512),[[$,t.value]])]),e("th",nt,[c(e("select",{"onUpdate:modelValue":h[2]||(h[2]=l=>n.value=l)},ct,512),[[$,n.value]])]),rt,ut])]),e("tbody",_t,[(z=f(u).institutes)!=null&&z.length?(a(!0),d(V,{key:0},C(f(u).institutes,(l,D)=>(a(),d("tr",{key:l.id,class:"border-b border-gray-200 hover:bg-gray-100"},[e("td",pt,[e("div",mt,[e("div",bt,[p.value==="all"?(a(),d("p",vt,_(D+1),1)):(a(),d("p",ht,_((s.value-1)*p.value+D+1),1))])])]),e("td",xt,[e("p",ft,_(l.institute_code),1)]),e("td",yt,[e("p",gt,_(l.name),1)]),e("td",$t,[e("p",null,_(l.phone),1)]),e("td",kt,[e("p",null,_(l.area?l.area.name:"Unknown Area"),1)]),e("td",wt,[e("span",{class:N([l.is_center?"bg-green-200 text-green-700":"bg-red-200 text-red-700","py-1 px-3 rounded-full text-xs"])},_(l.is_center?"পরীক্ষা কেন্দ্র":"কেন্দ্র নয়"),3)]),e("td",Vt,[e("span",{class:N([l.is_active?"bg-green-200 text-green-700":"bg-red-200 text-red-700","py-1 px-3 rounded-full text-xs"])},_(l.is_active?"সক্রিয়":"নিষ্ক্রিয়"),3)]),e("td",Ct,[e("div",St,[e("button",{onClick:J=>L(l),class:"text-blue-600 hover:text-blue-800"},jt,8,Mt),e("button",{onClick:J=>T(l),class:"text-red-600 hover:text-red-800"},qt,8,It)])])]))),128)):(a(),d("tr",zt,Nt))])])])),e("div",Et,[e("button",{class:"btn-1",disabled:s.value===1,onClick:G},"Prev",8,Bt),e("div",Pt,[c(e("select",{"onUpdate:modelValue":h[3]||(h[3]=l=>s.value=l),class:"btn-1"},[(a(!0),d(V,null,C(f(u).pagination.last_page,l=>(a(),d("option",{key:l},_(l),1))),128))],512),[[$,s.value]])]),e("button",{class:"btn-1",disabled:s.value===f(u).pagination.last_page,onClick:R}," Next ",8,Ft)]),i.value?(a(),U(ue,{key:2,class:"z-40",onClose:F})):j("",!0),o.value?(a(),U(qe,{key:3,class:"z-40",institute:b.value,onClose:O},null,8,["institute"])):j("",!0),m.value?(a(),U(Be,{key:4,class:"z-40",institute:b.value,onClose:H},null,8,["institute"])):j("",!0)])}}};export{Ht as default};
