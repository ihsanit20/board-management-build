import{O as E,o as h,d as a,c as r,a as e,p as B,j as p,v as M,D as w,F as S,e as C,t as b,b as y,S as $,y as g,C as I,r as f,l as H,k as A,h as U,n as N}from"./index-B7fQsvqV.js";import{u as j}from"./institute-BbNDp4KL.js";import{u as z}from"./area-CHiJDjua.js";const J={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},K={class:"card-bg md:p-8 p-4 md:w-1/2"},Q={class:"mb-4"},W={class:"mb-4"},X={class:"mb-4"},Y=["value"],Z={class:"mb-4"},ee={class:"inline-flex items-center"},te={class:"inline-flex items-center ml-4"},se={class:"flex justify-center gap-4"},le={__name:"AddInstituteModal",emits:["close","saved"],setup(_,{emit:c}){const m=c,d=E({name:"",phone:"",area_id:null,is_active:!0,is_center:!1}),o=j(),v=z();h(async()=>{await v.fetchAreas()});const x=async()=>{await o.createInstitute(d),m("saved"),m("close")};return(u,s)=>(a(),r("div",J,[e("div",K,[s[13]||(s[13]=e("h2",{class:"text-xl font-bold mb-4"},"মাদরাসা নিবন্ধন করুন",-1)),e("form",{onSubmit:B(x,["prevent"])},[e("div",Q,[s[6]||(s[6]=e("label",{class:"block mb-2"},"নাম",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.name=t),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[M,d.name]])]),e("div",W,[s[7]||(s[7]=e("label",{class:"block mb-2"},"ফোন",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>d.phone=t),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[M,d.phone]])]),e("div",X,[s[8]||(s[8]=e("label",{class:"block mb-2"},"অঞ্চল",-1)),p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>d.area_id=t),class:"w-full p-2 border rounded",required:""},[(a(!0),r(S,null,C(y(v).areas,t=>(a(),r("option",{key:t.id,value:t.id},b(t.name),9,Y))),128))],512),[[w,d.area_id]])]),e("div",Z,[s[11]||(s[11]=e("label",{class:"block mb-2"},"পরীক্ষার কেন্দ্র কিনা?",-1)),e("div",null,[e("label",ee,[p(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=t=>d.is_center=t),value:!0,class:"mr-2"},null,512),[[$,d.is_center]]),s[9]||(s[9]=g(" হ্যাঁ "))]),e("label",te,[p(e("input",{type:"radio","onUpdate:modelValue":s[4]||(s[4]=t=>d.is_center=t),value:!1,class:"mr-2"},null,512),[[$,d.is_center]]),s[10]||(s[10]=g(" না "))])])]),e("div",se,[s[12]||(s[12]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:s[5]||(s[5]=t=>m("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},oe={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ne={class:"card-bg md:p-8 p-4 md:w-1/2"},ie={class:"mb-4"},ae={class:"mb-4"},de={class:"mb-4"},re=["value"],ue={class:"mb-4"},pe={class:"inline-flex items-center"},me={class:"inline-flex items-center ml-4"},ce={class:"mb-4"},be={class:"inline-flex items-center"},ve={class:"inline-flex items-center ml-4"},xe={class:"flex justify-center gap-4"},fe={__name:"EditInstituteModal",props:{institute:Object},emits:["close","updated"],setup(_,{emit:c}){const m=c,d=_,o=E({name:"",phone:"",area_id:null,is_active:!0,is_center:!0}),v=j(),x=z();h(async()=>{await x.fetchAreas()}),I(()=>d.institute,s=>{o.name=s.name||"",o.phone=s.phone||"",o.area_id=s.area_id||null,o.is_active=s.is_active,o.is_center=s.is_center},{immediate:!0});const u=async()=>{await v.updateInstitute(d.institute.id,o),m("updated"),m("close")};return(s,t)=>(a(),r("div",oe,[e("div",ne,[t[19]||(t[19]=e("h2",{class:"text-xl font-bold mb-4"},"মাদরাসা নিবন্ধন সম্পাদনা",-1)),e("form",{onSubmit:B(u,["prevent"])},[e("div",ie,[t[8]||(t[8]=e("label",{class:"block mb-2"},"নাম",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.name=i),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[M,o.name]])]),e("div",ae,[t[9]||(t[9]=e("label",{class:"block mb-2"},"ফোন",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>o.phone=i),type:"text",class:"w-full p-2 border rounded"},null,512),[[M,o.phone]])]),e("div",de,[t[11]||(t[11]=e("label",{class:"block mb-2"},"অঞ্চল",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>o.area_id=i),class:"w-full p-2 border rounded",required:""},[t[10]||(t[10]=e("option",{value:"",disabled:""},"অঞ্চল নির্বাচন করুন",-1)),(a(!0),r(S,null,C(y(x).areas,i=>(a(),r("option",{key:i.id,value:i.id},b(i.name),9,re))),128))],512),[[w,o.area_id]])]),e("div",ue,[t[14]||(t[14]=e("label",{class:"block mb-2"},"এটি কি একটিভ আছে?",-1)),e("div",null,[e("label",pe,[p(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=i=>o.is_active=i),value:!0,class:"mr-2",name:"active"},null,512),[[$,o.is_active]]),t[12]||(t[12]=g(" হ্যাঁ "))]),e("label",me,[p(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=i=>o.is_active=i),value:!1,class:"mr-2",name:"active"},null,512),[[$,o.is_active]]),t[13]||(t[13]=g(" না "))])])]),e("div",ce,[t[17]||(t[17]=e("label",{class:"block mb-2"},"পরীক্ষার কেন্দ্র কিনা?",-1)),e("div",null,[e("label",be,[p(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=i=>o.is_center=i),value:!0,class:"mr-2",name:"center"},null,512),[[$,o.is_center]]),t[15]||(t[15]=g(" হ্যাঁ "))]),e("label",ve,[p(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=i=>o.is_center=i),value:!1,class:"mr-2",name:"center"},null,512),[[$,o.is_center]]),t[16]||(t[16]=g(" না "))])])]),e("div",xe,[t[18]||(t[18]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[7]||(t[7]=i=>m("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},ye={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ge={class:"card-bg p-4 md:p-8"},_e={class:"flex justify-end mt-4"},ke={__name:"DeleteInstituteModal",props:{institute:{type:Object,required:!0}},emits:["close","deleted"],setup(_,{emit:c}){const m=c,d=_,o=j(),v=async()=>{await o.deleteInstitute(d.institute.id),m("deleted"),m("close")};return(x,u)=>(a(),r("div",ye,[e("div",ge,[u[3]||(u[3]=e("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মাদরাসা",-1)),e("p",null,[u[1]||(u[1]=g("আপনি কি (")),e("b",null,b(_.institute.name),1),u[2]||(u[2]=g(") ডিলিট করতে চান?"))]),e("div",_e,[e("button",{onClick:u[0]||(u[0]=s=>m("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),e("button",{onClick:v,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])]))}},we={class:"space-y-2 p-4"},$e={class:"flex justify-between items-center"},Ve={class:"flex items-center gap-4"},Se={key:0,class:"flex justify-center items-center"},Ce={key:1,class:"overflow-x-auto"},Ue={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},Me={class:"bg-gray-200 text-gray-700 text-sm leading-normal"},je={class:"py-3 px-2 text-left"},Ae=["value"],Ie={class:"py-3 px-2 text-center"},he={class:"text-gray-600 text-sm font-light"},ze={class:"py-3 px-2 text-left whitespace-nowrap"},De={class:"flex items-center"},qe={class:"mr-2"},Ne={key:0,class:"font-medium"},Ee={key:1,class:"font-medium"},Be={class:"py-3 px-2 text-left"},Oe={class:"title-md"},Pe={class:"py-3 px-2 text-left"},Fe={class:"title-md"},Le={class:"py-3 px-2 text-left"},Te={class:"py-3 px-2 text-left"},Re={class:"py-3 px-2 text-center"},Ge={class:"py-3 px-2 text-center print:hidden"},He={class:"py-3 px-2 text-center print:hidden"},Je={class:"flex item-center justify-center gap-4"},Ke=["onClick"],Qe={key:1},We={class:"flex justify-between items-center mt-4"},Xe=["disabled"],Ye={class:"flex space-x-1"},Ze=["disabled"],ot={__name:"InstituteList",setup(_){const c=j(),m=z(),d=f(!1),o=f(!1),v=f(!1),x=f(null),u=f(15),s=f(1),t=f(""),i=f(""),O=()=>d.value=!0,P=async()=>{d.value=!1,await V()},F=k=>{x.value=k,o.value=!0},L=async()=>{o.value=!1,await V()},T=()=>v.value=!1,R=()=>{s.value<c.pagination.last_page&&(s.value+=1)},G=()=>{s.value>1&&(s.value-=1)};I(s,async()=>{await V()}),I([u,t,i],()=>{s.value===1?V():s.value=1}),h(async()=>{await V(),await m.fetchAreas()});const V=async()=>{const k={page:s.value,per_page:u.value};t.value&&(k.area_id=t.value),i.value!==""&&(k.is_center=i.value),await c.fetchInstitutes(k)};return(k,l)=>{var D;return a(),r("div",we,[e("div",$e,[l[6]||(l[6]=e("h1",{class:"title-lg"},"মাদরাসা তালিকা",-1)),e("div",Ve,[l[5]||(l[5]=e("label",{for:"pageSize",class:"text-sm"},"ডাটা সংখ্যা:",-1)),p(e("select",{id:"pageSize","onUpdate:modelValue":l[0]||(l[0]=n=>u.value=n),class:"border rounded px-2 py-1"},l[4]||(l[4]=[H('<option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option><option value="all">All</option>',5)]),512),[[w,u.value]]),e("button",{class:"btn-2",onClick:O},"নিবন্ধন করুন")])]),y(c).loading?(a(),r("div",Se,l[7]||(l[7]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):(a(),r("div",Ce,[e("table",Ue,[e("thead",null,[e("tr",Me,[l[10]||(l[10]=e("th",{class:"py-3 px-2 text-left"},"#",-1)),l[11]||(l[11]=e("th",{class:"py-3 px-2 text-left"},"ইলহাক",-1)),l[12]||(l[12]=e("th",{class:"py-3 px-2 text-left"},"নাম",-1)),l[13]||(l[13]=e("th",{class:"py-3 px-2 text-left"},"ফোন",-1)),e("th",je,[p(e("select",{"onUpdate:modelValue":l[1]||(l[1]=n=>t.value=n)},[l[8]||(l[8]=e("option",{value:""},"-সকল অঞ্চল-",-1)),(a(!0),r(S,null,C(y(m).areas,n=>(a(),r("option",{key:n.id,value:n.id},b(n.name),9,Ae))),128))],512),[[w,t.value]])]),e("th",Ie,[p(e("select",{"onUpdate:modelValue":l[2]||(l[2]=n=>i.value=n)},l[9]||(l[9]=[e("option",{value:""},"-কেন্দ্র কিনা-",-1),e("option",{value:1},"পরীক্ষা কেন্দ্র",-1),e("option",{value:0},"কেন্দ্র নয়",-1)]),512),[[w,i.value]])]),l[14]||(l[14]=e("th",{class:"py-3 px-2 text-center print:hidden"},"সক্রিয়",-1)),l[15]||(l[15]=e("th",{class:"py-3 px-2 text-center print:hidden"},"একশন",-1))])]),e("tbody",he,[(D=y(c).institutes)!=null&&D.length?(a(!0),r(S,{key:0},C(y(c).institutes,(n,q)=>(a(),r("tr",{key:n.id,class:"border-b border-gray-200 hover:bg-gray-100"},[e("td",ze,[e("div",De,[e("div",qe,[u.value==="all"?(a(),r("p",Ne,b(q+1),1)):(a(),r("p",Ee,b((s.value-1)*u.value+q+1),1))])])]),e("td",Be,[e("p",Oe,b(n.institute_code),1)]),e("td",Pe,[e("p",Fe,b(n.name),1)]),e("td",Le,[e("p",null,b(n.phone),1)]),e("td",Te,[e("p",null,b(n.area?n.area.name:"Unknown Area"),1)]),e("td",Re,[e("span",{class:N([n.is_center?"bg-green-200 text-green-700":"bg-red-200 text-red-700","py-1 px-3 rounded-full text-xs"])},b(n.is_center?"পরীক্ষা কেন্দ্র":"কেন্দ্র নয়"),3)]),e("td",Ge,[e("span",{class:N([n.is_active?"bg-green-200 text-green-700":"bg-red-200 text-red-700","py-1 px-3 rounded-full text-xs"])},b(n.is_active?"সক্রিয়":"নিষ্ক্রিয়"),3)]),e("td",He,[e("div",Je,[e("button",{onClick:et=>F(n),class:"text-blue-600 hover:text-blue-800"},l[16]||(l[16]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Ke),U("",!0)])])]))),128)):(a(),r("tr",Qe,l[18]||(l[18]=[e("td",{colspan:"8",class:"text-center text-red-500 py-4"},"No institutes found",-1)])))])])])),e("div",We,[e("button",{class:"btn-1",disabled:s.value===1,onClick:G},"Prev",8,Xe),e("div",Ye,[p(e("select",{"onUpdate:modelValue":l[3]||(l[3]=n=>s.value=n),class:"btn-1"},[(a(!0),r(S,null,C(y(c).pagination.last_page,n=>(a(),r("option",{key:n},b(n),1))),128))],512),[[w,s.value]])]),e("button",{class:"btn-1",disabled:s.value===y(c).pagination.last_page,onClick:R}," Next ",8,Ze)]),d.value?(a(),A(le,{key:2,class:"z-40",onClose:P})):U("",!0),o.value?(a(),A(fe,{key:3,class:"z-40",institute:x.value,onClose:L},null,8,["institute"])):U("",!0),v.value?(a(),A(ke,{key:4,class:"z-40",institute:x.value,onClose:T},null,8,["institute"])):U("",!0)])}}};export{ot as default};
