import{u as V}from"./letter-distribution-isJ3gLb6.js";import{r as m,o as D,B as I,d as a,c as u,a as e,p as j,j as y,C as B,F as _,e as $,t as i,b as f,v as w,M as q,y as M,N as O,k as S,h as A,L}from"./index-Z2bpx0gj.js";import{u as E}from"./area-BiqVPNYT.js";import{u as N}from"./institute-Ddt33u6p.js";const z={class:""},F={class:"card-bg md:p-8 p-4"},J={class:"mb-4"},T=["value"],G={class:"mb-4"},H=["value"],K={class:"mb-4"},P={class:"mb-4"},Q={class:"mb-4"},R={class:"mb-4"},W={class:"overflow-y-auto max-h-64 relative"},X={class:"table-auto w-full text-left"},Y={class:"bg-gray-50"},Z={class:"border px-4 py-2"},ee=["checked","onChange"],te={class:"border px-4 py-2"},se={class:"border px-4 py-2"},le={class:"border px-4 py-2"},oe={class:"flex justify-center gap-4"},ne={__name:"AddCenterModal",emits:["close","saved"],setup(h,{emit:v}){const p=v,n=m({area_id:null,institute_id:null,name:"",person:"",phone:"",institute_ids:[]}),o=m(!1),d=m([]),r=V(),c=N(),b=E();D(async()=>{await b.fetchAreas(),d.value=[]}),I(()=>n.value.area_id,async l=>{l&&(await c.fetchInstitutesByArea(l),d.value=[])});const x=async()=>{n.value.institute_ids=[...d.value.filter(l=>l!==null)],console.log("Form Data:",n.value),await r.createCenter(n.value),p("saved"),p("close")},g=l=>d.value.includes(l.id),C=l=>{const t=d.value.indexOf(l.id);t===-1&&l.id!==null?d.value.push(l.id):d.value.splice(t,1),d.value=d.value.filter(s=>s!==null)},k=l=>{l.target.checked?d.value=c.institutesByArea.map(t=>t.id):d.value=[]};return(l,t)=>(a(),u("div",z,[e("div",F,[t[17]||(t[17]=e("h2",{class:"title-md text-center"},"চিঠি বিতরণ কেন্দ্র যুক্ত করুন",-1)),e("form",{onSubmit:j(x,["prevent"])},[e("div",J,[t[8]||(t[8]=e("label",{class:"block mb-2"},"এলাকা নির্বাচন করুন",-1)),y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.area_id=s),class:"w-full p-2 border rounded",required:""},[t[7]||(t[7]=e("option",{disabled:"",value:""},"Select Area",-1)),(a(!0),u(_,null,$(f(b).areas,s=>(a(),u("option",{key:s.id,value:s.id},i(s.name),9,T))),128))],512),[[B,n.value.area_id]])]),e("div",G,[t[10]||(t[10]=e("label",{class:"block mb-2"},"কেন্দ্রীয় মাদরাসা নির্বাচন করুন",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.institute_id=s),class:"w-full p-2 border rounded",required:""},[t[9]||(t[9]=e("option",{disabled:"",value:""},"Select Institute",-1)),(a(!0),u(_,null,$(f(c).institutesByArea,s=>(a(),u("option",{key:s.id,value:s.id}," ("+i(s.institute_code)+")-"+i(s.name),9,H))),128))],512),[[B,n.value.institute_id]])]),e("div",K,[t[11]||(t[11]=e("label",{class:"block mb-2"},"চিঠি বিতরণ কেন্দ্রের নাম",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.name=s),type:"text",class:"w-full p-2 border rounded",placeholder:"যেমন: সদর দক্ষিণ",required:""},null,512),[[w,n.value.name]])]),e("div",P,[t[12]||(t[12]=e("label",{class:"block mb-2"},"জিম্মাদারের নাম",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.person=s),type:"text",class:"w-full p-2 border rounded",placeholder:"জিম্মাদারের নাম",required:""},null,512),[[w,n.value.person]])]),e("div",Q,[t[13]||(t[13]=e("label",{class:"block mb-2"},"জিম্মাদারের ফোন",-1)),y(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.phone=s),type:"text",class:"w-full p-2 border rounded",placeholder:"জিম্মাদারের ফোন",required:""},null,512),[[w,n.value.phone]])]),e("div",R,[e("label",null,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>o.value=s),onChange:k},null,544),[[q,o.value]]),t[14]||(t[14]=M(" Select/Deselect All "))]),e("div",W,[e("table",X,[t[15]||(t[15]=e("thead",{class:"bg-gray-200 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"border px-4 py-2"},"সিলেক্ট"),e("th",{class:"border px-4 py-2"},"ইলহাক"),e("th",{class:"border px-4 py-2"},"মাদরাসার নাম ও ঠিকানা"),e("th",{class:"border px-4 py-2"},"ফোন নাম্বার")])],-1)),e("tbody",Y,[(a(!0),u(_,null,$(f(c).institutesByArea,s=>(a(),u("tr",{key:s.id},[e("td",Z,[e("input",{type:"checkbox",checked:g(s),onChange:U=>C(s)},null,40,ee)]),e("td",te,i(s.institute_code),1),e("td",se,i(s.name),1),e("td",le,i(s.phone),1)]))),128))])])])]),e("div",oe,[t[16]||(t[16]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[6]||(t[6]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},ae={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},de={class:"card-bg md:p-8 p-4 md:w-1/2 max-h-screen overflow-y-auto"},ie={class:"mb-4"},re=["value"],ue={class:"mb-4"},ce={class:"mb-4"},pe={class:"mb-4"},be={class:"mb-4"},ve={class:"overflow-y-auto max-h-64 relative"},ye={class:"table-auto w-full text-left"},me={class:"bg-gray-50"},xe={class:"border px-4 py-2"},_e=["checked","onChange"],fe={class:"border px-4 py-2"},he={class:"border px-4 py-2"},ge={class:"border px-4 py-2"},ke={class:"flex justify-center gap-4"},$e={__name:"EditCenterModal",props:{center:Object},emits:["close","updated"],setup(h,{emit:v}){const p=v,n=h,o=O({area_id:null,institute_id:null,name:"",person:"",phone:"",institute_ids:[]}),d=m(!1),r=m([]),c=V(),b=N();D(async()=>{await b.fetchInstitutesByArea(n.center.area_id),r.value=JSON.parse(n.center.institute_ids||"[]"),o.area_id=n.center.area_id,o.institute_id=n.center.institute_id,o.name=n.center.name,o.person=n.center.person,o.phone=n.center.phone,o.institute_ids=[...r.value]}),I(()=>n.center,l=>{o.area_id=l.area_id||null,o.institute_id=l.institute_id||null,o.name=l.name||"",o.person=l.person||"",o.phone=l.phone||"",r.value=JSON.parse(l.institute_ids||"[]"),o.institute_ids=[...r.value]},{immediate:!0});const x=async()=>{o.institute_ids=[...r.value.filter(l=>l!==null)],console.log("Update Form Data:",o),await c.updateCenter(n.center.id,o),p("updated"),p("close")},g=l=>r.value.includes(l.id),C=l=>{const t=r.value.indexOf(l.id);t===-1&&l.id!==null?r.value.push(l.id):r.value.splice(t,1),r.value=r.value.filter(s=>s!==null)},k=l=>{l.target.checked?r.value=b.institutesByArea.map(t=>t.id):r.value=[]};return(l,t)=>(a(),u("div",ae,[e("div",de,[t[14]||(t[14]=e("h2",{class:"text-xl font-bold mb-4"},"চিঠি বিতরণ কেন্দ্র সম্পাদনা সম্পাদনা",-1)),e("form",{onSubmit:j(x,["prevent"])},[e("div",ie,[t[7]||(t[7]=e("label",{class:"block mb-2"},"কেন্দ্রীয় মাদরাসা",-1)),y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.institute_id=s),class:"w-full p-2 border rounded",required:""},[t[6]||(t[6]=e("option",{disabled:"",value:""},"Select Institute",-1)),(a(!0),u(_,null,$(f(b).institutesByArea,s=>(a(),u("option",{key:s.id,value:s.id}," ("+i(s.institute_code)+")-"+i(s.name),9,re))),128))],512),[[B,o.institute_id]])]),e("div",ue,[t[8]||(t[8]=e("label",{class:"block mb-2"},"কেন্দ্রের নাম",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.name=s),type:"text",class:"w-full p-2 border rounded",placeholder:"যেমন: সদর দক্ষিণ",required:""},null,512),[[w,o.name]])]),e("div",ce,[t[9]||(t[9]=e("label",{class:"block mb-2"},"জিম্মাদারের নাম",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.person=s),type:"text",class:"w-full p-2 border rounded",placeholder:"জিম্মাদারের নাম",required:""},null,512),[[w,o.person]])]),e("div",pe,[t[10]||(t[10]=e("label",{class:"block mb-2"},"জিম্মাদারের ফোন",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.phone=s),type:"text",class:"w-full p-2 border rounded",placeholder:"জিম্মাদারের ফোন",required:""},null,512),[[w,o.phone]])]),e("div",be,[e("label",null,[y(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>d.value=s),onChange:k},null,544),[[q,d.value]]),t[11]||(t[11]=M(" Select/Deselect All Institutes "))]),e("div",ve,[e("table",ye,[t[12]||(t[12]=e("thead",{class:"bg-gray-200 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"border px-4 py-2"},"সিলেক্ট"),e("th",{class:"border px-4 py-2"},"ইলহাক"),e("th",{class:"border px-4 py-2"},"মাদরাসার নাম ও ঠিকানা"),e("th",{class:"border px-4 py-2"},"ফোন নাম্বার")])],-1)),e("tbody",me,[(a(!0),u(_,null,$(f(b).institutesByArea,s=>(a(),u("tr",{key:s.id},[e("td",xe,[e("input",{type:"checkbox",checked:g(s),onChange:U=>C(s)},null,40,_e)]),e("td",fe,i(s.institute_code),1),e("td",he,i(s.name),1),e("td",ge,i(s.phone),1)]))),128))])])])]),e("div",ke,[t[13]||(t[13]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[5]||(t[5]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},we={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Ce={class:"card-bg p-4 md:p-8"},Se={class:"flex justify-end mt-4"},Ae={__name:"DeleteCenterModal",props:{center:{type:Object,required:!0}},emits:["close","deleted"],setup(h,{emit:v}){const p=v,n=h,o=V(),d=async()=>{await o.deleteCenter(n.center.id),p("deleted"),p("close")};return(r,c)=>{var b,x;return a(),u("div",we,[e("div",Ce,[c[3]||(c[3]=e("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মারহালা",-1)),e("p",null,[c[1]||(c[1]=M(" আপনি কি (")),e("b",null,i((x=(b=h.center)==null?void 0:b.institute)==null?void 0:x.name),1),c[2]||(c[2]=M(") ডিলিট করতে চান? "))]),e("div",Se,[e("button",{onClick:c[0]||(c[0]=g=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),e("button",{onClick:d,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])])}}},Me={class:"my-container space-y-2"},Ve={key:2,class:"overflow-x-auto"},Be={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},De={class:"text-gray-600 text-sm font-light"},Ue={class:"py-3 px-2 text-left whitespace-nowrap"},Ie={class:"flex items-center"},je={class:"mr-2"},qe={class:""},Ne={class:"py-3 px-2 text-left"},Oe={class:""},Le={class:"py-3 px-2 text-left"},Ee={class:""},ze={class:"py-3 px-2 text-left"},Fe={class:""},Je={class:"py-3 px-2 text-left"},Te={class:""},Ge={class:"py-3 px-2 text-left"},He={class:""},Ke={class:"py-3 px-2 text-left"},Pe={class:""},Qe={class:"py-3 px-2 text-center print:hidden"},Re={class:"flex item-center justify-center gap-4"},We=["onClick"],Xe={key:1},st={__name:"LetterDistribution",setup(h){const v=V(),p=m(!1),n=m(!1),o=m(!1),d=m(null),r=m(!0),c=()=>p.value=!0,b=async()=>{p.value=!1,await v.fetchCenters()},x=k=>{d.value=k,n.value=!0},g=async()=>{n.value=!1,await v.fetchCenters()},C=()=>o.value=!1;return D(async()=>{try{await v.fetchCenters()}finally{r.value=!1}}),(k,l)=>(a(),u(_,null,[e("div",Me,[e("div",{class:"flex justify-between items-center"},[l[0]||(l[0]=e("h1",{class:"title-lg"},"চিঠি বিতরণ কেন্দ্র তালিকা",-1)),e("button",{class:"btn-2",onClick:c},"নতুন যুক্ত করুন")]),p.value?(a(),S(ne,{key:0,class:"w-full",onClose:b})):A("",!0),r.value?(a(),S(L,{key:1})):(a(),u("div",Ve,[e("table",Be,[l[4]||(l[4]=e("thead",null,[e("tr",{class:"bg-gray-200 text-gray-700 text-sm leading-normal"},[e("th",{class:"py-3 px-2 text-left"},"#"),e("th",{class:"py-3 px-2 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-2 text-left"},"কেন্দ্রের নাম"),e("th",{class:"py-3 px-2 text-left"},"কেন্দ্রীয় মাদরাসার নাম"),e("th",{class:"py-3 px-2 text-left"},"মাদরাসা সংখ্যা"),e("th",{class:"py-3 px-2 text-left"},"জিম্মাদার"),e("th",{class:"py-3 px-2 text-left"},"ফোন"),e("th",{class:"py-3 px-2 text-center print:hidden"},"একশন")])],-1)),e("tbody",De,[f(v).centers.length?(a(!0),u(_,{key:0},$(f(v).centers,(t,s)=>(a(),u("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",Ue,[e("div",Ie,[e("div",je,[e("p",qe,i(s+1),1)])])]),e("td",Ne,[e("p",Oe,i(t.area.name),1)]),e("td",Le,[e("p",Ee,i(t.name),1)]),e("td",ze,[e("p",Fe,i(t.institute.institute_code)+"-"+i(t.institute.name),1)]),e("td",Je,[e("p",Te," মোট: "+i(Array.isArray(t.institute_ids)?t.institute_ids.length:JSON.parse(t.institute_ids||"[]").length)+" টি ",1)]),e("td",Ge,[e("p",He,i(t.person||"নেই"),1)]),e("td",Ke,[e("p",Pe,i(t.phone||"নেই"),1)]),e("td",Qe,[e("div",Re,[e("button",{onClick:U=>x(t),class:"text-blue-600 hover:text-blue-800"},l[1]||(l[1]=[e("i",{class:"fas fa-edit"},null,-1)]),8,We),A("",!0)])])]))),128)):(a(),u("tr",Xe,l[3]||(l[3]=[e("td",{colspan:"5",class:"text-center text-red-500 py-4"},"No centers found",-1)])))])])]))]),o.value?(a(),S(Ae,{key:0,class:"z-40",center:d.value,onClose:C},null,8,["center"])):A("",!0),n.value?(a(),S($e,{key:1,class:"z-50",center:d.value,onClose:g},null,8,["center"])):A("",!0)],64))}};export{st as default};
