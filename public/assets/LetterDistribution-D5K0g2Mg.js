import{u as M}from"./letter-distribution-DPRxcpJt.js";import{r as y,o as D,B as V,d as a,c as r,a as e,l as j,m as _,C as B,F as k,e as $,t as u,b as x,v as N,M as O,z as A,Q as q,x as C,h as S,L}from"./index-CqID7Gu6.js";import{u as z}from"./area-CNygBlMy.js";import{u as U}from"./institute-DXdRFVfl.js";const E={class:""},F={class:"card-bg md:p-8 p-4"},J={class:"mb-4"},T=["value"],Q={class:"mb-4"},G=["value"],H={class:"mb-4"},K={class:"mb-4"},P={class:"overflow-y-auto max-h-64 relative"},R={class:"table-auto w-full text-left"},W={class:"bg-gray-50"},X={class:"border px-4 py-2"},Y=["checked","onChange"],Z={class:"border px-4 py-2"},ee={class:"border px-4 py-2"},te={class:"border px-4 py-2"},se={class:"flex justify-center gap-4"},le={__name:"AddCenterModal",emits:["close","saved"],setup(f,{emit:v}){const p=v,o=y({area_id:null,institute_id:null,name:"",institute_ids:[]}),n=y(!1),i=y([]),d=M(),c=U(),b=z();D(async()=>{await b.fetchAreas(),i.value=[]}),V(()=>o.value.area_id,async l=>{l&&(await c.fetchInstitutesByArea(l),i.value=[])});const m=async()=>{o.value.institute_ids=[...i.value.filter(l=>l!==null)],console.log("Form Data:",o.value),await d.createCenter(o.value),p("saved"),p("close")},h=l=>i.value.includes(l.id),w=l=>{const t=i.value.indexOf(l.id);t===-1&&l.id!==null?i.value.push(l.id):i.value.splice(t,1),i.value=i.value.filter(s=>s!==null)},g=l=>{l.target.checked?i.value=c.institutesByArea.map(t=>t.id):i.value=[]};return(l,t)=>(a(),r("div",E,[e("div",F,[t[13]||(t[13]=e("h2",{class:"title-md text-center"},"চিঠি বিতরণ কেন্দ্র যুক্ত করুন",-1)),e("form",{onSubmit:j(m,["prevent"])},[e("div",J,[t[6]||(t[6]=e("label",{class:"block mb-2"},"এলাকা নির্বাচন করুন",-1)),_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.area_id=s),class:"w-full p-2 border rounded",required:""},[t[5]||(t[5]=e("option",{disabled:"",value:""},"Select Area",-1)),(a(!0),r(k,null,$(x(b).areas,s=>(a(),r("option",{key:s.id,value:s.id},u(s.name),9,T))),128))],512),[[B,o.value.area_id]])]),e("div",Q,[t[8]||(t[8]=e("label",{class:"block mb-2"},"কেন্দ্রীয় মাদরাসা নির্বাচন করুন",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.institute_id=s),class:"w-full p-2 border rounded",required:""},[t[7]||(t[7]=e("option",{disabled:"",value:""},"Select Institute",-1)),(a(!0),r(k,null,$(x(c).institutesByArea,s=>(a(),r("option",{key:s.id,value:s.id}," ("+u(s.institute_code)+")-"+u(s.name),9,G))),128))],512),[[B,o.value.institute_id]])]),e("div",H,[t[9]||(t[9]=e("label",{class:"block mb-2"},"চিঠি বিতরণ কেন্দ্রের নাম",-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.name=s),type:"text",class:"w-full p-2 border rounded",placeholder:"যেমন: সদর দক্ষিণ",required:""},null,512),[[N,o.value.name]])]),e("div",K,[e("label",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>n.value=s),onChange:g},null,544),[[O,n.value]]),t[10]||(t[10]=A(" Select/Deselect All "))]),e("div",P,[e("table",R,[t[11]||(t[11]=e("thead",{class:"bg-gray-200 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"border px-4 py-2"},"সিলেক্ট"),e("th",{class:"border px-4 py-2"},"ইলহাক"),e("th",{class:"border px-4 py-2"},"মাদরাসার নাম ও ঠিকানা"),e("th",{class:"border px-4 py-2"},"ফোন নাম্বার")])],-1)),e("tbody",W,[(a(!0),r(k,null,$(x(c).institutesByArea,s=>(a(),r("tr",{key:s.id},[e("td",X,[e("input",{type:"checkbox",checked:h(s),onChange:I=>w(s)},null,40,Y)]),e("td",Z,u(s.institute_code),1),e("td",ee,u(s.name),1),e("td",te,u(s.phone),1)]))),128))])])])]),e("div",se,[t[12]||(t[12]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[4]||(t[4]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},oe={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ne={class:"card-bg md:p-8 p-4 md:w-1/2"},ae={class:"mb-4"},ie=["value"],de={class:"mb-4"},re={class:"mb-4"},ue={class:"overflow-y-auto max-h-64 relative"},ce={class:"table-auto w-full text-left"},pe={class:"bg-gray-50"},be={class:"border px-4 py-2"},ve=["checked","onChange"],ye={class:"border px-4 py-2"},me={class:"border px-4 py-2"},_e={class:"border px-4 py-2"},xe={class:"flex justify-center gap-4"},fe={__name:"EditCenterModal",props:{center:Object},emits:["close","updated"],setup(f,{emit:v}){const p=v,o=f,n=q({area_id:null,institute_id:null,name:"",institute_ids:[]}),i=y(!1),d=y([]),c=M(),b=U();D(async()=>{await b.fetchInstitutesByArea(o.center.area_id),d.value=JSON.parse(o.center.institute_ids||"[]"),n.area_id=o.center.area_id,n.institute_id=o.center.institute_id,n.name=o.center.name,n.institute_ids=[...d.value]}),V(()=>o.center,l=>{n.area_id=l.area_id||null,n.institute_id=l.institute_id||null,n.name=l.name||"",d.value=JSON.parse(l.institute_ids||"[]"),n.institute_ids=[...d.value]},{immediate:!0});const m=async()=>{n.institute_ids=JSON.stringify([...d.value.filter(l=>l!==null)]),console.log("Update Form Data:",n),await c.updateCenter(o.center.id,n),p("updated"),p("close")},h=l=>d.value.includes(l.id),w=l=>{const t=d.value.indexOf(l.id);t===-1&&l.id!==null?d.value.push(l.id):d.value.splice(t,1),d.value=d.value.filter(s=>s!==null)},g=l=>{l.target.checked?d.value=b.institutesByArea.map(t=>t.id):d.value=[]};return(l,t)=>(a(),r("div",oe,[e("div",ne,[t[10]||(t[10]=e("h2",{class:"text-xl font-bold mb-4"},"মারকাজ সম্পাদনা",-1)),e("form",{onSubmit:j(m,["prevent"])},[e("div",ae,[t[5]||(t[5]=e("label",{class:"block mb-2"},"ইনস্টিটিউট",-1)),_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.institute_id=s),class:"w-full p-2 border rounded",required:""},[t[4]||(t[4]=e("option",{disabled:"",value:""},"Select Institute",-1)),(a(!0),r(k,null,$(x(b).institutesByArea,s=>(a(),r("option",{key:s.id,value:s.id}," ("+u(s.institute_code)+")-"+u(s.name),9,ie))),128))],512),[[B,n.institute_id]])]),e("div",de,[t[6]||(t[6]=e("label",{class:"block mb-2"},"কেন্দ্রের নাম",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.name=s),type:"text",class:"w-full p-2 border rounded",placeholder:"যেমন: সদর দক্ষিণ",required:""},null,512),[[N,n.name]])]),e("div",re,[e("label",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>i.value=s),onChange:g},null,544),[[O,i.value]]),t[7]||(t[7]=A(" Select/Deselect All Institutes "))]),e("div",ue,[e("table",ce,[t[8]||(t[8]=e("thead",{class:"bg-gray-200 sticky top-0 z-10"},[e("tr",null,[e("th",{class:"border px-4 py-2"},"সিলেক্ট"),e("th",{class:"border px-4 py-2"},"ইলহাক"),e("th",{class:"border px-4 py-2"},"মাদরাসার নাম ও ঠিকানা"),e("th",{class:"border px-4 py-2"},"ফোন নাম্বার")])],-1)),e("tbody",pe,[(a(!0),r(k,null,$(x(b).institutesByArea,s=>(a(),r("tr",{key:s.id},[e("td",be,[e("input",{type:"checkbox",checked:h(s),onChange:I=>w(s)},null,40,ve)]),e("td",ye,u(s.institute_code),1),e("td",me,u(s.name),1),e("td",_e,u(s.phone),1)]))),128))])])])]),e("div",xe,[t[9]||(t[9]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=s=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},he={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ge={class:"card-bg p-4 md:p-8"},ke={class:"flex justify-end mt-4"},$e={__name:"DeleteCenterModal",props:{center:{type:Object,required:!0}},emits:["close","deleted"],setup(f,{emit:v}){const p=v,o=f,n=M(),i=async()=>{await n.deleteCenter(o.center.id),p("deleted"),p("close")};return(d,c)=>{var b,m;return a(),r("div",he,[e("div",ge,[c[3]||(c[3]=e("h2",{class:"text-xl font-bold mb-4"},"ডিলেট মারহালা",-1)),e("p",null,[c[1]||(c[1]=A(" আপনি কি (")),e("b",null,u((m=(b=f.center)==null?void 0:b.institute)==null?void 0:m.name),1),c[2]||(c[2]=A(") ডিলিট করতে চান? "))]),e("div",ke,[e("button",{onClick:c[0]||(c[0]=h=>p("close")),class:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600"}," না "),e("button",{onClick:i,class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ডিলেট ")])])])}}},we={class:"my-container space-y-2"},Ce={key:3,class:"overflow-x-auto"},Se={class:"min-w-full table-auto bg-white shadow-md rounded-lg overflow-hidden"},Ae={class:"text-gray-600 text-sm font-light"},Me={class:"py-3 px-2 text-left whitespace-nowrap"},Be={class:"flex items-center"},De={class:"mr-2"},Ie={class:"font-medium"},Ve={class:"py-3 px-2 text-left"},je={class:"title-md"},Ne={class:"py-3 px-2 text-left"},Oe={class:"title-md"},Ue={class:"py-3 px-2 text-left"},qe={class:"title-md"},Le={class:"py-3 px-2 text-left"},ze={class:"title-md"},Ee={class:"py-3 px-2 text-center print:hidden"},Fe={class:"flex item-center justify-center gap-4"},Je=["onClick"],Te={key:1},Pe={__name:"LetterDistribution",setup(f){const v=M(),p=y(!1),o=y(!1),n=y(!1),i=y(null),d=y(!0),c=()=>p.value=!0,b=async()=>{p.value=!1,await v.fetchCenters()},m=g=>{i.value=g,o.value=!0},h=async()=>{o.value=!1,await v.fetchCenters()},w=()=>n.value=!1;return D(async()=>{try{await v.fetchCenters()}finally{d.value=!1}}),(g,l)=>(a(),r("div",we,[e("div",{class:"flex justify-between items-center"},[l[0]||(l[0]=e("h1",{class:"title-lg"},"চিঠি বিতরণ কেন্দ্র তালিকা",-1)),e("button",{class:"btn-2",onClick:c},"নতুন যুক্ত করুন")]),p.value?(a(),C(le,{key:0,class:"w-full",onClose:b})):S("",!0),o.value?(a(),C(fe,{key:1,class:"z-40",center:i.value,onClose:h},null,8,["center"])):S("",!0),d.value?(a(),C(L,{key:2})):(a(),r("div",Ce,[e("table",Se,[l[4]||(l[4]=e("thead",null,[e("tr",{class:"bg-gray-200 text-gray-700 text-sm leading-normal"},[e("th",{class:"py-3 px-2 text-left"},"#"),e("th",{class:"py-3 px-2 text-left"},"অঞ্চল"),e("th",{class:"py-3 px-2 text-left"},"কেন্দ্রের নাম"),e("th",{class:"py-3 px-2 text-left"},"কেন্দ্রীয় মাদরাসার নাম"),e("th",{class:"py-3 px-2 text-left"},"মাদরাসা সংখ্যা"),e("th",{class:"py-3 px-2 text-center print:hidden"},"একশন")])],-1)),e("tbody",Ae,[x(v).centers.length?(a(!0),r(k,{key:0},$(x(v).centers,(t,s)=>(a(),r("tr",{key:t.id,class:"border-b border-gray-200 hover:bg-gray-100"},[e("td",Me,[e("div",Be,[e("div",De,[e("p",Ie,u(s+1),1)])])]),e("td",Ve,[e("p",je,u(t.area.name),1)]),e("td",Ne,[e("p",Oe,u(t.name),1)]),e("td",Ue,[e("p",qe,u(t.institute.institute_code)+"-"+u(t.institute.name),1)]),e("td",Le,[e("p",ze," মোট: "+u(Array.isArray(t.institute_ids)?t.institute_ids.length:JSON.parse(t.institute_ids||"[]").length)+" টি ",1)]),e("td",Ee,[e("div",Fe,[e("button",{onClick:I=>m(t),class:"text-blue-600 hover:text-blue-800"},l[1]||(l[1]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Je),S("",!0)])])]))),128)):(a(),r("tr",Te,l[3]||(l[3]=[e("td",{colspan:"5",class:"text-center text-red-500 py-4"},"No centers found",-1)])))])])])),n.value?(a(),C($e,{key:4,class:"z-40",center:i.value,onClose:w},null,8,["center"])):S("",!0)]))}};export{Pe as default};
