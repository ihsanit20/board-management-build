import{D as Q,r as v,h as W,c as a,a as t,m as E,v as U,i as e,t as n,f as c,z as r,E as X,n as Y,F as Z,b as tt,d as st,w as et,p as lt,y as nt,o as d}from"./index-B2GPrU01.js";import{_ as ot,f as it,h as at}from"./html2pdf-CmNQl5L0.js";import{u as dt}from"./application-BvpjbPAN.js";const rt={class:"my-container space-y-4 my-4"},pt={class:"card-bg p-4 md:p-8 items-center space-y-4 print:hidden"},ut={class:"grid gap-4 md:grid-cols-2 w-full"},mt={class:""},ct={class:""},gt={class:"card-bg p-4 md:p-8"},yt={key:0,class:"flex justify-center items-center text-3xl text-green-600 py-8"},vt={key:1,class:"flex justify-center items-center text-3xl text-red-500 py-8"},ft={key:2,class:"flex flex-col items-center space-y-4"},bt={class:"text-center text-lg"},xt={class:"font-bold text-sky-600"},_t={key:0,class:"flex justify-center items-center"},kt={key:1,class:"card-bg p-4 md:p-8 space-y-4"},wt={id:"pdf-section",class:"space-y-4"},Pt={class:"space-y-4"},Ct={class:"flex flex-col justify-center items-center"},jt={class:"title-md text-center"},Dt={class:"grid md:grid-cols-2 gap-1"},Ft={class:"flex gap-4 bg-gray-100 p-2 rounded-md"},Rt={class:"flex gap-4 bg-gray-100 p-2 rounded-md"},Vt={class:"bg-gray-100 p-2 rounded-md"},At={class:"bg-gray-100 p-2 rounded-md"},It={class:"bg-gray-100 p-2 rounded-md"},Mt={class:"bg-gray-100 p-2 rounded-md"},St={class:"bg-gray-100 p-2 rounded-md"},Bt={class:"bg-gray-100 p-2 rounded-md"},Lt={class:"bg-gray-100 p-2 rounded-md"},Nt={class:"space-y-4"},Tt={class:"grid md:grid-cols-2 gap-4"},ht={class:"flex items-center justify-center"},zt={class:"bg-sky-200 p-2 rounded-full px-3"},Et={class:"flex justify-center gap-4 print:hidden"},Ut={key:2,class:"text-center text-red-500"},$t={class:"flex mt-4"},Kt={__name:"PrevApplication",setup(qt){const $=o=>it(new Date(o),"dd-MMM-yyyy"),m=dt(),q=lt(),{application:l,loading:G}=Q(m),{success:f,error:b}=q.query,g=v(null),y=v(null),x=v(!1),H=async(o,s)=>{x.value=!0;try{await m.fetchPublicApplication(o,s)}catch(p){console.error("Failed to load public application:",p)}},J=()=>{H(g.value,y.value)},K=async()=>{if(l.value.id){const o=await m.bkashCreatePayment(l.value.id);o.success&&(localStorage.setItem("ReturnTo","PrevApplication"),window.location=o.bkashURL)}else console.log(l.value)};W(()=>{m.application=null});const O=()=>{var u;const o=document.getElementById("pdf-section"),p={margin:1,filename:`application-details-${((u=l.value)==null?void 0:u.id)||"unknown"}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};at().from(o).set(p).save()};return(o,s)=>{var u,_,k,w,P,C,j,D,F,R,V,A,I,M,S,B,L,N,T,h;const p=nt("RouterLink");return d(),a("div",rt,[t("div",pt,[s[5]||(s[5]=t("h4",{class:"title-lg"},"পূর্বের নিবন্ধন পত্র দেখুন",-1)),t("div",ut,[t("div",mt,[s[3]||(s[3]=t("label",{for:""},"নিবন্ধন নাম্বার",-1)),E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),type:"number",class:"input-1",placeholder:"নিবন্ধন নাম্বার"},null,512),[[U,g.value]])]),t("div",ct,[s[4]||(s[4]=t("label",{for:""},"ইলহাক নাম্বার",-1)),E(t("input",{"onUpdate:modelValue":s[1]||(s[1]=i=>y.value=i),type:"text",class:"input-1",placeholder:"ইলহাক নাম্বার"},null,512),[[U,y.value]])])]),t("div",{class:"flex justify-center"},[t("button",{type:"button",onClick:J,class:"btn-2"},"সাবমিট")])]),t("div",gt,[e(f)?(d(),a("div",yt,n(e(f)),1)):c("",!0),e(b)?(d(),a("div",vt,n(e(b)),1)):c("",!0),((u=e(l))==null?void 0:u.payment_status)==="Pending"?(d(),a("div",ft,[t("p",bt,[t("span",xt,n((_=e(l))==null?void 0:_.total_amount),1),s[6]||(s[6]=r(" টাকা আপনাকে অবশ্যই পরিশোধ করতে হবে। আপনি ")),s[7]||(s[7]=t("span",{class:"font-bold text-pink-600"},"বিকাশ",-1)),s[8]||(s[8]=r(" পেমেন্ট করতে পারেন। "))]),t("button",{type:"button",onClick:K,class:"w-52 px-4 py-2 border-2 rounded-lg hover:border-pink-600"},s[9]||(s[9]=[t("img",{src:ot,alt:""},null,-1)]))])):c("",!0)]),e(G)?(d(),a("div",_t,s[10]||(s[10]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-gray-900"},null,-1)]))):e(l)?(d(),a("div",kt,[t("div",wt,[t("div",Pt,[t("div",Ct,[s[11]||(s[11]=t("div",{class:""},[t("img",{src:X,alt:"logo",class:"max:h-[100px]"}),t("hr",{class:"py-2"})],-1)),t("h4",jt,n((w=(k=e(l))==null?void 0:k.exam)==null?void 0:w.name),1),s[12]||(s[12]=t("h1",{class:"title-lg text-center"},"নিবন্ধনের বিস্তারিত",-1)),s[13]||(s[13]=t("div",{class:"flex gap-2"},null,-1))]),t("div",Dt,[t("div",Ft,[s[14]||(s[14]=t("b",null,"নিবন্ধন নং:",-1)),t("p",null,n(e(l).id),1)]),t("div",Rt,[s[15]||(s[15]=t("b",null,"নিবন্ধনের তারিখ:",-1)),t("p",null,n($(e(l).created_at)),1)]),t("div",Vt,[s[16]||(s[16]=t("b",null,"অঞ্চল :",-1)),t("p",null,n((C=(P=e(l))==null?void 0:P.area)==null?void 0:C.name),1)]),t("div",At,[s[17]||(s[17]=t("b",null,"শিক্ষা প্রতিষ্ঠানের নাম:",-1)),t("p",null,n((D=(j=e(l))==null?void 0:j.institute)==null?void 0:D.name),1)]),t("div",It,[s[18]||(s[18]=t("b",null,"মারহালা:",-1)),t("p",null,n((R=(F=e(l))==null?void 0:F.zamat)==null?void 0:R.name),1)]),t("div",Mt,[s[19]||(s[19]=t("b",null,"গ্রুপ:",-1)),t("p",null,n((A=(V=e(l))==null?void 0:V.group)==null?void 0:A.name),1)]),t("div",St,[s[20]||(s[20]=t("b",null,"সেন্টার:",-1)),t("p",null,n((M=(I=e(l))==null?void 0:I.center)==null?void 0:M.name),1)]),t("div",Bt,[s[21]||(s[21]=t("b",null,"টাকার পরিমাণ:",-1)),t("p",null,[r(n((S=e(l))==null?void 0:S.total_amount)+" টাকা ",1),t("span",{class:Y([{"text-yellow-600 bg-yellow-200":((B=e(l))==null?void 0:B.payment_status)==="Pending","text-green-600 bg-green-200":((L=e(l))==null?void 0:L.payment_status)==="Paid","text-red-600 bg-red-200":((N=e(l))==null?void 0:N.payment_status)==="Failed"},"py-1 px-2 rounded-full text-xs"])},n((T=e(l))==null?void 0:T.payment_status),3)])]),t("div",Lt,[s[22]||(s[22]=t("b",null,"পেমেন্টের মাধ্যম:",-1)),t("p",null,n((h=e(l))==null?void 0:h.payment_method),1)])])]),s[28]||(s[28]=t("hr",null,null,-1)),t("div",Nt,[s[27]||(s[27]=t("div",{class:"flex justify-center"},[t("h2",{class:"title-lg"},"পরীক্ষার্থীদের তথ্য")],-1)),t("div",Tt,[(d(!0),a(Z,null,tt(e(l).students,(i,z)=>(d(),a("div",{key:z,class:"bg-gray-100 p-4 rounded-md flex gap-4"},[t("div",ht,[t("div",zt,n(z+1),1)]),t("div",null,[t("p",null,[s[23]||(s[23]=t("strong",null,"নাম:",-1)),r(" "+n(i.name),1)]),t("p",null,[s[24]||(s[24]=t("strong",null,"পিতার নাম:",-1)),r(" "+n(i.father_name),1)]),t("p",null,[s[25]||(s[25]=t("strong",null,"জন্ম তারিখ:",-1)),r(" "+n(i.date_of_birth),1)]),t("p",null,[s[26]||(s[26]=t("strong",null,"ঠিকান:",-1)),r(" "+n(i.address),1)])])]))),128))])])]),t("div",Et,[t("button",{onClick:s[2]||(s[2]=i=>o.window.print()),class:"btn-2"},"প্রিন্ট করুন"),t("button",{onClick:O,class:"btn-contrast"},"PDF ডাউনলোড করুন")])])):x.value?(d(),a("div",Ut,s[29]||(s[29]=[t("p",null,"আপনার তথ্যের ভিত্তিতে কোন নিবন্ধন পত্র পাওয়া যায়নি",-1)]))):c("",!0),t("div",$t,[st(p,{to:{name:"PublicFunctions"},class:"btn-3"},{default:et(()=>s[30]||(s[30]=[r("পিছনে যান")])),_:1})])])}}};export{Kt as default};
