import{B as V,r as n,o as z,C as E,c as i,a as e,t as s,b as _,j as S,D as I,F as u,e as C,v as M,G as N,y as t,h as m,k as P,d as o,L as $}from"./index-C1vXwRDp.js";import{_ as j}from"./sign-BrQ60Aw4.js";import{u as A}from"./zamat-CzvhhC4_.js";import{u as F}from"./student-BaLgEUBV.js";const K={class:"my-container"},T={class:"space-y-2 p-2 print:space-y-0 print:p-0"},U={class:"card-bg p-4 print:hidden"},Z={class:"title-lg text-center"},G={class:"grid md:grid-cols-3 gap-4"},q=["value"],H={key:0,class:"flex flex-col items-center justify-between gap-4"},J={key:1,class:"space-y-2 print:space-y-0"},O=["onClick"],Q={class:"flex flex-col items-center"},R={class:"text-center font-bold text-lg"},W={class:"bg-gray-600 px-4 pt-0.5 rounded-full"},X={class:"text-center text-base font-medium text-white"},Y={key:0,class:""},ll={class:"grid grid-cols-2 gap-x-2"},el={class:""},al={class:""},sl={class:""},ol={class:""},il={class:"grid grid-cols-2 gap-x-2"},tl={class:"font-bold"},rl={class:""},nl={class:""},cl={key:0,class:""},pl={class:""},ml={class:""},xl={class:"flex flex-col items-end"},vl={class:"text-xs leading-tight text-center flex flex-col items-center"},fl={class:"text-[10px]"},_l={key:1,class:"card-bg py-6 items-center"},wl={__name:"PrintAdmitCard",setup(bl){const b=V(),g=A(),v=F(),c=n(!1),x=n(""),p=n(""),r=n([]),D=n(null),d=n(!1);z(async()=>{try{c.value=!0,await Promise.all([b.fetchLastExam(),g.fetchZamats()])}finally{c.value=!1}}),E(p,()=>{r.value=[]});const y=async()=>{if(!p.value||!x.value){alert("মারহালা সিলেক্ট করুন এবং ইলহাক নাম্বার দিয়ে অনুসন্ধান করুন।");return}c.value=!0,d.value=!0;try{await v.fetchStudentsAdmitCard({instituteCode:x.value,zamatId:p.value}),D.value=v.institute||null,r.value=v.students}catch(f){console.error("ডাটা ফেচ করতে সমস্যা হচ্ছে:",f)}finally{c.value=!1}},B=()=>{window.print()},L=new Date().toLocaleDateString("bn-BD");return(f,a)=>{var k;return o(),i("div",K,[e("div",T,[e("div",U,[e("h1",Z,s((k=_(b).exam)==null?void 0:k.name)+"-এর পরীক্ষার্থীদের প্রবেশপত্র প্রিন্ট ",1),e("div",G,[e("div",null,[S(e("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>p.value=l),class:"text-black input-1 px-2 py-1 text-center"},[a[2]||(a[2]=e("option",{value:"",selected:"",disabled:""},"- মারহালা সিলেক্ট করুন -",-1)),(o(!0),i(u,null,C(_(g).zamats,l=>(o(),i("option",{key:l.id,value:l.id},s(l.name),9,q))),128))],512),[[I,p.value]])]),e("div",null,[S(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>x.value=l),type:"text",class:"input-1 w-full text-black px-3 py-1 text-center",placeholder:"ইলহাক নং",onKeyup:N(y,["enter"])},null,544),[[M,x.value]])]),e("div",{class:"w-full"},[e("button",{onClick:y,class:"btn-2 w-full"},a[3]||(a[3]=[e("i",{class:"fas fa-search"},null,-1),t(" অনুসন্ধান ")]))])]),r.value.length?(o(),i("div",H,[e("p",null,[a[4]||(a[4]=t(" প্রবেশপত্র সংখ্যা: ")),e("b",null,s(r.value.length.toLocaleString("bn-BD")),1)]),e("button",{onClick:B,class:"btn-3"},a[5]||(a[5]=[e("i",{class:"fas fa-print pr-1"},null,-1),t(" প্রিন্ট করুন ")]))])):m("",!0)]),c.value?(o(),P($,{key:0})):(o(),i("div",J,[r.value.length?(o(!0),i(u,{key:0},C(r.value,l=>{var h,w;return o(),i("div",{key:l==null?void 0:l.id,onClick:gl=>f.toggleSelection(l==null?void 0:l.id),class:"card-bg gap-1 text-sm px-[80px] w-[780px] pt-[220px] pb-[40px] print:shadow-none print:rounded-none break-after-page text-black"},[e("div",Q,[e("p",R,s(l.exam.name),1),e("div",W,[e("p",X,[t(" বিভাগ: "+s(l==null?void 0:l.zamat.department.name)+" || মারহালা: "+s(l==null?void 0:l.zamat.name)+" ",1),(h=l==null?void 0:l.group)!=null&&h.name?(o(),i("span",Y," (গ্রুপ: "+s((w=l==null?void 0:l.group)==null?void 0:w.name)+") ",1)):m("",!0)])])]),e("div",ll,[e("p",el,[e("b",al,"রোল নং: "+s(l!=null&&l.roll_number?l==null?void 0:l.roll_number.replace(/(\d{3})(\d+)/,"$1-$2"):"নেই"),1)]),e("p",sl,[e("b",ol,"রেজি. নং: "+s(l==null?void 0:l.registration_number),1)])]),e("div",il,[e("p",tl,[a[6]||(a[6]=e("b",{class:""},"পরীক্ষার্থী:",-1)),t(" "+s(l==null?void 0:l.name),1)]),e("p",rl,[a[7]||(a[7]=e("b",{class:""},"জন্ম তারিখ:",-1)),t(" "+s(new Date(l==null?void 0:l.date_of_birth).toLocaleDateString("bn-BD"))+" ইং ",1)]),e("p",nl,[a[8]||(a[8]=e("b",{class:""},"পিতা:",-1)),t(" "+s(l==null?void 0:l.father_name),1)]),l!=null&&l.para?(o(),i("p",cl,[a[9]||(a[9]=e("b",{class:""},"পারার বিবরণ:",-1)),t(" "+s(l==null?void 0:l.para),1)])):m("",!0)]),a[16]||(a[16]=e("hr",{class:"border-black my-0.5"},null,-1)),e("div",null,[e("p",pl,[a[10]||(a[10]=e("b",{class:""},"মাদরাসা:",-1)),t(s(l==null?void 0:l.institute.institute_code)+" - "+s(l==null?void 0:l.institute.name),1)]),e("p",ml,[a[11]||(a[11]=e("b",{class:""},"মারকায:",-1)),t(" "+s(l==null?void 0:l.center.name),1)])]),e("div",xl,[e("div",vl,[a[12]||(a[12]=e("img",{class:"w-28",src:j,alt:""},null,-1)),a[13]||(a[13]=e("p",{class:"font-bold"},"[মুফতী] মুহা. নূরুল হুদা",-1)),a[14]||(a[14]=e("p",{class:"text-[10px]"},"পরীক্ষা নিয়ন্ত্রক",-1)),a[15]||(a[15]=e("p",{class:"text-[10px] font-bold"},"তানযীমুল মাদারিসিল কাওমিয়া নরসিংদী",-1)),e("p",fl,"ইস্যু তারিখ: "+s(_(L))+" ইং",1)])])],8,O)}),128)):m("",!0),d.value&&!r.value.length?(o(),i("div",_l,a[17]||(a[17]=[e("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক মারহালা এবং ইলহাক নাম্বার দিয়ে আবার চেষ্টা করুন। ",-1)]))):m("",!0)]))])])}}};export{wl as default};
