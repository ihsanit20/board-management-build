import{A as V,r as c,o as z,B as u,c as r,a as l,t as o,b as S,m as h,C as A,F as C,e as B,v as E,D as I,z as e,h as m,x as M,d as i,L as N}from"./index-xvYei5ie.js";import{u as P}from"./zamat-DzPx1OoB.js";import{u as $}from"./student-CvuFoSSL.js";const F={class:"my-container"},K={class:"space-y-2 p-2 print:space-y-0 print:p-0"},T={class:"card-bg p-4 print:hidden"},U={class:"title-lg text-center"},Z={class:"grid md:grid-cols-3 gap-4"},j=["value"],q={key:0,class:"flex flex-col items-center justify-between gap-4"},G={key:1,class:"space-y-2 print:space-y-0"},H=["onClick"],J={class:"grid grid-cols-2 gap-x-2"},O={class:""},Q={class:""},R={class:""},W={class:""},X={class:"grid grid-cols-2 gap-x-2"},Y={class:""},aa={class:""},la={class:""},sa={class:""},oa={class:""},ea={class:"grid grid-cols-2 gap-x-2"},ia={class:""},ra={class:""},pa={key:0,class:""},ca={key:1,class:""},ta={class:""},na={key:1,class:"card-bg py-6 items-center"},_a={__name:"PrintAdmitCard",setup(ma){const f=V(),_=P(),b=$(),t=c(!1),v=c(""),n=c(""),p=c([]),D=c(null),x=c(!1);z(async()=>{try{t.value=!0,await Promise.all([f.fetchLastExam(),_.fetchZamats()])}finally{t.value=!1}}),u(n,()=>{p.value=[]});const y=async()=>{if(!n.value||!v.value){alert("মারহালা সিলেক্ট করুন এবং ইলহাক নাম্বার দিয়ে অনুসন্ধান করুন।");return}t.value=!0,x.value=!0;try{await b.fetchStudentsAdmitCard({instituteCode:v.value,zamatId:n.value}),D.value=b.institute||null,p.value=b.students}catch(g){console.error("ডাটা ফেচ করতে সমস্যা হচ্ছে:",g)}finally{t.value=!1}},L=()=>{window.print()};return(g,s)=>{var k;return i(),r("div",F,[l("div",K,[l("div",T,[l("h1",U,o((k=S(f).exam)==null?void 0:k.name)+"-এর পরীক্ষার্থীদের প্রবেশপত্র প্রিন্ট ",1),l("div",Z,[l("div",null,[h(l("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),class:"text-black input-1 px-2 py-1 text-center"},[s[2]||(s[2]=l("option",{value:"",selected:"",disabled:""},"- মারহালা সিলেক্ট করুন -",-1)),(i(!0),r(C,null,B(S(_).zamats,a=>(i(),r("option",{key:a.id,value:a.id},o(a.name),9,j))),128))],512),[[A,n.value]])]),l("div",null,[h(l("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),type:"text",class:"input-1 w-full text-black px-3 py-1 text-center",placeholder:"ইলহাক নং",onKeyup:I(y,["enter"])},null,544),[[E,v.value]])]),l("div",{class:"w-full"},[l("button",{onClick:y,class:"btn-2 w-full"},s[3]||(s[3]=[l("i",{class:"fas fa-search"},null,-1),e(" অনুসন্ধান ")]))])]),p.value.length?(i(),r("div",q,[l("p",null,[s[4]||(s[4]=e(" প্রবেশপত্র সংখ্যা: ")),l("b",null,o(p.value.length.toLocaleString("bn-BD")),1)]),l("button",{onClick:L,class:"btn-3"},s[5]||(s[5]=[l("i",{class:"fas fa-print pr-1"},null,-1),e(" প্রিন্ট করুন ")]))])):m("",!0)]),t.value?(i(),M(N,{key:0})):(i(),r("div",G,[p.value.length?(i(!0),r(C,{key:0},B(p.value,a=>{var d,w;return i(),r("div",{key:a==null?void 0:a.id,onClick:va=>g.toggleSelection(a==null?void 0:a.id),class:"card-bg gap-1 text-sm px-[80px] w-[780px] pt-[250px] pb-[120px] print:shadow-none print:rounded-none break-after-page text-black"},[l("div",J,[l("p",O,[l("b",Q,"রোল নং: "+o(a!=null&&a.roll_number?a==null?void 0:a.roll_number.replace(/(\d{3})(\d+)/,"$1-$2"):"নেই"),1)]),l("p",R,[l("b",W,"রেজি. নং: "+o(a==null?void 0:a.registration_number),1)])]),l("div",X,[l("p",Y,[s[6]||(s[6]=l("b",{class:""},"পরীক্ষার্থীর নাম:",-1)),e(" "+o(a==null?void 0:a.name),1)]),l("p",aa,[s[7]||(s[7]=l("b",{class:""},"জন্ম তারিখ:",-1)),e(" "+o(new Date(a==null?void 0:a.date_of_birth).toLocaleDateString("bn-BD"))+" ইং ",1)]),l("p",la,[s[8]||(s[8]=l("b",{class:""},"পিতার নাম:",-1)),e(" "+o(a==null?void 0:a.father_name),1)])]),l("p",sa,[s[9]||(s[9]=l("b",{class:""},"ঠিকানা:",-1)),e(" "+o(a==null?void 0:a.address),1)]),s[16]||(s[16]=l("hr",{class:"border-black my-1"},null,-1)),l("div",null,[l("p",oa,[s[10]||(s[10]=l("b",{class:""},"মাদরাসা:",-1)),e(o(a==null?void 0:a.institute.institute_code)+" - "+o(a==null?void 0:a.institute.name),1)])]),l("div",ea,[l("p",ia,[s[11]||(s[11]=l("b",{class:""},"বিভাগ:",-1)),e(" "+o(a==null?void 0:a.zamat.department.name),1)]),l("p",ra,[s[12]||(s[12]=l("b",{class:""},"মারহালা:",-1)),e(" "+o(a==null?void 0:a.zamat.name),1)]),(d=a==null?void 0:a.group)!=null&&d.name?(i(),r("p",pa,[s[13]||(s[13]=l("b",{class:""},"গ্রুপ:",-1)),e(" "+o(((w=a==null?void 0:a.group)==null?void 0:w.name)||"প্রযোজ্য নয়"),1)])):m("",!0),a!=null&&a.para?(i(),r("p",ca,[s[14]||(s[14]=l("b",{class:""},"পারার বিবরণ:",-1)),e(" "+o((a==null?void 0:a.para)||"প্রযোজ্য নয়"),1)])):m("",!0)]),l("p",ta,[s[15]||(s[15]=l("b",{class:""},"মারকায:",-1)),e(" "+o(a==null?void 0:a.center.name),1)])],8,H)}),128)):m("",!0),x.value&&!p.value.length?(i(),r("div",na,s[17]||(s[17]=[l("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক মারহালা এবং ইলহাক নাম্বার দিয়ে আবার চেষ্টা করুন। ",-1)]))):m("",!0)]))])])}}};export{_a as default};
