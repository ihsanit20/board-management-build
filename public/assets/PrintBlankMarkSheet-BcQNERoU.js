import{r as S,o as Z,i as $,c as r,a as t,j as c,C as N,F as v,e as y,b as i,y as p,M as f,h as n,k as q,G as A,t as u,d as a,L as H}from"./index-CysUZERo.js";import{u as J}from"./print-DSNdZ-47.js";import{u as K}from"./zamat-DLit_Vla.js";import{u as O}from"./center-8-9f5o3_.js";const Q={class:"my-container space-y-4"},R={class:"card-bg p-4 print:hidden"},W={class:"grid md:grid-cols-3 gap-4"},X=["label"],Y=["value"],ee=["value"],te={class:"card-bg p-4 print:hidden"},le={class:"flex gap-4"},ae={key:0,class:"flex gap-4 mt-2"},re=["onUpdate:modelValue"],se={key:1,class:"space-y-2 print:space-y-0"},oe={key:0,class:"card-bg p-8"},ne={class:"flex flex-col items-center"},ue={class:"border border-black px-4 rounded-full font-bold"},de={class:"table-auto border-collapse border border-black w-full mt-4"},ie={key:0,class:"border border-black px-2 py-1"},pe={key:1,class:"border border-black px-2 py-1"},be={key:2,class:"border border-black px-2 py-1"},me={key:3,class:"border border-black px-2 py-1"},ce={key:4,class:"border border-black px-2 py-1"},ke={class:"border border-black px-2 py-1 text-center"},ve={class:"border border-black px-2 py-1"},ye={key:0,class:"border border-black px-2 py-1 text-center"},fe={key:1,class:"border border-black px-2 py-1 text-center"},xe={key:2,class:"border border-black px-2 py-1"},he={key:3,class:"border border-black px-2 py-1"},ge={key:4,class:"border border-black px-2 py-1"},Se={key:1,class:"card-bg py-6"},Ce={__name:"PrintBlankMarkSheet",setup(_e){const o=J(),D=K(),_=O(),x=S(""),h=S(""),b=S(!1),g=S(""),s=S({roll:!0,para:!0,cut_mark:!0,totalMarks:!0,comment:!0,subjects:{}});Z(async()=>{try{b.value=!0,await D.fetchZamats()}catch(d){g.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",d)}finally{b.value=!1}});const I=async d=>{if(!d){x.value="",_.centers=[];return}try{b.value=!0,await _.fetchCenters({zamat_id:d})}catch(e){g.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{b.value=!1}},P=async()=>{var d,e;if(!h.value||!x.value){g.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}g.value="";try{b.value=!0,o.centerId=x.value,o.zamatId=h.value,await o.fetchMarkSheet(),(e=(d=o.markSheetData)==null?void 0:d.subjects)!=null&&e.length&&o.markSheetData.subjects.forEach(m=>{s.value.subjects[m.name]=!0})}catch(m){g.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",m)}finally{b.value=!1}},M=$(()=>{var d,e;return((e=(d=o.markSheetData)==null?void 0:d.subjects)==null?void 0:e.filter(m=>s.value.subjects[m.name]))||[]}),G=()=>{window.print()};return(d,e)=>{var m,V,w,C,U,j,B,E,z,L,F;return a(),r("div",Q,[t("div",R,[e[12]||(e[12]=t("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),t("div",W,[t("div",null,[c(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onChange:e[1]||(e[1]=l=>I(h.value)),class:"input-1"},[e[8]||(e[8]=t("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(i(D).departments,l=>(a(),r("optgroup",{label:l.name,key:l.id},[(a(!0),r(v,null,y(l.zamats,k=>(a(),r("option",{key:k.id,value:k.id},u(k.name),9,Y))),128))],8,X))),128))],544),[[N,h.value]])]),t("div",null,[c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),class:"input-1"},[e[9]||(e[9]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(i(_).centers,l=>(a(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},u(l==null?void 0:l.institute.name),9,ee))),128))],512),[[N,x.value]])]),t("div",{class:"w-full flex gap-4"},[t("button",{onClick:P,class:"btn-2 w-full"},e[10]||(e[10]=[t("i",{class:"fas fa-search"},null,-1),p(" অনুসন্ধান ")])),t("button",{onClick:G,class:"btn-3"},e[11]||(e[11]=[t("i",{class:"fas fa-print pr-1"},null,-1),p(" প্রিন্ট ")]))])])]),t("div",te,[e[18]||(e[18]=t("h2",{class:"title-md mb-2"},"কলাম কন্ট্রোল",-1)),t("div",le,[t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.roll=l)},null,512),[[f,s.value.roll]]),e[13]||(e[13]=p(" রোল "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.para=l)},null,512),[[f,s.value.para]]),e[14]||(e[14]=p(" পারার বিবরণ "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.cut_mark=l)},null,512),[[f,s.value.cut_mark]]),e[15]||(e[15]=p(" নম্বর কর্তন "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.totalMarks=l)},null,512),[[f,s.value.totalMarks]]),e[16]||(e[16]=p(" মোট নম্বর "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.comment=l)},null,512),[[f,s.value.comment]]),e[17]||(e[17]=p(" মন্তব্য "))])]),(V=(m=i(o).markSheetData)==null?void 0:m.subjects)!=null&&V.length?(a(),r("div",ae,[(a(!0),r(v,null,y(i(o).markSheetData.subjects,l=>(a(),r("label",{key:l.name},[c(t("input",{type:"checkbox","onUpdate:modelValue":k=>s.value.subjects[l.name]=k},null,8,re),[[f,s.value.subjects[l.name]]]),p(" "+u(l.name),1)]))),128))])):n("",!0)]),b.value||i(o).loading?(a(),q(H,{key:0})):(a(),r("div",se,[(C=(w=i(o).markSheetData)==null?void 0:w.students)!=null&&C.length?(a(),r("div",oe,[e[23]||(e[23]=t("div",{class:"flex justify-center"},[t("img",{src:A,alt:"logo",class:"h-[70px] mb-2"})],-1)),t("div",ne,[t("p",ue,u((U=i(o).markSheetData)==null?void 0:U.exam_name)+" এর নম্বর পত্র ",1),t("p",null,[e[19]||(e[19]=t("b",null,"মারহালা:",-1)),p(" "+u((B=(j=i(o).markSheetData)==null?void 0:j.zamat)==null?void 0:B.name),1)]),t("p",null,[e[20]||(e[20]=t("b",null,"মারকাজ:",-1)),p(" "+u((z=(E=i(o).markSheetData)==null?void 0:E.center)==null?void 0:z.institute_name),1)])]),t("table",de,[t("thead",null,[t("tr",null,[e[21]||(e[21]=t("th",{class:"border border-black px-2 py-1"},"ক্রম",-1)),e[22]||(e[22]=t("th",{class:"border border-black px-2 py-1"},"শিক্ষার্থীর নাম",-1)),s.value.roll?(a(),r("th",ie,"রোল")):n("",!0),s.value.para?(a(),r("th",pe," পারার বিবরণ ")):n("",!0),(a(!0),r(v,null,y(M.value,l=>(a(),r("th",{key:l.name,class:"border border-black px-2 py-1"},u(l.name)+" ("+u(l.full_marks)+") ",1))),128)),s.value.cut_mark?(a(),r("th",be," নম্বর কর্তন ")):n("",!0),s.value.totalMarks?(a(),r("th",me," মোট নম্বর ")):n("",!0),s.value.comment?(a(),r("th",ce,"মন্তব্য")):n("",!0)])]),t("tbody",null,[(a(!0),r(v,null,y(i(o).markSheetData.students,(l,k)=>(a(),r("tr",{key:l.id},[t("td",ke,u(Number(k+1).toLocaleString("bn-BD")),1),t("td",ve,u(l.name),1),s.value.roll?(a(),r("td",ye,u(l.roll_number),1)):n("",!0),s.value.para?(a(),r("td",fe,u(l.para||"নেই"),1)):n("",!0),(a(!0),r(v,null,y(M.value,T=>(a(),r("td",{key:T.name,class:"border border-black px-2 py-1"}))),128)),s.value.cut_mark?(a(),r("td",xe)):n("",!0),s.value.totalMarks?(a(),r("td",he)):n("",!0),s.value.comment?(a(),r("td",ge)):n("",!0)]))),128))])]),e[24]||(e[24]=t("div",{class:"pt-10"},[t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের স্বাক্ষর ও তারিখ"),t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের নাম:")],-1))])):n("",!0),!((F=(L=i(o).markSheetData)==null?void 0:L.students)!=null&&F.length)&&!b.value?(a(),r("div",Se,e[25]||(e[25]=[t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):n("",!0)]))])}}};export{Ce as default};
