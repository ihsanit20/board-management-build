import{r as g,o as Z,i as $,c as r,a as t,j as k,C as N,F as v,e as y,b as d,y as p,M as S,h as i,k as q,G as A,t as n,d as a,L as H}from"./index-DaO24kPg.js";import{u as J}from"./print-94BasdLw.js";import{u as K}from"./zamat-CC26ynXZ.js";import{u as O}from"./center-BDoWUgHP.js";const Q={class:"my-container space-y-4"},R={class:"card-bg p-4 print:hidden"},W={class:"grid md:grid-cols-3 gap-4"},X=["label"],Y=["value"],ee=["value"],te={class:"card-bg p-4 print:hidden"},le={class:"flex gap-4"},ae={key:0,class:"flex gap-4 mt-2"},re=["onUpdate:modelValue"],se={key:1,class:"space-y-2 print:space-y-0"},oe={key:0,class:"card-bg p-8"},ne={class:"flex flex-col items-center"},ue={class:"border border-black px-4 rounded-full"},de={class:"table-auto border-collapse border border-black w-full mt-4"},ie={key:0,class:"border border-black px-2 py-1"},pe={key:1,class:"border border-black px-2 py-1"},be={key:2,class:"border border-black px-2 py-1"},me={key:3,class:"border border-black px-2 py-1"},ce={class:"border border-black px-2 py-1 text-center"},ke={class:"border border-black px-2 py-1"},ve={key:0,class:"border border-black px-2 py-1 text-center"},ye={key:1,class:"border border-black px-2 py-1 text-center"},fe={key:2,class:"border border-black px-2 py-1"},xe={key:3,class:"border border-black px-2 py-1"},he={key:1,class:"card-bg py-6"},Ve={__name:"PrintBlankMarkSheet",setup(ge){const o=J(),D=K(),_=O(),f=g(""),x=g(""),b=g(!1),h=g(""),s=g({roll:!0,para:!0,totalMarks:!0,comment:!0,subjects:{}});Z(async()=>{try{b.value=!0,await D.fetchZamats()}catch(u){h.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",u)}finally{b.value=!1}});const I=async u=>{if(!u){f.value="",_.centers=[];return}try{b.value=!0,await _.fetchCenters({zamat_id:u})}catch(e){h.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{b.value=!1}},P=async()=>{var u,e;if(!x.value||!f.value){h.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}h.value="";try{b.value=!0,o.centerId=f.value,o.zamatId=x.value,await o.fetchMarkSheet(),(e=(u=o.markSheetData)==null?void 0:u.subjects)!=null&&e.length&&o.markSheetData.subjects.forEach(m=>{s.value.subjects[m.name]=!0})}catch(m){h.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",m)}finally{b.value=!1}},M=$(()=>{var u,e;return((e=(u=o.markSheetData)==null?void 0:u.subjects)==null?void 0:e.filter(m=>s.value.subjects[m.name]))||[]}),G=()=>{window.print()};return(u,e)=>{var m,V,w,C,j,U,B,E,z,L,F;return a(),r("div",Q,[t("div",R,[e[11]||(e[11]=t("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),t("div",W,[t("div",null,[k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),onChange:e[1]||(e[1]=l=>I(x.value)),class:"input-1"},[e[7]||(e[7]=t("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(d(D).departments,l=>(a(),r("optgroup",{label:l.name,key:l.id},[(a(!0),r(v,null,y(l.zamats,c=>(a(),r("option",{key:c.id,value:c.id},n(c.name),9,Y))),128))],8,X))),128))],544),[[N,x.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),class:"input-1"},[e[8]||(e[8]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(d(_).centers,l=>(a(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},n(l==null?void 0:l.institute.name),9,ee))),128))],512),[[N,f.value]])]),t("div",{class:"w-full flex gap-4"},[t("button",{onClick:P,class:"btn-2 w-full"},e[9]||(e[9]=[t("i",{class:"fas fa-search"},null,-1),p(" অনুসন্ধান ")])),t("button",{onClick:G,class:"btn-3"},e[10]||(e[10]=[t("i",{class:"fas fa-print pr-1"},null,-1),p(" প্রিন্ট ")]))])])]),t("div",te,[e[16]||(e[16]=t("h2",{class:"title-md mb-2"},"কলাম কন্ট্রোল",-1)),t("div",le,[t("label",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.roll=l)},null,512),[[S,s.value.roll]]),e[12]||(e[12]=p(" রোল "))]),t("label",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.para=l)},null,512),[[S,s.value.para]]),e[13]||(e[13]=p(" পারার বিবরণ "))]),t("label",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.totalMarks=l)},null,512),[[S,s.value.totalMarks]]),e[14]||(e[14]=p(" মোট নাম্বার "))]),t("label",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.comment=l)},null,512),[[S,s.value.comment]]),e[15]||(e[15]=p(" মন্তব্য "))])]),(V=(m=d(o).markSheetData)==null?void 0:m.subjects)!=null&&V.length?(a(),r("div",ae,[(a(!0),r(v,null,y(d(o).markSheetData.subjects,l=>(a(),r("label",{key:l.name},[k(t("input",{type:"checkbox","onUpdate:modelValue":c=>s.value.subjects[l.name]=c},null,8,re),[[S,s.value.subjects[l.name]]]),p(" "+n(l.name),1)]))),128))])):i("",!0)]),b.value||d(o).loading?(a(),q(H,{key:0})):(a(),r("div",se,[(C=(w=d(o).markSheetData)==null?void 0:w.students)!=null&&C.length?(a(),r("div",oe,[e[21]||(e[21]=t("div",{class:"flex justify-center"},[t("img",{src:A,alt:"logo",class:"h-[70px] mb-2"})],-1)),t("div",ne,[t("p",ue,n((j=d(o).markSheetData)==null?void 0:j.exam_name)+" এর নাম্বার পত্র ",1),t("p",null,[e[17]||(e[17]=t("b",null,"মারহালা:",-1)),p(" "+n((B=(U=d(o).markSheetData)==null?void 0:U.zamat)==null?void 0:B.name),1)]),t("p",null,[e[18]||(e[18]=t("b",null,"মারকাজ:",-1)),p(" "+n((z=(E=d(o).markSheetData)==null?void 0:E.center)==null?void 0:z.institute_name),1)])]),t("table",de,[t("thead",null,[t("tr",null,[e[19]||(e[19]=t("th",{class:"border border-black px-2 py-1"},"ক্রম",-1)),e[20]||(e[20]=t("th",{class:"border border-black px-2 py-1"},"শিক্ষার্থীর নাম",-1)),s.value.roll?(a(),r("th",ie,"রোল")):i("",!0),s.value.para?(a(),r("th",pe," পারার বিবরণ ")):i("",!0),(a(!0),r(v,null,y(M.value,l=>(a(),r("th",{key:l.name,class:"border border-black px-2 py-1"},n(l.name)+" ("+n(l.full_marks)+") ",1))),128)),s.value.totalMarks?(a(),r("th",be," মোট নাম্বার ")):i("",!0),s.value.comment?(a(),r("th",me,"মন্তব্য")):i("",!0)])]),t("tbody",null,[(a(!0),r(v,null,y(d(o).markSheetData.students,(l,c)=>(a(),r("tr",{key:l.id},[t("td",ce,n(Number(c+1).toLocaleString("bn-BD")),1),t("td",ke,n(l.name),1),s.value.roll?(a(),r("td",ve,n(l.roll_number),1)):i("",!0),s.value.para?(a(),r("td",ye,n(l.para||"নেই"),1)):i("",!0),(a(!0),r(v,null,y(M.value,T=>(a(),r("td",{key:T.name,class:"border border-black px-2 py-1"}))),128)),s.value.totalMarks?(a(),r("td",fe)):i("",!0),s.value.comment?(a(),r("td",xe)):i("",!0)]))),128))])]),e[22]||(e[22]=t("div",{class:"pt-10"},[t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের স্বাক্ষর ও তারিখ")],-1))])):i("",!0),!((F=(L=d(o).markSheetData)==null?void 0:L.students)!=null&&F.length)&&!b.value?(a(),r("div",he,e[23]||(e[23]=[t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):i("",!0)]))])}}};export{Ve as default};
