import{r as _,o as q,i as A,c as r,a as t,j as b,C as P,F as y,e as f,b as u,y as i,M as c,h as n,k as H,G as J,t as d,d as a,L as K}from"./index-Cp74Rfwr.js";import{u as O}from"./print-D3lw_izs.js";import{u as Q}from"./zamat-WxxTC5aO.js";import{u as R}from"./center-jJvTpWBO.js";const W={class:"my-container space-y-4"},X={class:"card-bg p-4 print:hidden"},Y={class:"grid md:grid-cols-3 gap-4"},ee=["label"],te=["value"],le=["value"],ae={class:"card-bg p-4 print:hidden"},re={class:"flex gap-4"},se={key:0,class:"flex gap-4 mt-2"},oe=["onUpdate:modelValue"],ne={key:1,class:"space-y-2 print:space-y-0"},ue={key:0,class:"card-bg p-8"},de={class:"flex flex-col items-center gap-2"},ie={class:"border border-black px-4 rounded-full font-bold"},pe={class:"flex gap-4 justify-between w-full"},be={key:0},me={key:0},ke={class:"table-auto border-collapse border border-black w-full text-sm"},ce={key:0,class:"border border-black px-2 py-1"},ve={key:1,class:"border border-black px-2 py-1"},ye={key:2,class:"border border-black px-2 py-1"},fe={key:3,class:"border border-black px-2 py-1"},xe={key:4,class:"border border-black px-2 py-1"},he={key:5,class:"border border-black px-2 py-1"},ge={class:"border border-black px-2 py-1 text-center"},_e={key:0,class:"border border-black px-2 py-1"},Se={key:1,class:"border border-black px-2 py-1 text-center"},De={key:2,class:"border border-black px-2 py-1 text-center"},Ve={key:3,class:"border border-black px-2 py-1"},we={key:4,class:"border border-black px-2 py-1"},Me={key:5,class:"border border-black px-2 py-1"},Ue={key:1,class:"card-bg py-6"},Le={__name:"PrintBlankMarkSheet",setup(Ce){const o=O(),D=Q(),S=R(),x=_(""),h=_(""),m=_(!1),g=_(""),s=_({name:!0,roll:!0,para:!0,cut_mark:!0,totalMarks:!0,comment:!0,center:!0,subjects:{}});q(async()=>{try{m.value=!0,await D.fetchZamats()}catch(p){g.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",p)}finally{m.value=!1}});const G=async p=>{if(!p){x.value="",S.centers=[];return}try{m.value=!0,await S.fetchCenters({zamat_id:p})}catch(e){g.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{m.value=!1}},T=async()=>{var p,e;if(!h.value||!x.value){g.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}g.value="";try{m.value=!0,o.centerId=x.value,o.zamatId=h.value,await o.fetchMarkSheet(),(e=(p=o.markSheetData)==null?void 0:p.subjects)!=null&&e.length&&o.markSheetData.subjects.forEach(k=>{s.value.subjects[k.name]=!0})}catch(k){g.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",k)}finally{m.value=!1}},V=A(()=>{var p,e;return((e=(p=o.markSheetData)==null?void 0:p.subjects)==null?void 0:e.filter(k=>s.value.subjects[k.name]))||[]}),Z=()=>{window.print()};return(p,e)=>{var k,w,M,U,C,j,B,E,z,L,F,N,I;return a(),r("div",W,[t("div",X,[e[14]||(e[14]=t("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),t("div",Y,[t("div",null,[b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onChange:e[1]||(e[1]=l=>G(h.value)),class:"input-1"},[e[10]||(e[10]=t("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(a(!0),r(y,null,f(u(D).departments,l=>(a(),r("optgroup",{label:l.name,key:l.id},[(a(!0),r(y,null,f(l.zamats,v=>(a(),r("option",{key:v.id,value:v.id},d(v.name),9,te))),128))],8,ee))),128))],544),[[P,h.value]])]),t("div",null,[b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),class:"input-1"},[e[11]||(e[11]=t("option",{value:"",selected:"",disabled:""},"- মারকায নির্বাচন করুন -",-1)),(a(!0),r(y,null,f(u(S).centers,l=>(a(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},d(l==null?void 0:l.institute.name),9,le))),128))],512),[[P,x.value]])]),t("div",{class:"w-full flex gap-4"},[t("button",{onClick:T,class:"btn-2 w-full"},e[12]||(e[12]=[t("i",{class:"fas fa-search"},null,-1),i(" অনুসন্ধান ")])),t("button",{onClick:Z,class:"btn-3"},e[13]||(e[13]=[t("i",{class:"fas fa-print pr-1"},null,-1),i(" প্রিন্ট ")]))])])]),t("div",ae,[e[22]||(e[22]=t("h2",{class:"title-md mb-2"},"কলাম কন্ট্রোল",-1)),t("div",re,[t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.name=l)},null,512),[[c,s.value.name]]),e[15]||(e[15]=i(" নাম "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.roll=l)},null,512),[[c,s.value.roll]]),e[16]||(e[16]=i(" রোল "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.para=l)},null,512),[[c,s.value.para]]),e[17]||(e[17]=i(" পারার বিবরণ "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.cut_mark=l)},null,512),[[c,s.value.cut_mark]]),e[18]||(e[18]=i(" নম্বর কর্তন "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.totalMarks=l)},null,512),[[c,s.value.totalMarks]]),e[19]||(e[19]=i(" মোট নম্বর "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=l=>s.value.comment=l)},null,512),[[c,s.value.comment]]),e[20]||(e[20]=i(" মন্তব্য "))]),t("label",null,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=l=>s.value.center=l)},null,512),[[c,s.value.center]]),e[21]||(e[21]=i(" মারকায "))])]),(w=(k=u(o).markSheetData)==null?void 0:k.subjects)!=null&&w.length?(a(),r("div",se,[(a(!0),r(y,null,f(u(o).markSheetData.subjects,l=>(a(),r("label",{key:l.name},[b(t("input",{type:"checkbox","onUpdate:modelValue":v=>s.value.subjects[l.name]=v},null,8,oe),[[c,s.value.subjects[l.name]]]),i(" "+d(l.name),1)]))),128))])):n("",!0)]),m.value||u(o).loading?(a(),H(K,{key:0})):(a(),r("div",ne,[(U=(M=u(o).markSheetData)==null?void 0:M.students)!=null&&U.length?(a(),r("div",ue,[e[26]||(e[26]=t("div",{class:"flex justify-center"},[t("img",{src:J,alt:"logo",class:"h-[70px]"})],-1)),t("div",de,[t("p",ie,d((C=u(o).markSheetData)==null?void 0:C.exam_name)+" এর নম্বর পত্র ",1),t("div",pe,[t("p",null,[e[23]||(e[23]=t("b",null,"মারহালা:",-1)),i(" "+d((B=(j=u(o).markSheetData)==null?void 0:j.zamat)==null?void 0:B.name)+" ",1),(E=u(o).markSheetData)!=null&&E.group_name?(a(),r("span",be,"(গ্রুপ: "+d((z=u(o).markSheetData)==null?void 0:z.group_name)+")",1)):n("",!0)]),s.value.center?(a(),r("p",me,[e[24]||(e[24]=t("b",null,"মারকায:",-1)),i(" "+d((F=(L=u(o).markSheetData)==null?void 0:L.center)==null?void 0:F.institute_name),1)])):n("",!0)])]),t("table",ke,[t("thead",null,[t("tr",null,[e[25]||(e[25]=t("th",{class:"border border-black px-2 py-1"},"ক্রম",-1)),s.value.name?(a(),r("th",ce," পরীক্ষার্থীর নাম ")):n("",!0),s.value.roll?(a(),r("th",ve,"রোল")):n("",!0),s.value.para?(a(),r("th",ye," পারার বিবরণ ")):n("",!0),(a(!0),r(y,null,f(V.value,l=>(a(),r("th",{key:l.name,class:"border border-black px-2 py-1"},d(l.name)+" ("+d(l.full_marks)+") ",1))),128)),s.value.cut_mark?(a(),r("th",fe," নম্বর কর্তন ")):n("",!0),s.value.totalMarks?(a(),r("th",xe," মোট নম্বর ")):n("",!0),s.value.comment?(a(),r("th",he,"মন্তব্য")):n("",!0)])]),t("tbody",null,[(a(!0),r(y,null,f(u(o).markSheetData.students,(l,v)=>(a(),r("tr",{key:l.id},[t("td",ge,d(Number(v+1).toLocaleString("bn-BD")),1),s.value.name?(a(),r("td",_e,d(l.name),1)):n("",!0),s.value.roll?(a(),r("td",Se,d(l.roll_number),1)):n("",!0),s.value.para?(a(),r("td",De,d(l.para||"নেই"),1)):n("",!0),(a(!0),r(y,null,f(V.value,$=>(a(),r("td",{key:$.name,class:"border border-black px-2 py-1"}))),128)),s.value.cut_mark?(a(),r("td",Ve)):n("",!0),s.value.totalMarks?(a(),r("td",we)):n("",!0),s.value.comment?(a(),r("td",Me)):n("",!0)]))),128))])]),e[27]||(e[27]=t("div",{class:"pt-10"},[t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের স্বাক্ষর ও তারিখ"),t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের নাম:")],-1))])):n("",!0),!((I=(N=u(o).markSheetData)==null?void 0:N.students)!=null&&I.length)&&!m.value?(a(),r("div",Ue,e[28]||(e[28]=[t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):n("",!0)]))])}}};export{Le as default};
