import{r as _,o as q,i as A,c as r,a as t,j as c,C as P,F as v,e as y,b as u,y as p,M as f,h as n,k as H,G as J,t as d,d as a,L as K}from"./index-Z2bpx0gj.js";import{u as O}from"./print-CZzNMwzs.js";import{u as Q}from"./zamat-xHlLjh89.js";import{u as R}from"./center-C3tg9pLh.js";const W={class:"my-container space-y-4"},X={class:"card-bg p-4 print:hidden"},Y={class:"grid md:grid-cols-3 gap-4"},ee=["label"],te=["value"],le=["value"],ae={class:"card-bg p-4 print:hidden"},re={class:"flex gap-4"},se={key:0,class:"flex gap-4 mt-2"},oe=["onUpdate:modelValue"],ne={key:1,class:"space-y-2 print:space-y-0"},ue={key:0,class:"card-bg p-8"},de={class:"flex flex-col items-center gap-2"},ie={class:"border border-black px-4 rounded-full font-bold"},pe={class:"flex gap-4 justify-between w-full"},be={key:0},me={class:"table-auto border-collapse border border-black w-full text-sm"},ce={key:0,class:"border border-black px-2 py-1"},ke={key:1,class:"border border-black px-2 py-1"},ve={key:2,class:"border border-black px-2 py-1"},ye={key:3,class:"border border-black px-2 py-1"},fe={key:4,class:"border border-black px-2 py-1"},xe={class:"border border-black px-2 py-1 text-center"},he={class:"border border-black px-2 py-1"},ge={key:0,class:"border border-black px-2 py-1 text-center"},_e={key:1,class:"border border-black px-2 py-1 text-center"},Se={key:2,class:"border border-black px-2 py-1"},De={key:3,class:"border border-black px-2 py-1"},we={key:4,class:"border border-black px-2 py-1"},Me={key:1,class:"card-bg py-6"},Ee={__name:"PrintBlankMarkSheet",setup(Ve){const o=O(),D=Q(),S=R(),x=_(""),h=_(""),b=_(!1),g=_(""),s=_({roll:!0,para:!0,cut_mark:!0,totalMarks:!0,comment:!0,subjects:{}});q(async()=>{try{b.value=!0,await D.fetchZamats()}catch(i){g.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",i)}finally{b.value=!1}});const G=async i=>{if(!i){x.value="",S.centers=[];return}try{b.value=!0,await S.fetchCenters({zamat_id:i})}catch(e){g.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{b.value=!1}},T=async()=>{var i,e;if(!h.value||!x.value){g.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}g.value="";try{b.value=!0,o.centerId=x.value,o.zamatId=h.value,await o.fetchMarkSheet(),(e=(i=o.markSheetData)==null?void 0:i.subjects)!=null&&e.length&&o.markSheetData.subjects.forEach(m=>{s.value.subjects[m.name]=!0})}catch(m){g.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",m)}finally{b.value=!1}},w=A(()=>{var i,e;return((e=(i=o.markSheetData)==null?void 0:i.subjects)==null?void 0:e.filter(m=>s.value.subjects[m.name]))||[]}),Z=()=>{window.print()};return(i,e)=>{var m,M,V,C,j,U,B,E,z,L,F,N,I;return a(),r("div",W,[t("div",X,[e[12]||(e[12]=t("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),t("div",Y,[t("div",null,[c(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),onChange:e[1]||(e[1]=l=>G(h.value)),class:"input-1"},[e[8]||(e[8]=t("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(u(D).departments,l=>(a(),r("optgroup",{label:l.name,key:l.id},[(a(!0),r(v,null,y(l.zamats,k=>(a(),r("option",{key:k.id,value:k.id},d(k.name),9,te))),128))],8,ee))),128))],544),[[P,h.value]])]),t("div",null,[c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),class:"input-1"},[e[9]||(e[9]=t("option",{value:"",selected:"",disabled:""},"- মারকায নির্বাচন করুন -",-1)),(a(!0),r(v,null,y(u(S).centers,l=>(a(),r("option",{key:l==null?void 0:l.id,value:l==null?void 0:l.id},d(l==null?void 0:l.institute.name),9,le))),128))],512),[[P,x.value]])]),t("div",{class:"w-full flex gap-4"},[t("button",{onClick:T,class:"btn-2 w-full"},e[10]||(e[10]=[t("i",{class:"fas fa-search"},null,-1),p(" অনুসন্ধান ")])),t("button",{onClick:Z,class:"btn-3"},e[11]||(e[11]=[t("i",{class:"fas fa-print pr-1"},null,-1),p(" প্রিন্ট ")]))])])]),t("div",ae,[e[18]||(e[18]=t("h2",{class:"title-md mb-2"},"কলাম কন্ট্রোল",-1)),t("div",re,[t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.roll=l)},null,512),[[f,s.value.roll]]),e[13]||(e[13]=p(" রোল "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.para=l)},null,512),[[f,s.value.para]]),e[14]||(e[14]=p(" পারার বিবরণ "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>s.value.cut_mark=l)},null,512),[[f,s.value.cut_mark]]),e[15]||(e[15]=p(" নম্বর কর্তন "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.totalMarks=l)},null,512),[[f,s.value.totalMarks]]),e[16]||(e[16]=p(" মোট নম্বর "))]),t("label",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.comment=l)},null,512),[[f,s.value.comment]]),e[17]||(e[17]=p(" মন্তব্য "))])]),(M=(m=u(o).markSheetData)==null?void 0:m.subjects)!=null&&M.length?(a(),r("div",se,[(a(!0),r(v,null,y(u(o).markSheetData.subjects,l=>(a(),r("label",{key:l.name},[c(t("input",{type:"checkbox","onUpdate:modelValue":k=>s.value.subjects[l.name]=k},null,8,oe),[[f,s.value.subjects[l.name]]]),p(" "+d(l.name),1)]))),128))])):n("",!0)]),b.value||u(o).loading?(a(),H(K,{key:0})):(a(),r("div",ne,[(C=(V=u(o).markSheetData)==null?void 0:V.students)!=null&&C.length?(a(),r("div",ue,[e[23]||(e[23]=t("div",{class:"flex justify-center"},[t("img",{src:J,alt:"logo",class:"h-[70px]"})],-1)),t("div",de,[t("p",ie,d((j=u(o).markSheetData)==null?void 0:j.exam_name)+" এর নম্বর পত্র ",1),t("div",pe,[t("p",null,[e[19]||(e[19]=t("b",null,"মারহালা:",-1)),p(" "+d((B=(U=u(o).markSheetData)==null?void 0:U.zamat)==null?void 0:B.name)+" ",1),(E=u(o).markSheetData)!=null&&E.group_name?(a(),r("span",be,"(গ্রুপ: "+d((z=u(o).markSheetData)==null?void 0:z.group_name)+")",1)):n("",!0)]),t("p",null,[e[20]||(e[20]=t("b",null,"মারকায:",-1)),p(" "+d((F=(L=u(o).markSheetData)==null?void 0:L.center)==null?void 0:F.institute_name),1)])])]),t("table",me,[t("thead",null,[t("tr",null,[e[21]||(e[21]=t("th",{class:"border border-black px-2 py-1"},"ক্রম",-1)),e[22]||(e[22]=t("th",{class:"border border-black px-2 py-1"},"পরীক্ষার্থীর নাম",-1)),s.value.roll?(a(),r("th",ce,"রোল")):n("",!0),s.value.para?(a(),r("th",ke," পারার বিবরণ ")):n("",!0),(a(!0),r(v,null,y(w.value,l=>(a(),r("th",{key:l.name,class:"border border-black px-2 py-1"},d(l.name)+" ("+d(l.full_marks)+") ",1))),128)),s.value.cut_mark?(a(),r("th",ve," নম্বর কর্তন ")):n("",!0),s.value.totalMarks?(a(),r("th",ye," মোট নম্বর ")):n("",!0),s.value.comment?(a(),r("th",fe,"মন্তব্য")):n("",!0)])]),t("tbody",null,[(a(!0),r(v,null,y(u(o).markSheetData.students,(l,k)=>(a(),r("tr",{key:l.id},[t("td",xe,d(Number(k+1).toLocaleString("bn-BD")),1),t("td",he,d(l.name),1),s.value.roll?(a(),r("td",ge,d(l.roll_number),1)):n("",!0),s.value.para?(a(),r("td",_e,d(l.para||"নেই"),1)):n("",!0),(a(!0),r(v,null,y(w.value,$=>(a(),r("td",{key:$.name,class:"border border-black px-2 py-1"}))),128)),s.value.cut_mark?(a(),r("td",Se)):n("",!0),s.value.totalMarks?(a(),r("td",De)):n("",!0),s.value.comment?(a(),r("td",we)):n("",!0)]))),128))])]),e[24]||(e[24]=t("div",{class:"pt-10"},[t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের স্বাক্ষর ও তারিখ"),t("hr",{class:"border-black w-40"}),t("p",null,"পরীক্ষকের নাম:")],-1))])):n("",!0),!((I=(N=u(o).markSheetData)==null?void 0:N.students)!=null&&I.length)&&!b.value?(a(),r("div",Me,e[25]||(e[25]=[t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):n("",!0)]))])}}};export{Ee as default};
