import{r as b,o as I,c as s,a,m as V,C as z,F as i,e as p,b as o,y as f,x as N,t as u,h as B,d as r,L as P}from"./index-Dsm7fe1q.js";import{u as U}from"./print-Tr9DSOU6.js";import{u as T}from"./zamat-DaKnjUw0.js";import{u as Z}from"./center-OwDjkqyw.js";const $={class:"my-container space-y-4"},j={class:"card-bg p-4 print:hidden"},q={class:"grid md:grid-cols-3 gap-4"},A=["label"],G=["value"],H=["value"],J={key:1,class:"space-y-2 print:space-y-0"},K={key:0},O={class:"table-auto border-collapse border border-gray-300 w-full mt-4"},Q={class:"border border-gray-300 px-2 py-1 text-center"},R={class:"border border-gray-300 px-2 py-1"},W={key:1,class:"card-bg py-6"},re={__name:"PrintBlankMarkSheet",setup(X){const l=U(),h=T(),k=Z(),m=b(""),v=b(""),n=b(!1),y=b("");I(async()=>{try{n.value=!0,await h.fetchZamats()}catch(d){y.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",d)}finally{n.value=!1}});const E=async d=>{if(!d){m.value="",k.centers=[];return}try{n.value=!0,await k.fetchCenters({zamat_id:d})}catch(e){y.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{n.value=!1}},F=async()=>{if(!v.value||!m.value){y.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}y.value="";try{n.value=!0,l.centerId=m.value,l.zamatId=v.value,await l.fetchMarkSheet(),console.log("Mark Sheet Data:",l.markSheetData)}catch(d){y.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",d)}finally{n.value=!1}};return(d,e)=>{var g,S,x,D,_,w,C,M;return r(),s("div",$,[a("div",j,[e[6]||(e[6]=a("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),a("div",q,[a("div",null,[V(a("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),onChange:e[1]||(e[1]=t=>E(v.value)),class:"input-1"},[e[3]||(e[3]=a("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(r(!0),s(i,null,p(o(h).departments,t=>(r(),s("optgroup",{label:t.name,key:t.id},[(r(!0),s(i,null,p(t.zamats,c=>(r(),s("option",{key:c.id,value:c.id},u(c.name),9,G))),128))],8,A))),128))],544),[[z,v.value]])]),a("div",null,[V(a("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),class:"input-1"},[e[4]||(e[4]=a("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(r(!0),s(i,null,p(o(k).centers,t=>(r(),s("option",{key:t==null?void 0:t.id,value:t==null?void 0:t.id},u(t==null?void 0:t.institute.name),9,H))),128))],512),[[z,m.value]])]),a("div",{class:"w-full"},[a("button",{onClick:F,class:"btn-2 w-full"},e[5]||(e[5]=[a("i",{class:"fas fa-search"},null,-1),f(" অনুসন্ধান ")]))])])]),n.value||o(l).loading?(r(),N(P,{key:0})):(r(),s("div",J,[(S=(g=o(l).markSheetData)==null?void 0:g.students)!=null&&S.length?(r(),s("div",K,[a("p",null,[e[7]||(e[7]=a("b",null,"মারকাজ:",-1)),f(" "+u((D=(x=o(l).markSheetData)==null?void 0:x.center)==null?void 0:D.institute_name),1)]),a("p",null,[e[8]||(e[8]=a("b",null,"মারহালা:",-1)),f(" "+u((w=(_=o(l).markSheetData)==null?void 0:_.zamat)==null?void 0:w.name),1)]),a("table",O,[a("thead",null,[a("tr",null,[e[9]||(e[9]=a("th",{class:"border border-gray-300 px-2 py-1"},"#",-1)),e[10]||(e[10]=a("th",{class:"border border-gray-300 px-2 py-1"},"শিক্ষার্থীর নাম",-1)),(r(!0),s(i,null,p(o(l).markSheetData.subjects,t=>(r(),s("th",{key:t.name,class:"border border-gray-300 px-2 py-1"},u(t.name)+" ("+u(t.full_marks)+") ",1))),128))])]),a("tbody",null,[(r(!0),s(i,null,p(o(l).markSheetData.students,(t,c)=>(r(),s("tr",{key:t.id},[a("td",Q,u(c+1),1),a("td",R,u(t.name),1),(r(!0),s(i,null,p(o(l).markSheetData.subjects,L=>(r(),s("td",{key:L.name,class:"border border-gray-300 px-2 py-1"}))),128))]))),128))])])])):B("",!0),!((M=(C=o(l).markSheetData)==null?void 0:C.students)!=null&&M.length)&&!n.value?(r(),s("div",W,e[11]||(e[11]=[a("p",{class:"text-center text-red-500"}," কোন শিক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):B("",!0)]))])}}};export{re as default};
