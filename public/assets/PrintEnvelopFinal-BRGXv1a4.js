import{B as V,r as u,o as j,c as n,a as t,j as E,D as P,F as x,e as y,b as f,v as A,G as I,k as M,h as _,t as o,d as l,y as c,L as T}from"./index-CbqNRksm.js";import{_ as z}from"./logo-name-BFhNVwnM.js";import{u as K}from"./area-BQzqXbYU.js";import{u as N}from"./print-BErzIuPc.js";const U={class:"my-container max-w-4xl card-bg p-4 md:p-10"},G={class:"flex md:flex-row flex-col gap-2 justify-between items-center mb-4 print:hidden"},O={class:"grid md:grid-cols-2 gap-4"},q={class:"w-full"},H=["value"],J={class:"w-full"},Q={key:1,class:"text-red-500 text-center"},R={key:2},W={class:"grid grid-cols-2 divide-x-2"},X={class:"flex justify-center text-black font-bold text-md px-2 items-center"},Y={key:0},Z={class:"grid grid-cols-2 divide-x-2 text-xs"},$={class:"divide-y-2"},ee={class:"py-0.5"},te={class:"py-0.5"},se={class:"py-0.5"},le={class:"py-0.5"},ne={class:"divide-y-2 text-xs"},oe={class:"py-0.5 text-xs"},ce={__name:"PrintEnvelopFinal",setup(ae){const p=N(),k=V(),w=K(),i=u(!1),d=u(null),b=u(null),g=u(""),v=u(""),S=async(a=null,e=null)=>{i.value=!0,d.value=null;try{await p.fetchPrintEnvelopFinal(a,e)}catch(s){d.value=s.message||"Failed to fetch envelop data"}finally{i.value=!1}},F=async()=>{var a,e;i.value=!0;try{await k.fetchLastExam(),b.value=k.exam}catch(s){d.value=((e=(a=s.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to fetch exam"}finally{i.value=!1}},B=a=>a.reduce((s,m)=>s+parseInt(m.student_count,10),0).toLocaleString("bn-BD"),L=()=>{window.print()},C=()=>{S(g.value,v.value)},D=()=>{S(null,v.value)};return j(()=>{w.fetchAreas(),F()}),(a,e)=>(l(),n("div",U,[t("div",G,[e[3]||(e[3]=t("h2",{class:"title-xl text-center"},"চূড়ান্ত ইনভেলাপ প্রিন্ট",-1)),t("div",O,[t("div",q,[E(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),onChange:C,class:"input-1 py-1 w-full"},[e[2]||(e[2]=t("option",{value:"",disabled:""},"- অঞ্চল নির্বাচন করুন -",-1)),(l(!0),n(x,null,y(f(w).areas,s=>(l(),n("option",{key:s.id,value:s.name},o(s.name),9,H))),128))],544),[[P,g.value]])]),t("div",J,[E(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),type:"text",class:"input-1 w-full text-black px-3 py-1 text-center",placeholder:"ইলহাক নং",onKeyup:I(D,["enter"])},null,544),[[A,v.value]])])]),t("button",{onClick:L,class:"btn-2"},"প্রিন্ট")]),i.value?(l(),M(T,{key:0,class:"shadow-none"})):_("",!0),d.value?(l(),n("div",Q,o(d.value),1)):_("",!0),f(p).printEnvelopFinal&&Object.keys(f(p).printEnvelopFinal).length?(l(),n("div",R,[(l(!0),n(x,null,y(f(p).printEnvelopFinal,(s,m)=>(l(),n("div",{key:m},[(l(!0),n(x,null,y(s,r=>(l(),n("div",{key:r.institute_code,class:"py-3",style:{"page-break-inside":"avoid"}},[t("div",W,[e[4]||(e[4]=t("div",{class:"flex justify-center"},[t("img",{src:z,alt:"logo",class:"h-[50px] mb-2"})],-1)),t("div",X,[b.value?(l(),n("p",Y,o(b.value.name)+"-এর পরীক্ষার্থী তথ্য",1)):_("",!0)])]),e[11]||(e[11]=t("hr",{class:"w-full"},null,-1)),t("div",Z,[t("div",$,[t("p",ee,[e[5]||(e[5]=t("b",null,"মাদরাসার নাম:",-1)),e[6]||(e[6]=t("br",null,null,-1)),c(" "+o(r.institute_name),1)]),t("p",te,[e[7]||(e[7]=t("b",null,"ইলহাক নং:",-1)),c(" "+o(r.institute_code),1)]),t("p",se,[e[8]||(e[8]=t("b",null,"ফোন:",-1)),c(" "+o(r.phone),1)]),t("p",le,[e[9]||(e[9]=t("b",null,"অঞ্চল:",-1)),c(" "+o(m),1)])]),t("div",ne,[(l(!0),n(x,null,y(r.zamat_counts,h=>(l(),n("p",{class:"py-0.5 pl-2 text-xs",key:h.zamat_name},[t("b",null,o(h.zamat_name)+": ",1),t("span",null,o(parseInt(h.student_count).toLocaleString("bn-BD"))+" জন",1)]))),128)),t("p",oe,[e[10]||(e[10]=t("b",{class:"pl-2"},"মোট পরীক্ষার্থীর সংখ্যা:",-1)),c(" "+o(B(r.zamat_counts))+" জন ",1)])])]),e[12]||(e[12]=t("div",{class:"w-full border-b-2 border-dashed p-2"},null,-1))]))),128))]))),128))])):_("",!0)]))}};export{ce as default};
