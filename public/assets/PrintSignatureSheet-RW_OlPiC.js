import{r as f,o as q,i as A,c as l,a as t,j as _,C as I,F as u,e as i,b as o,y,M as P,h as p,k as H,G as J,t as b,d as s,L as K}from"./index-Ds8opBUQ.js";import{u as O}from"./print-CZMGT3Bz.js";import{u as Q}from"./zamat-CJmwSokB.js";import{u as R}from"./center-D-lnPILY.js";const W={class:"my-container space-y-4"},X={class:"card-bg p-4 print:hidden"},Y={class:"grid md:grid-cols-3 gap-4"},ee=["label"],te=["value"],re=["value"],se={class:"card-bg p-4 print:hidden"},le={class:"flex gap-4"},ae={key:0,class:"flex gap-4 mt-2"},oe=["onUpdate:modelValue"],ne={key:1,class:"space-y-2 print:space-y-0"},de={key:0,class:"card-bg p-8"},ue={class:"flex flex-col items-center gap-2"},ie={class:"border border-black px-4 rounded-full font-bold"},be={class:"flex gap-4 justify-between w-full"},pe={key:0},ce={class:"table-auto border-collapse border border-black w-full text-sm"},ke={key:0,class:"border border-black px-2 py-1"},me={class:"border border-black px-2 py-1 text-center"},ve={class:"border border-black px-2 py-1"},ye={class:"border border-black px-2 py-1 text-center"},xe={key:0,class:"border border-black px-2 py-1"},ge={key:0,class:"border border-black px-2 py-1 text-right"},he={key:0,class:"border border-black px-2 py-1 text-right"},fe={class:"border border-black"},_e={key:0,class:"border border-black px-2 py-1 text-right"},Se={class:"border border-black"},De={key:0,class:"border border-black px-2 py-1 text-right"},we={key:1,class:"card-bg py-6"},ze={__name:"PrintSignatureSheet",setup(je){const a=O(),D=Q(),S=R(),x=f(""),g=f(""),c=f(!1),h=f(""),n=f({signature:!0,subjects:{}});q(async()=>{try{c.value=!0,await D.fetchZamats()}catch(d){h.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error("Error fetching zamats:",d)}finally{c.value=!1}});const G=async d=>{if(!d){x.value="",S.centers=[];return}try{c.value=!0,await S.fetchCenters({zamat_id:d})}catch(e){h.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error("Error fetching centers:",e)}finally{c.value=!1}},T=async()=>{var d,e;if(!g.value||!x.value){h.value="জামাত এবং সেন্টার নির্বাচন করুন।";return}h.value="";try{c.value=!0,a.centerId=x.value,a.zamatId=g.value,await a.fetchMarkSheet(),(e=(d=a.markSheetData)==null?void 0:d.subjects)!=null&&e.length&&a.markSheetData.subjects.forEach(k=>{n.value.subjects[k.name]=!0})}catch(k){h.value="মার্কশিট লোড করতে সমস্যা হয়েছে।",console.error("Error in handleFetchMarkSheet:",k)}finally{c.value=!1}},v=A(()=>{var d,e;return((e=(d=a.markSheetData)==null?void 0:d.subjects)==null?void 0:e.filter(k=>n.value.subjects[k.name]))||[]}),Z=()=>{window.print()};return(d,e)=>{var k,w,j,C,V,M,E,z,B,L,U,F,N;return s(),l("div",W,[t("div",X,[e[8]||(e[8]=t("h1",{class:"title-lg text-center"},"মার্কশিট প্রিন্ট",-1)),t("div",Y,[t("div",null,[_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>g.value=r),onChange:e[1]||(e[1]=r=>G(g.value)),class:"input-1"},[e[4]||(e[4]=t("option",{value:"",disabled:""},"- জামাত নির্বাচন করুন -",-1)),(s(!0),l(u,null,i(o(D).departments,r=>(s(),l("optgroup",{label:r.name,key:r.id},[(s(!0),l(u,null,i(r.zamats,m=>(s(),l("option",{key:m.id,value:m.id},b(m.name),9,te))),128))],8,ee))),128))],544),[[I,g.value]])]),t("div",null,[_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>x.value=r),class:"input-1"},[e[5]||(e[5]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(s(!0),l(u,null,i(o(S).centers,r=>(s(),l("option",{key:r==null?void 0:r.id,value:r==null?void 0:r.id},b(r==null?void 0:r.institute.name),9,re))),128))],512),[[I,x.value]])]),t("div",{class:"w-full flex gap-4"},[t("button",{onClick:T,class:"btn-2 w-full"},e[6]||(e[6]=[t("i",{class:"fas fa-search"},null,-1),y(" অনুসন্ধান ")])),t("button",{onClick:Z,class:"btn-3"},e[7]||(e[7]=[t("i",{class:"fas fa-print pr-1"},null,-1),y(" প্রিন্ট ")]))])])]),t("div",se,[e[10]||(e[10]=t("h2",{class:"title-md mb-2"},"কলাম কন্ট্রোল",-1)),t("div",le,[t("label",null,[_(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=r=>n.value.signature=r)},null,512),[[P,n.value.signature]]),e[9]||(e[9]=y(" স্বাক্ষর "))])]),(w=(k=o(a).markSheetData)==null?void 0:k.subjects)!=null&&w.length?(s(),l("div",ae,[(s(!0),l(u,null,i(o(a).markSheetData.subjects,r=>(s(),l("label",{key:r.name},[_(t("input",{type:"checkbox","onUpdate:modelValue":m=>n.value.subjects[r.name]=m},null,8,oe),[[P,n.value.subjects[r.name]]]),y(" "+b(r.name),1)]))),128))])):p("",!0)]),c.value||o(a).loading?(s(),H(K,{key:0})):(s(),l("div",ne,[(C=(j=o(a).markSheetData)==null?void 0:j.students)!=null&&C.length?(s(),l("div",de,[e[20]||(e[20]=t("div",{class:"flex justify-center"},[t("img",{src:J,alt:"logo",class:"h-[70px]"})],-1)),t("div",ue,[t("p",ie,b((V=o(a).markSheetData)==null?void 0:V.exam_name)+" এর স্বাক্ষরপত্র ",1),t("div",be,[t("p",null,[e[11]||(e[11]=t("b",null,"মারহালা:",-1)),y(" "+b((E=(M=o(a).markSheetData)==null?void 0:M.zamat)==null?void 0:E.name)+" ",1),(z=o(a).markSheetData)!=null&&z.group_name?(s(),l("span",pe,"(গ্রুপ: "+b((B=o(a).markSheetData)==null?void 0:B.group_name)+")",1)):p("",!0)]),t("p",null,[e[12]||(e[12]=t("b",null,"মারকাজ:",-1)),y(" "+b((U=(L=o(a).markSheetData)==null?void 0:L.center)==null?void 0:U.institute_name),1)])])]),t("table",ce,[t("thead",null,[t("tr",null,[e[13]||(e[13]=t("th",{class:"border border-black px-2 py-1"},"ক্রম",-1)),e[14]||(e[14]=t("th",{class:"border border-black px-2 py-1"},"পরীক্ষার্থীর নাম",-1)),e[15]||(e[15]=t("th",{class:"border border-black px-2 py-1"},"রোল",-1)),(s(!0),l(u,null,i(v.value,r=>(s(),l("th",{key:r.name,class:"border border-black px-2 py-1 w-28"},b(r.name),1))),128)),n.value.signature?(s(),l("th",ke," পরীক্ষার্থীর স্বাক্ষর ")):p("",!0)])]),t("tbody",null,[(s(!0),l(u,null,i(o(a).markSheetData.students,(r,m)=>(s(),l("tr",{key:r.id},[t("td",me,b(Number(m+1).toLocaleString("bn-BD")),1),t("td",ve,b(r.name),1),t("td",ye,b(r.roll_number),1),(s(!0),l(u,null,i(v.value,$=>(s(),l("td",{key:$.name,class:"border border-black px-2 py-1"}))),128)),n.value.signature?(s(),l("td",xe)):p("",!0)]))),128)),t("tr",null,[e[16]||(e[16]=t("td",{colspan:"3",class:"border border-black px-2 py-1 text-right font-bold"}," মোট উপস্থিতি ",-1)),(s(!0),l(u,null,i(v.value,r=>(s(),l("td",{key:r.name,class:"border border-black px-2 py-1 text-right"}," জন "))),128)),n.value.signature?(s(),l("td",ge," জন ")):p("",!0)]),t("tr",null,[e[17]||(e[17]=t("td",{colspan:"3",class:"border border-black px-2 py-1 text-right font-bold"}," মোট অনুপস্থিতি ",-1)),(s(!0),l(u,null,i(v.value,r=>(s(),l("td",{key:r.name,class:"border border-black px-2 py-1 text-right"}," জন "))),128)),n.value.signature?(s(),l("td",he," জন ")):p("",!0)]),t("tr",fe,[e[18]||(e[18]=t("td",{colspan:"3",class:"border border-black px-2 py-1 text-right font-bold"}," হল পরিচালক/পরীক্ষক -এর নাম ",-1)),(s(!0),l(u,null,i(v.value,r=>(s(),l("td",{key:r.name,class:"border border-black px-2 py-1 text-right"}))),128)),n.value.signature?(s(),l("td",_e)):p("",!0)]),t("tr",Se,[e[19]||(e[19]=t("td",{colspan:"3",class:"border border-black px-2 text-right font-bold py-4"}," হল পরিচালক/পরীক্ষক -এর স্বাক্ষর ও তারিখ ",-1)),(s(!0),l(u,null,i(v.value,r=>(s(),l("td",{key:r.name,class:"border border-black px-2 py-1 text-right"}))),128)),n.value.signature?(s(),l("td",De)):p("",!0)])])])])):p("",!0),!((N=(F=o(a).markSheetData)==null?void 0:F.students)!=null&&N.length)&&!c.value?(s(),l("div",we,e[21]||(e[21]=[t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক তথ্য দিয়ে অনুসন্ধান করুন। ",-1)]))):p("",!0)]))])}}};export{ze as default};
