import{r as g,B as q,o as C,c as r,a as t,x as L,l as B,m as d,C as x,F as p,e as m,b as k,f as E,w as N,p as M,y as F,d as l,t as c,v,z as G,L as R}from"./index-D0y9kQRj.js";import{a as j,u as P}from"./para-group-DvejOqPZ.js";import{u as T}from"./zamat-CcORccZu.js";import{u as $}from"./center-78ogexVr.js";const I={class:"my-container space-y-4"},A={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},H=["label"],J=["value"],K=["disabled"],O=["value"],W=["disabled"],X=["value"],Y={class:"space-y-2 w-full"},Z={class:"font-bold"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},te=["onUpdate:modelValue"],ae=["onUpdate:modelValue"],se=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],le=["onClick"],re={class:"mt-4 flex gap-4 justify-between"},ce={__name:"QuranQuestionEdit",setup(ie){const f=$(),w=T(),b=j(),z=P(),_=M().params.id,i=g(!1),y=g(""),o=g({center_id:"",zamat_id:"",para_group_id:"",questions:[]}),S=async()=>{try{i.value=!0;const s=await z.fetchQuestionById(_);if(!s)throw new Error(`No data found for question ID: ${_}`);o.value={center_id:s.center_id||"",zamat_id:s.zamat_id||"",para_group_id:s.para_group_id||"",questions:s.questions||[]},s.zamat_id&&await V(s.zamat_id)}catch(s){y.value="ফর্ম ডেটা লোড করতে সমস্যা হয়েছে।",console.error("Error loading form data:",s)}finally{i.value=!1}},V=async s=>{if(!s){f.centers=[],b.paraGroups=[];return}try{i.value=!0,await f.fetchCenters({zamat_id:s}),await b.fetchParaGroups({zamat_id:s})}catch(e){y.value="সেন্টার বা পাড়া গ্রুপ লোড করতে সমস্যা হয়েছে।",console.error(e)}finally{i.value=!1}};q(()=>o.value.zamat_id,async s=>{await V(s)});const Q=async()=>{try{i.value=!0,await z.updateQuestion(_,o.value)}catch(s){console.error("Error updating Quran question:",s),alert("কুরআন প্রশ্ন আপডেট করতে সমস্যা হয়েছে।")}finally{i.value=!1}},U=()=>{o.value.questions.push({id:Date.now(),surah:"",verses:"",text:"",page:""})},h=s=>{o.value.questions.splice(s,1)};return C(async()=>{try{i.value=!0,await w.fetchZamats(),await S()}catch(s){y.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{i.value=!1}}),(s,e)=>{const D=F("RouterLink");return l(),r("div",I,[e[17]||(e[17]=t("div",null,[t("h1",{class:"title-lg"},"কুরআন প্রশ্ন সম্পাদনা করুন")],-1)),i.value?(l(),L(R,{key:0})):(l(),r("form",{key:1,onSubmit:B(Q,["prevent"]),class:"card-bg md:p-8 p-4"},[t("div",A,[t("div",null,[e[4]||(e[4]=t("label",{for:"zamat_id",class:"block text-gray-700 font-medium"},"মারহালা নির্বাচন করুন",-1)),d(t("select",{id:"zamat_id","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.zamat_id=a),class:"input-1",required:""},[e[3]||(e[3]=t("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(l(!0),r(p,null,m(k(w).departments,a=>(l(),r("optgroup",{label:a.name,key:a.id},[(l(!0),r(p,null,m(a.zamats,n=>(l(),r("option",{key:n.id,value:n.id},c(n.name),9,J))),128))],8,H))),128))],512),[[x,o.value.zamat_id]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"para_group_id",class:"block text-gray-700 font-medium"},"পাড়া গ্রুপ নির্বাচন করুন",-1)),d(t("select",{id:"para_group_id","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.para_group_id=a),class:"input-1",disabled:!o.value.zamat_id,required:""},[e[5]||(e[5]=t("option",{value:"",disabled:""},"-পাড়া গ্রুপ নির্বাচন করুন-",-1)),(l(!0),r(p,null,m(k(b).paraGroups,a=>(l(),r("option",{key:a.id,value:a.id},c(a.name),9,O))),128))],8,K),[[x,o.value.para_group_id]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"center_id",class:"block text-gray-700 font-medium"},"মারকাজ নির্বাচন করুন",-1)),d(t("select",{id:"center_id","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.center_id=a),class:"input-1",disabled:!o.value.zamat_id,required:""},[e[7]||(e[7]=t("option",{value:"",disabled:""},"-মারকাজ নির্বাচন করুন-",-1)),(l(!0),r(p,null,m(k(f).centers,a=>{var n;return l(),r("option",{key:a.id,value:a==null?void 0:a.institute_id},c((n=a==null?void 0:a.institute)==null?void 0:n.name),9,X)}),128))],8,W),[[x,o.value.center_id]])])]),e[16]||(e[16]=t("h2",{class:"title-md text-center"},"প্রশ্নসমূহ",-1)),(l(!0),r(p,null,m(o.value.questions,(a,n)=>(l(),r("div",{key:a.id,class:"flex items-center gap-2 border p-4 rounded-md space-y-2 w-full bg-gray-50"},[t("div",Y,[t("p",Z,c(Number(n+1).toLocaleString("bn-BD"))+" নং প্রশ্ন:",1),t("div",ee,[t("div",null,[e[9]||(e[9]=t("label",{for:"surah",class:"block text-gray-700 font-medium"},"সুরা নম্বর",-1)),d(t("input",{id:"surah","onUpdate:modelValue":u=>a.surah=u,type:"number",placeholder:"সুরা নম্বর",class:"input-1",required:""},null,8,te),[[v,a.surah]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"verses",class:"block text-gray-700 font-medium"},"আয়াত",-1)),d(t("input",{id:"verses","onUpdate:modelValue":u=>a.verses=u,type:"text",placeholder:"আয়াত (উদাহরণ: 1-5)",class:"input-1"},null,8,ae),[[v,a.verses]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"page",class:"block text-gray-700 font-medium"},"পৃষ্ঠা নম্বর",-1)),d(t("input",{id:"page","onUpdate:modelValue":u=>a.page=u,type:"number",placeholder:"পৃষ্ঠা নম্বর",class:"input-1",required:""},null,8,se),[[v,a.page]])])]),t("div",null,[e[12]||(e[12]=t("label",{for:"text",class:"block text-gray-700 font-medium"},"কুরআনের টেক্সট",-1)),d(t("textarea",{id:"text","onUpdate:modelValue":u=>a.text=u,placeholder:"কুরআনের টেক্সট",class:"input-1",dir:"rtl",required:""},null,8,oe),[[v,a.text]])])]),t("button",{type:"button",onClick:u=>h(n),class:"btn-icon"},e[13]||(e[13]=[t("i",{class:"fas fa-trash-alt text-red-600"},null,-1)]),8,le)]))),128)),t("div",{class:"flex justify-center"},[t("button",{type:"button",onClick:U,class:"btn-4"},"আরও প্রশ্ন যোগ করুন")]),t("div",re,[E(D,{to:{name:"QuranQuestionList"},type:"button",class:"btn-contrast"},{default:N(()=>e[14]||(e[14]=[G(" পিছনে যান ")])),_:1}),e[15]||(e[15]=t("button",{type:"submit",class:"btn-2"},"সংরক্ষণ করুন",-1))])],32))])}}};export{ce as default};
