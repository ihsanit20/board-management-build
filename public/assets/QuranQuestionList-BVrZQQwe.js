import{r as y,i as F,o as M,B as P,c as l,a as t,f as V,w as Q,m as k,C as S,F as d,e as c,b as v,z as w,t as o,h as b,x as R,y as z,d as a,L as I}from"./index-DsWO-fgf.js";import{u as T,a as A}from"./para-group-C09iXLTK.js";import{u as H}from"./zamat-CnWM1aiJ.js";import{u as J}from"./center-V3WSCCro.js";const K={class:"my-container space-y-4"},O={class:"flex items-center justify-between"},W={class:"card-bg p-4"},X={class:"grid md:grid-cols-4 gap-4"},Y=["label"],Z=["value"],$=["value"],q=["value"],ee={key:0,class:"text-center text-gray-700 font-semibold mb-4"},te={key:0,class:"text-center text-red-500 mt-4"},se={key:2,class:"text-center text-gray-500 mt-4"},ae={key:3,class:"grid gap-4"},le={class:"text-lg font-bold text-gray-700"},oe={class:"text-md font-semibold text-gray-600"},ne={class:"text-md font-semibold text-gray-600"},re={class:"space-y-2"},ue={class:"font-bold"},ie={class:"flex gap-4"},de={class:""},ce={class:""},ve={class:""},pe={class:"flex justify-end space-x-4 mt-4"},he={__name:"QuranQuestionList",setup(me){const p=T(),h=J(),L=H(),x=A(),m=y(""),_=y(""),g=y(""),n=y(!1),u=y(""),D=F(()=>p.questions.length);M(async()=>{try{n.value=!0,await L.fetchZamats()}catch(r){u.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(r)}finally{n.value=!1}}),P(_,async r=>{if(!r){m.value="",g.value="",h.centers=[],x.paraGroups=[];return}try{n.value=!0,await h.fetchCenters({zamat_id:r}),await x.fetchParaGroups({zamat_id:r})}catch(s){u.value="সেন্টার বা পাড়া গ্রুপ লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{n.value=!1}});const G=async()=>{if(!_.value||!m.value){u.value="মারহালা এবং মারকাজ নির্বাচন করুন।";return}try{n.value=!0,await p.fetchQuestions(m.value,_.value,g.value)}catch(r){u.value="প্রশ্ন লোড করতে সমস্যা হয়েছে।",console.error(r)}finally{n.value=!1}};return(r,s)=>{const U=z("router-link"),j=z("RouterLink");return a(),l("div",null,[t("div",K,[t("div",O,[s[4]||(s[4]=t("h1",{class:"title-lg"},"কুরআন প্রশ্ন তালিকা",-1)),V(U,{to:"/quran-questions/add",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:Q(()=>s[3]||(s[3]=[w(" নতুন প্রশ্ন যোগ করুন ")])),_:1})]),t("div",W,[t("div",X,[t("div",null,[k(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),class:"input-1"},[s[5]||(s[5]=t("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(a(!0),l(d,null,c(v(L).departments,e=>(a(),l("optgroup",{label:e.name,key:e.id},[(a(!0),l(d,null,c(e.zamats,i=>(a(),l("option",{key:i.id,value:i.id},o(i.name),9,Z))),128))],8,Y))),128))],512),[[S,_.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),class:"input-1"},[s[6]||(s[6]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(a(!0),l(d,null,c(v(h).centers,e=>(a(),l("option",{key:e==null?void 0:e.institute.id,value:e==null?void 0:e.institute.id},o(e==null?void 0:e.institute.name),9,$))),128))],512),[[S,m.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>g.value=e),class:"input-1"},[s[7]||(s[7]=t("option",{value:"",selected:"",disabled:""},"- পাড়া গ্রুপ নির্বাচন করুন -",-1)),(a(!0),l(d,null,c(v(x).paraGroups,e=>(a(),l("option",{key:e.id,value:e.id},o(e.name),9,q))),128))],512),[[S,g.value]])]),t("div",{class:"w-full"},[t("button",{onClick:G,class:"btn-2 w-full"},s[8]||(s[8]=[t("i",{class:"fas fa-search"},null,-1),w(" অনুসন্ধান ")]))])]),D.value>0?(a(),l("div",ee," প্রাপ্ত প্রশ্ন সংখ্যা: "+o(Number(D.value).toLocaleString("bn-BD"))+" টি ",1)):b("",!0)]),u.value?(a(),l("div",te,o(u.value),1)):b("",!0),n.value?(a(),R(I,{key:1})):b("",!0),!n.value&&v(p).questions.length===0?(a(),l("div",se," কোন প্রশ্ন পাওয়া যায়নি। ")):b("",!0),v(p).questions.length>0&&!n.value?(a(),l("div",ae,[(a(!0),l(d,null,c(v(p).questions,e=>{var i,B,C,N;return a(),l("div",{key:e.id,class:"card-bg p-4"},[t("h2",le," মারকাজ: "+o((B=(i=e==null?void 0:e.center)==null?void 0:i.institute)==null?void 0:B.name),1),t("h3",oe,"মারহালা: "+o((C=e==null?void 0:e.zamat)==null?void 0:C.name),1),t("h3",ne," পারা গ্রুপ: "+o((N=e==null?void 0:e.para_group)==null?void 0:N.name),1),t("ul",re,[(a(!0),l(d,null,c(e.questions,(f,E)=>(a(),l("li",{key:f.surah,class:"p-2 rounded"},[t("div",null,[t("p",ue,o(Number(E+1).toLocaleString("bn-BD"))+" নং প্রশ্ন:",1),t("div",ie,[t("p",de,"সূরা নং: "+o(Number(f.surah).toLocaleString("bn-BD")),1),t("p",ce,"আয়াত নং: "+o(f.verses),1),t("p",ve,"পৃষ্ঠা নং: "+o(Number(f.page).toLocaleString("bn-BD")),1)]),t("p",null,"আয়াত: "+o(f.text),1)])]))),128))]),t("div",pe,[V(j,{to:"",class:"btn-3"},{default:Q(()=>s[9]||(s[9]=[t("i",{class:""},null,-1),w(" সম্পানা ")])),_:1})])])}),128))])):b("",!0)])])}}};export{he as default};
