import{r as y,o as V,B as D,c as l,a as t,f as z,w as j,m as S,C,F as f,e as p,b as _,z as Q,t as r,h,x as E,y as F,d as a,L as M}from"./index-ClzD5fxD.js";import{u as U}from"./quran-question-BJoWhsxY.js";import{u as I}from"./zamat-C_kT7V8z.js";import{u as T}from"./center-C1Nc80_d.js";const Z={class:"my-container space-y-4"},$={class:"flex items-center justify-between"},A={class:"grid md:grid-cols-3 gap-4 card-bg p-4"},G=["label"],H=["value"],J=["value"],K={key:0,class:"text-center text-red-500 mt-4"},O={key:2,class:"text-center text-gray-500 mt-4"},P={key:3,class:"grid gap-4"},R={class:"text-lg font-bold text-gray-700"},W={class:"text-md font-semibold text-gray-600"},X={class:"space-y-2"},Y={class:"font-bold"},q={class:"flex gap-4"},ee={class:""},te={class:""},se={class:""},ae={class:"flex justify-end space-x-4 mt-4"},le=["onClick"],de={__name:"QuranQuestionList",setup(oe){const c=U(),b=T(),g=I(),v=y(""),m=y(""),o=y(!1),u=y("");V(async()=>{try{o.value=!0,await g.fetchZamats()}catch(n){u.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(n)}finally{o.value=!1}}),D(m,async n=>{if(!n){v.value="",b.centers=[];return}try{o.value=!0,await b.fetchCenters({zamat_id:n})}catch(s){u.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{o.value=!1}});const x=async()=>{if(v.value&&m.value)try{o.value=!0,await c.fetchQuestions(v.value,m.value)}catch(n){u.value="প্রশ্ন লোড করতে সমস্যা হয়েছে।",console.error(n)}finally{o.value=!1}else u.value="মারহালা এবং মারকাজ নির্বাচন করুন।"},B=async n=>{try{o.value=!0,await c.deleteQuestion(n),await x()}catch(s){u.value="প্রশ্ন মুছতে সমস্যা হয়েছে।",console.error(s)}finally{o.value=!1}};return(n,s)=>{const L=F("router-link");return a(),l("div",null,[t("div",Z,[t("div",$,[s[3]||(s[3]=t("h1",{class:"title-lg"},"কুরআন প্রশ্ন তালিকা",-1)),z(L,{to:"/quran-questions/add",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:j(()=>s[2]||(s[2]=[Q(" নতুন প্রশ্ন যোগ করুন ")])),_:1})]),t("div",A,[t("div",null,[S(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),class:"input-1",required:""},[s[4]||(s[4]=t("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(a(!0),l(f,null,p(_(g).departments,e=>(a(),l("optgroup",{label:e.name,key:e.id},[(a(!0),l(f,null,p(e.zamats,i=>(a(),l("option",{key:i.id,value:i.id},r(i.name),9,H))),128))],8,G))),128))],512),[[C,m.value]])]),t("div",null,[S(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),class:"input-1"},[s[5]||(s[5]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(a(!0),l(f,null,p(_(b).centers,e=>(a(),l("option",{key:e==null?void 0:e.institute.id,value:e==null?void 0:e.institute.id},r(e==null?void 0:e.institute.name),9,J))),128))],512),[[C,v.value]])]),t("div",{class:"w-full"},[t("button",{onClick:x,class:"btn-2 w-full"},s[6]||(s[6]=[t("i",{class:"fas fa-search"},null,-1),Q(" অনুসন্ধান ")]))])]),u.value?(a(),l("div",K,r(u.value),1)):h("",!0),o.value?(a(),E(M,{key:1})):h("",!0),!o.value&&_(c).questions.length===0?(a(),l("div",O," কোন প্রশ্ন পাওয়া যায়নি। ")):h("",!0),_(c).questions.length>0&&!o.value?(a(),l("div",P,[(a(!0),l(f,null,p(_(c).questions,e=>{var i,k,w;return a(),l("div",{key:e.id,class:"card-bg p-4"},[t("h2",R," মারকাজ: "+r((k=(i=e==null?void 0:e.center)==null?void 0:i.institute)==null?void 0:k.name),1),t("h3",W,"মারহালা: "+r((w=e==null?void 0:e.zamat)==null?void 0:w.name),1),t("ul",X,[(a(!0),l(f,null,p(e.questions,(d,N)=>(a(),l("li",{key:d.surah,class:"p-2 rounded"},[t("div",null,[t("p",Y,r(Number(N+1).toLocaleString("bn-BD"))+" নং প্রশ্ন:",1),t("div",q,[t("p",ee,"সূরা নং: "+r(Number(d.surah).toLocaleString("bn-BD")),1),t("p",te,"আয়াত নং: "+r(d.verses),1),t("p",se,"পৃষ্ঠা নং: "+r(Number(d.page).toLocaleString("bn-BD")),1)]),t("p",null,"আয়াত: "+r(d.text),1)])]))),128))]),t("div",ae,[t("button",{onClick:d=>B(e.id),class:"text-red-600 hover:text-red-900 font-medium"}," মুছুন ",8,le)])])}),128))])):h("",!0)])])}}};export{de as default};
