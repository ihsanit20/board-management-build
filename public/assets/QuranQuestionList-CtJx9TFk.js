import{r as m,i as F,o as M,C as P,c as o,a as e,f as Q,w as C,j as g,D as S,F as u,e as i,b as c,k as V,t as l,h as y,m as R,l as z,d as a,L as I}from"./index-DXxrbR31.js";import{u as T}from"./quran-question-CMeL8jrf.js";import{u as A}from"./zamat-BeKk-UwW.js";import{u as H}from"./center-DO_xZaIe.js";import{u as J}from"./para-group-u_UYfntb.js";const K={class:"px-4 space-y-4"},O={class:"flex items-center justify-between"},W={class:"card-bg p-4"},X={class:"grid md:grid-cols-4 gap-4"},Y=["label"],Z=["value"],$=["value"],q=["value"],ee={key:0,class:"text-center text-red-500"},te={key:2,class:"text-center text-gray-500"},se={key:3,class:"card-bg p-4"},ae={key:0,class:"text-center text-gray-700 font-semibold"},oe={class:"table-auto w-full border-collapse border border-black"},le={class:"border border-black px-2 py-1"},re={class:"border border-black px-2 py-1"},ne={class:"border border-black px-2 py-1"},de={class:"border border-black px-2 py-1"},ue={class:"border border-black px-2 py-1"},ie={class:"text-sm"},ce={class:"flex gap-4"},pe={class:"font-bold"},be={class:""},ve={class:""},_e={class:""},me={class:"border border-black px-2 py-1 text-center"},we={__name:"QuranQuestionList",setup(ye){const p=T(),k=H(),w=A(),x=J(),b=m(""),v=m(""),f=m(""),r=m(!1),d=m(""),D=F(()=>p.questions.length);M(async()=>{try{r.value=!0,await w.fetchZamats()}catch(n){d.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(n)}finally{r.value=!1}}),P(v,async n=>{if(!n){b.value="",f.value="",k.centers=[],x.paraGroups=[];return}try{r.value=!0,await k.fetchCenters({zamat_id:n}),await x.fetchParaGroups({zamat_id:n})}catch(s){d.value="সেন্টার বা পাড়া গ্রুপ লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{r.value=!1}});const G=async()=>{if(!v.value||!b.value){d.value="মারহালা এবং মারকায নির্বাচন করুন।";return}try{r.value=!0,await p.fetchQuestions(b.value,v.value,f.value)}catch(n){d.value="প্রশ্ন লোড করতে সমস্যা হয়েছে।",console.error(n)}finally{r.value=!1}};return(n,s)=>{const E=z("router-link"),U=z("RouterLink");return a(),o("div",null,[e("div",K,[e("div",O,[s[4]||(s[4]=e("h1",{class:"title-lg"},"কুরআন প্রশ্ন তালিকা",-1)),Q(E,{to:"/quran-questions/add",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:C(()=>s[3]||(s[3]=[V(" প্রশ্ন যোগ করুন ")])),_:1})]),e("div",W,[e("div",X,[e("div",null,[g(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),class:"input-1"},[s[5]||(s[5]=e("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(a(!0),o(u,null,i(c(w).departments,t=>(a(),o("optgroup",{label:t.name,key:t.id},[(a(!0),o(u,null,i(t.zamats,_=>(a(),o("option",{key:_.id,value:_.id},l(_.name),9,Z))),128))],8,Y))),128))],512),[[S,v.value]])]),e("div",null,[g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),class:"input-1"},[s[6]||(s[6]=e("option",{value:"",selected:"",disabled:""},"- মারকায নির্বাচন করুন -",-1)),(a(!0),o(u,null,i(c(k).centers,t=>(a(),o("option",{key:t==null?void 0:t.institute.id,value:t==null?void 0:t.institute.id},l(t==null?void 0:t.institute.name),9,$))),128))],512),[[S,b.value]])]),e("div",null,[g(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t),class:"input-1"},[s[7]||(s[7]=e("option",{value:"",selected:"",disabled:""},"- পাড়া গ্রুপ নির্বাচন করুন -",-1)),(a(!0),o(u,null,i(c(x).paraGroups,t=>(a(),o("option",{key:t.id,value:t.id},l(t.name),9,q))),128))],512),[[S,f.value]])]),e("div",{class:"w-full"},[e("button",{onClick:G,class:"btn-2 w-full"},s[8]||(s[8]=[e("i",{class:"fas fa-search"},null,-1),V(" অনুসন্ধান ")]))])])]),d.value?(a(),o("div",ee,l(d.value),1)):y("",!0),r.value?(a(),R(I,{key:1})):y("",!0),!r.value&&c(p).questions.length===0?(a(),o("div",te," কোন প্রশ্ন পাওয়া যায়নি। ")):y("",!0),c(p).questions.length>0&&!r.value?(a(),o("div",se,[D.value>0?(a(),o("div",ae," প্রাপ্ত প্রশ্ন সংখ্যা: "+l(Number(D.value).toLocaleString("bn-BD"))+" টি ",1)):y("",!0),e("table",oe,[s[10]||(s[10]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"border border-black px-2 py-1"},"#"),e("th",{class:"border border-black px-2 py-1"},"মারকায"),e("th",{class:"border border-black px-2 py-1"},"মারহালা"),e("th",{class:"border border-black px-2 py-1"},"পাড়া গ্রুপ"),e("th",{class:"border border-black px-2 py-1"},"প্রশ্ন"),e("th",{class:"border border-black px-2 py-1"},"অ্যাকশন")])],-1)),e("tbody",null,[(a(!0),o(u,null,i(c(p).questions,(t,_)=>{var L,B,N;return a(),o("tr",{key:t.id},[e("td",le,l(Number(_+1).toLocaleString("bn-BD")),1),e("td",re,l((L=t==null?void 0:t.center)==null?void 0:L.name),1),e("td",ne,l((B=t==null?void 0:t.zamat)==null?void 0:B.name),1),e("td",de,l((N=t==null?void 0:t.para_group)==null?void 0:N.name),1),e("td",ue,[e("ul",ie,[(a(!0),o(u,null,i(t.questions,(h,j)=>(a(),o("li",{key:h.surah,class:""},[e("div",ce,[e("p",pe,l(Number(j+1).toLocaleString("bn-BD"))+" নং প্রশ্ন: ",1),e("p",be,"সূরা নং: "+l(Number(h.surah).toLocaleString("bn-BD")),1),e("p",ve,"আয়াত নং: "+l(h.verses),1),e("p",_e,"পৃষ্ঠা নং: "+l(Number(h.page).toLocaleString("bn-BD")),1)])]))),128))])]),e("td",me,[Q(U,{to:{name:"QuranQuestionEdit",params:{id:t.id}},class:"btn-icon"},{default:C(()=>s[9]||(s[9]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["to"])])])}),128))])])])):y("",!0)])])}}};export{we as default};
