import{r as y,i as U,o as j,B as E,c as l,a as t,f as F,w as M,m as k,C as w,F as v,e as p,b as m,z as V,t as o,h,x as P,y as I,d as a,L as T}from"./index-D4Zoog1v.js";import{u as $,a as A}from"./para-group-CC1Sitb-.js";import{u as H}from"./zamat-D-gj_I4h.js";import{u as J}from"./center-ByhPIAtm.js";const K={class:"my-container space-y-4"},O={class:"flex items-center justify-between"},R={class:"card-bg p-4"},W={class:"grid md:grid-cols-4 gap-4"},X=["label"],Y=["value"],Z=["value"],q=["value"],ee={key:0,class:"text-center text-gray-700 font-semibold mb-4"},te={key:0,class:"text-center text-red-500 mt-4"},se={key:2,class:"text-center text-gray-500 mt-4"},ae={key:3,class:"grid gap-4"},le={class:"text-lg font-bold text-gray-700"},oe={class:"text-md font-semibold text-gray-600"},ne={class:"text-md font-semibold text-gray-600"},re={class:"space-y-2"},ue={class:"font-bold"},ie={class:"flex gap-4"},de={class:""},ce={class:""},ve={class:""},pe={class:"flex justify-end space-x-4 mt-4"},me=["onClick"],xe={__name:"QuranQuestionList",setup(_e){const i=$(),g=J(),S=H(),x=A(),_=y(""),f=y(""),b=y(""),n=y(!1),u=y(""),C=U(()=>i.questions.length);j(async()=>{try{n.value=!0,await S.fetchZamats()}catch(r){u.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(r)}finally{n.value=!1}}),E(f,async r=>{if(!r){_.value="",b.value="",g.centers=[],x.paraGroups=[];return}try{n.value=!0,await g.fetchCenters({zamat_id:r}),await x.fetchParaGroups({zamat_id:r})}catch(s){u.value="সেন্টার বা পাড়া গ্রুপ লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{n.value=!1}});const D=async()=>{if(!f.value||!_.value){u.value="মারহালা এবং মারকাজ নির্বাচন করুন।";return}try{n.value=!0,await i.fetchQuestions(_.value,f.value,b.value)}catch(r){u.value="প্রশ্ন লোড করতে সমস্যা হয়েছে।",console.error(r)}finally{n.value=!1}},N=async r=>{try{n.value=!0,await i.deleteQuestion(r),await D()}catch(s){u.value="প্রশ্ন মুছতে সমস্যা হয়েছে।",console.error(s)}finally{n.value=!1}};return(r,s)=>{const z=I("router-link");return a(),l("div",null,[t("div",K,[t("div",O,[s[4]||(s[4]=t("h1",{class:"title-lg"},"কুরআন প্রশ্ন তালিকা",-1)),F(z,{to:"/quran-questions/add",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:M(()=>s[3]||(s[3]=[V(" নতুন প্রশ্ন যোগ করুন ")])),_:1})]),t("div",R,[t("div",W,[t("div",null,[k(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),class:"input-1"},[s[5]||(s[5]=t("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(a(!0),l(v,null,p(m(S).departments,e=>(a(),l("optgroup",{label:e.name,key:e.id},[(a(!0),l(v,null,p(e.zamats,d=>(a(),l("option",{key:d.id,value:d.id},o(d.name),9,Y))),128))],8,X))),128))],512),[[w,f.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),class:"input-1"},[s[6]||(s[6]=t("option",{value:"",selected:"",disabled:""},"- মারকাজ নির্বাচন করুন -",-1)),(a(!0),l(v,null,p(m(g).centers,e=>(a(),l("option",{key:e==null?void 0:e.institute.id,value:e==null?void 0:e.institute.id},o(e==null?void 0:e.institute.name),9,Z))),128))],512),[[w,_.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>b.value=e),class:"input-1"},[s[7]||(s[7]=t("option",{value:"",selected:"",disabled:""},"- পাড়া গ্রুপ নির্বাচন করুন -",-1)),(a(!0),l(v,null,p(m(x).paraGroups,e=>(a(),l("option",{key:e.id,value:e.id},o(e.name),9,q))),128))],512),[[w,b.value]])]),t("div",{class:"w-full"},[t("button",{onClick:D,class:"btn-2 w-full"},s[8]||(s[8]=[t("i",{class:"fas fa-search"},null,-1),V(" অনুসন্ধান ")]))])]),C.value>0?(a(),l("div",ee," প্রাপ্ত প্রশ্ন সংখ্যা: "+o(C.value)+" টি ",1)):h("",!0)]),u.value?(a(),l("div",te,o(u.value),1)):h("",!0),n.value?(a(),P(T,{key:1})):h("",!0),!n.value&&m(i).questions.length===0?(a(),l("div",se," কোন প্রশ্ন পাওয়া যায়নি। ")):h("",!0),m(i).questions.length>0&&!n.value?(a(),l("div",ae,[(a(!0),l(v,null,p(m(i).questions,e=>{var d,Q,B,L;return a(),l("div",{key:e.id,class:"card-bg p-4"},[t("h2",le," মারকাজ: "+o((Q=(d=e==null?void 0:e.center)==null?void 0:d.institute)==null?void 0:Q.name),1),t("h3",oe,"মারহালা: "+o((B=e==null?void 0:e.zamat)==null?void 0:B.name),1),t("h3",ne," পাড়া গ্রুপ: "+o((L=e==null?void 0:e.para_group)==null?void 0:L.name),1),t("ul",re,[(a(!0),l(v,null,p(e.questions,(c,G)=>(a(),l("li",{key:c.surah,class:"p-2 rounded"},[t("div",null,[t("p",ue,o(Number(G+1).toLocaleString("bn-BD"))+" নং প্রশ্ন:",1),t("div",ie,[t("p",de,"সূরা নং: "+o(Number(c.surah).toLocaleString("bn-BD")),1),t("p",ce,"আয়াত নং: "+o(c.verses),1),t("p",ve,"পৃষ্ঠা নং: "+o(Number(c.page).toLocaleString("bn-BD")),1)]),t("p",null,"আয়াত: "+o(c.text),1)])]))),128))]),t("div",pe,[t("button",{onClick:c=>N(e.id),class:"text-red-600 hover:text-red-900 font-medium"}," মুছুন ",8,me)])])}),128))])):h("",!0)])])}}};export{xe as default};
