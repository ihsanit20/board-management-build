import{O as N,r as p,P as R,i as D,o as z,B as j,c as r,a as e,j as S,C as B,F as _,e as x,b as h,y as E,t as n,h as v,k as I,d as l,L as F}from"./index-DqDkBzdm.js";import{u as M}from"./center-wYCYJk3s.js";import{u as U}from"./zamat-jhdJVZb2.js";const q=N("result",()=>{const k=p([]),u=p([]);async function y(m,i){var d,o;try{const a=await R.get("/last-exam-result-data",{params:{center_id:m,zamat_id:i}});k.value=((d=a==null?void 0:a.data)==null?void 0:d.results)||[],u.value=((o=a==null?void 0:a.data)==null?void 0:o.students)||[]}catch(a){console.error("Error fetching Quran questions:",a)}}return{results:k,students:u,fetchResultData:y}}),O={class:"px-4 space-y-4"},P={class:"card-bg p-4"},Q={class:"grid md:grid-cols-4 gap-4"},T=["label"],Z=["value"],A=["value"],G={key:0,class:"text-center text-red-500"},H={key:2,class:"text-center text-gray-500"},J={key:3,class:"card-bg p-4"},K={class:"flex justify-center items-center gap-4"},W={key:0,class:"text-center text-gray-700 font-semibold"},X={key:1,class:"text-center text-gray-700 font-semibold"},Y={class:"table-auto w-full border-collapse border border-black"},$={class:"border border-black px-2 py-1"},ee={class:"border border-black px-2 py-1"},te={class:"border border-black px-2 py-1"},se={class:"border border-black px-2 py-1 text-center"},ne={__name:"ResultListView",setup(k){const u=q(),y=M(),m=U(),i=p(""),d=p(""),o=p(!1),a=p(""),C=D(()=>u.results.length),b=D(()=>u.students.length);z(async()=>{try{o.value=!0,await m.fetchZamats()}catch(c){a.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(c)}finally{o.value=!1}}),j(d,async c=>{if(!c){i.value="",y.centers=[];return}try{o.value=!0,await y.fetchCenters({zamat_id:c})}catch(s){a.value="সেন্টার লোড করতে সমস্যা হয়েছে।",console.error(s)}finally{o.value=!1}});const L=async()=>{if(!d.value||!i.value){a.value="মারহালা এবং মারকায নির্বাচন করুন।";return}try{o.value=!0,await u.fetchResultData(i.value,d.value)}catch(c){a.value="ডাটা লোড করতে সমস্যা হয়েছে।",console.error(c)}finally{o.value=!1}};return(c,s)=>(l(),r("div",null,[e("div",O,[s[7]||(s[7]=e("div",{class:"flex items-center justify-between"},[e("h1",{class:"title-lg"},"রেজাল্ট: পরিক্ষার ফলাফল")],-1)),e("div",P,[e("div",Q,[e("div",null,[S(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),class:"input-1"},[s[2]||(s[2]=e("option",{value:"",disabled:""},"-মারহালা সিলেক্ট করুন-",-1)),(l(!0),r(_,null,x(h(m).departments,t=>(l(),r("optgroup",{label:t.name,key:t.id},[(l(!0),r(_,null,x(t.zamats,f=>(l(),r("option",{key:f.id,value:f.id},n(f.name),9,Z))),128))],8,T))),128))],512),[[B,d.value]])]),e("div",null,[S(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),class:"input-1"},[s[3]||(s[3]=e("option",{value:"",selected:"",disabled:""},"- মারকায নির্বাচন করুন -",-1)),(l(!0),r(_,null,x(h(y).centers,t=>(l(),r("option",{key:t==null?void 0:t.institute.id,value:t==null?void 0:t.institute.id},n(t==null?void 0:t.institute.name),9,A))),128))],512),[[B,i.value]])]),e("div",{class:"w-full"},[e("button",{onClick:L,class:"btn-2 w-full"},s[4]||(s[4]=[e("i",{class:"fas fa-search"},null,-1),E(" অনুসন্ধান ")]))])])]),a.value?(l(),r("div",G,n(a.value),1)):v("",!0),o.value?(l(),I(F,{key:1})):v("",!0),!o.value&&b.value===0&&C.value===0?(l(),r("div",H," কোন ডাটা পাওয়া যায়নি। ")):v("",!0),b.value>0&&!o.value?(l(),r("div",J,[e("div",K,[b.value>0?(l(),r("div",W," পরীক্ষার্থীর সংখ্যা: "+n(Number(b.value).toLocaleString("bn-BD"))+" টি ",1)):v("",!0),b.value>0?(l(),r("div",X," পরীক্ষার্থীর সংখ্যা: "+n(Number(b.value).toLocaleString("bn-BD"))+" টি ",1)):v("",!0)]),e("table",Y,[s[6]||(s[6]=e("thead",null,[e("tr",{class:"bg-gray-100"},[e("th",{class:"border border-black px-2 py-1"},"#"),e("th",{class:"border border-black px-2 py-1"},"পরীক্ষার্থীর নাম"),e("th",{class:"border border-black px-2 py-1"},"মারহালা"),e("th",{class:"border border-black px-2 py-1"},"ফলাফল"),e("th",{class:"border border-black px-2 py-1"},"অ্যাকশন")])],-1)),e("tbody",null,[(l(!0),r(_,null,x(h(u).students,(t,f)=>{var g,w;return l(),r("tr",{key:t.id},[e("td",$,n(Number(f+1).toLocaleString("bn-BD")),1),e("td",ee,n(t==null?void 0:t.name),1),e("td",te,n((g=t==null?void 0:t.zamat)==null?void 0:g.name),1),e("td",se,n((w=h(u).results)==null?void 0:w.find(V=>parseInt(V.student_id)===parseInt(t.id))),1),s[5]||(s[5]=e("td",{class:"border border-black px-2 py-1 text-center"},"--",-1))])}),128))])])])):v("",!0)])]))}};export{ne as default};
