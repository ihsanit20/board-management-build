import{u as b}from"./sms-BA5B_ezy.js";import{r as m,o as x,c as l,a as s,f as h,w as v,k as f,b as r,F as k,e as g,t,h as w,z as L,d as n,y as i,L as M}from"./index-DZbPWMGi.js";const D={class:"my-container space-y-4"},B={class:"md:flex justify-between items-center"},C={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},N={key:0,class:"min-w-full table-auto"},P={class:"border px-4 py-2"},V={class:"border px-4 py-2"},F={class:"border px-4 py-2"},j={class:"border px-4 py-2"},R={class:"border px-4 py-2"},T={class:"border px-4 py-2"},$={class:"border px-4 py-2"},z={class:"border px-4 py-2"},E={key:1,class:"text-center text-red-600 mt-4"},q={key:2,class:"flex justify-center mt-4"},A=["disabled"],G={class:"mx-2"},K={__name:"SmsLogs",setup(H){const a=b(),d=m(1),_=m(10),u=m(!0);x(async()=>{await p()});const p=async()=>{u.value=!0;try{await Promise.all([a.fetchSmsLogs(_.value,d.value),a.fetchSmsLogCountStock()])}catch(c){console.error("Failed to fetch data:",c)}finally{u.value=!1}},y=async c=>{c<1||(d.value=c,await p())};return(c,e)=>{const S=L("RouterLink");return n(),l("div",D,[s("div",B,[e[3]||(e[3]=s("h2",{class:"title-xl"},"SMS তালিকা",-1)),h(S,{to:{name:"SmsSend"},class:"btn-2"},{default:v(()=>e[2]||(e[2]=[i("নতুন SMS পাঠান")])),_:1})]),u.value?(n(),f(M,{key:0,class:"shadow-none"})):(n(),l("div",C,[r(a).smsLogs.length?(n(),l("table",N,[e[5]||(e[5]=s("thead",{class:"bg-gray-200"},[s("tr",null,[s("th",{class:"border px-4 py-2"},"তারিখ ও সময়"),s("th",{class:"border px-4 py-2"},"মেসেজ"),s("th",{class:"border px-4 py-2"},"SMS পার্ট"),s("th",{class:"border px-4 py-2"},"মোট SMS সংখ্যা"),s("th",{class:"border px-4 py-2"},"ফোন নাম্বার সংখ্যা"),s("th",{class:"border px-4 py-2"},"খরচ"),s("th",{class:"border px-4 py-2"},"ইভেন্ট"),s("th",{class:"border px-4 py-2"},"স্টেটাস")])],-1)),s("tbody",null,[(n(!0),l(k,null,g(r(a).smsLogs,o=>(n(),l("tr",{key:o.id},[s("td",P,[i(t(new Date(o.created_at).toLocaleDateString("bn-BD"))+" ",1),e[4]||(e[4]=s("br",null,null,-1)),i(" "+t(new Date(o.created_at).toLocaleTimeString("bn-BD")),1)]),s("td",V,t(o.message),1),s("td",F,t(o.sms_parts),1),s("td",j,t(o.sms_count),1),s("td",R,t(o.numbers.length),1),s("td",T,t(o.cost)+" tk",1),s("td",$,t(o.event),1),s("td",z,t(o.status),1)]))),128))])])):(n(),l("p",E,"No SMS logs found."))])),!u.value&&r(a).smsLogs.length?(n(),l("div",q,[s("button",{onClick:e[0]||(e[0]=o=>y(d.value-1)),disabled:d.value===1,class:"btn-1 mx-2"}," Previous ",8,A),s("span",G,"Page "+t(d.value),1),s("button",{onClick:e[1]||(e[1]=o=>y(d.value+1)),class:"btn-1 mx-2"},"Next")])):w("",!0),s("div",null,[s("p",null," মোট কেনা: "+t(r(a).smsStockSummary.total_bought)+" SMS ("+t(r(a).smsStockSummary.total_amount)+" টাকা) ",1),s("p",null," ব্যবহৃত: "+t(r(a).smsStockSummary.total_spent)+" SMS ("+t(r(a).smsStockSummary.spent_amount)+" টাকা) ",1),s("p",null," অবশিষ্ট: "+t(r(a).smsStockSummary.available_sms)+" SMS ("+t(r(a).smsStockSummary.available_amount)+" টাকা) ",1)])])}}};export{K as default};
