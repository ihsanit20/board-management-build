import{K as b,L as g,r as S,h,c as i,a as t,m as f,A as y,F as _,b as x,i as l,v as M,t as d,f as p,l as w,o as u}from"./index-DSO3MCpv.js";import{u as k}from"./institute-BcCM07wP.js";const I=b("sms",{state:()=>({loading:!1,error:null,success:null}),actions:{async sendSms({number:c,message:e}){var r,a;this.loading=!0,this.error=null,this.success=null;try{(await g.post("/send-sms",{number:c,message:e})).data.success?this.success="SMS sent successfully":this.error="SMS sending failed"}catch(n){this.error=((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to send SMS"}finally{this.loading=!1}}}}),V={class:"px-4"},B={class:"mb-4"},F=["value"],L={class:"mb-4"},C=["disabled"],D={key:0,class:"text-green-600 mt-4"},N={key:1,class:"text-red-600 mt-4"},E={__name:"SmsView",setup(c){const e=I(),r=k(),a=S(""),n=S(null),v=async()=>{if(!n.value){e.error="Please select an institute";return}const m=n.value.phone;await e.sendSms({number:m,message:a.value})};return h(()=>{r.fetchLiteInstitutes()}),(m,s)=>(u(),i("div",V,[s[4]||(s[4]=t("h2",{class:"text-lg font-bold mb-4"},"Send SMS to Institute",-1)),t("form",{onSubmit:w(v,["prevent"])},[t("div",B,[s[2]||(s[2]=t("label",{for:"institute",class:"block text-gray-700"},"Select Institute",-1)),f(t("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),class:"input w-full"},[(u(!0),i(_,null,x(l(r).liteInstitutes,o=>(u(),i("option",{key:o.id,value:o},d(o.name),9,F))),128))],512),[[y,n.value]])]),t("div",L,[s[3]||(s[3]=t("label",{for:"message",class:"block text-gray-700"},"Message",-1)),f(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),class:"input w-full",rows:"4"},null,512),[[M,a.value]])]),t("button",{type:"submit",class:"btn-2",disabled:l(e).loading},"Send SMS",8,C),l(e).success?(u(),i("div",D,d(l(e).success),1)):p("",!0),l(e).error?(u(),i("div",N,d(l(e).error),1)):p("",!0)],32)]))}};export{E as default};
