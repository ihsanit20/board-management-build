import{B as R,r as c,i as T,o as Z,C as P,c as n,a as t,j as m,D as f,F as y,e as g,b as o,h as d,v as q,y as A,k as H,t as r,d as a,s as J,L as K}from"./index-4ATOSoLI.js";import{u as O}from"./result-DsrK5pjZ.js";import{u as Q}from"./zamat-fpwc_zJA.js";import{u as W}from"./group-0zox0_Xk.js";const X={class:"my-container space-y-6"},Y={class:"card-bg p-4 md:p-8 gap-4 justify-center"},$={class:"flex gap-4"},tt=["value"],et=["value"],st={key:0},rt=["value"],ot={class:"card-bg p-4 md:p-8"},at={key:0},lt={class:"text-center title-lg"},nt={class:"flex gap-4 justify-between"},it={key:0},dt={class:"overflow-x-auto"},ut={class:"min-w-full border border-gray-300 rounded-lg"},pt={class:"px-4 py-2 text-center border border-gray-300 font-bold"},bt={class:"px-4 py-2 text-center border border-gray-300"},ct={class:"px-4 py-2 border border-gray-300"},mt={class:"px-4 py-2 border border-gray-300"},yt={class:"px-4 py-2 text-center border border-gray-300 font-semibold"},gt={class:"px-4 py-2 text-center border border-gray-300 font-semibold w-28"},vt={class:"px-4 py-2 text-center border border-gray-300 font-bold"},xt={class:"px-4 py-2 text-center border border-gray-300 font-bold w-28"},ft={key:1,class:"text-center text-gray-600"},_t={key:2,class:"flex justify-center"},Mt={__name:"StoreMeritList",setup(ht){const U=J(),_=R(),h=Q(),u=W(),l=O(),b=c(""),i=c(""),p=c(null),v=c(10),k=T(()=>{var x;return((x=l.meritList.students)==null?void 0:x.map(e=>({student_id:e.student_id,rank:e.rank+(e.suffix?" "+e.suffix:"")})))||[]});async function E(){b.value&&i.value&&(p.value||u.groups.length==0)?await l.fetchMeritList(b.value,i.value,p.value,v.value):alert("অনুগ্রহ করে পরীক্ষা, মারহালা ও গ্রুপ (যদি থাকে) নির্বাচন করুন!")}const F=async()=>{if(!k.value.length){alert("কোনো মেধাতালিকা পাওয়া যায়নি!");return}await l.storeMerit(k.value),U.push({name:"PrintMeritList"})};return Z(async()=>{await _.fetchExams(),await h.fetchZamats()}),P(i,async()=>{i.value&&(p.value=null,u.groups=[],await u.fetchGroups(i.value))}),(x,e)=>{var L,S,w,M,B,V,D,j,I,N,z,C;return a(),n("div",X,[e[15]||(e[15]=t("h1",{class:"title-lg text-center"},"মেধাতালিকা সংরক্ষণ করুন",-1)),t("div",Y,[t("div",$,[t("div",null,[e[5]||(e[5]=t("label",{for:"",class:"text-sm"},"পরীক্ষা নির্বাচন করুন",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),class:"input-1"},[e[4]||(e[4]=t("option",{value:"",disabled:""},"-- পরীক্ষা নির্বাচন করুন --",-1)),(a(!0),n(y,null,g(o(_).exams,s=>(a(),n("option",{key:s.id,value:s.id},r(s.name),9,tt))),128))],512),[[f,b.value]])]),t("div",null,[e[7]||(e[7]=t("label",{for:"zamatId",class:"text-sm"},"মারহালা নির্বাচন করুন",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),class:"input-1"},[e[6]||(e[6]=t("option",{value:"",disabled:""},"-- মারহালা নির্বাচন করুন --",-1)),(a(!0),n(y,null,g(o(h).zamats,s=>(a(),n("option",{key:s.id,value:s.id},r(s.name),9,et))),128))],512),[[f,i.value]])]),o(u).groups.length?(a(),n("div",st,[e[9]||(e[9]=t("label",{for:"groupId",class:"text-sm"},"গ্রুপ নির্বাচন করুন",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),class:"input-1"},[e[8]||(e[8]=t("option",{value:null,disabled:""},"-- গ্রুপ নির্বাচন করুন --",-1)),(a(!0),n(y,null,g(o(u).groups,s=>(a(),n("option",{key:s.id,value:s.id},r(s.name),9,rt))),128))],512),[[f,p.value]])])):d("",!0),t("div",null,[e[10]||(e[10]=t("label",{for:"limit"},"পরীক্ষার্থী সংখ্যা",-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),type:"number",min:"1",max:"50",class:"input-1 text-center"},null,512),[[q,v.value]])])]),t("div",{class:"flex gap-4 justify-center items-center"},[t("button",{type:"button",onClick:E,class:"btn-2"},e[11]||(e[11]=[t("i",{class:"fas fa-search"},null,-1),A(" অনুসন্ধান করুন ")]))])]),o(l).loading?(a(),H(K,{key:0})):d("",!0),t("div",ot,[(L=o(l).meritList.students)!=null&&L.length?(a(),n("div",at,[t("p",lt,r((w=(S=o(l).meritList)==null?void 0:S.exam)==null?void 0:w.name),1),t("div",nt,[t("p",null,"বিভাগ: "+r((B=(M=o(l).meritList)==null?void 0:M.zamat)==null?void 0:B.department),1),t("p",null,"মারহালা: "+r((D=(V=o(l).meritList)==null?void 0:V.zamat)==null?void 0:D.name),1),(j=o(l).meritList)!=null&&j.group?(a(),n("p",it,"গ্রুপ "+r((N=(I=o(l).meritList)==null?void 0:I.group)==null?void 0:N.name),1)):d("",!0)]),t("div",dt,[e[13]||(e[13]=t("p",{class:"text-center text-red-500 font-bold"}," এই তালিকাটি সংরক্ষণ করতে নীচের Save বাটনে ক্লিক করুন। ",-1)),t("table",ut,[e[12]||(e[12]=t("thead",{class:"bg-gray-200 border-b border-gray-400"},[t("tr",null,[t("th",{class:"px-4 py-2 border border-gray-400"},"#"),t("th",{class:"px-4 py-2 border border-gray-400"},"রোল নং"),t("th",{class:"px-4 py-2 border border-gray-400"},"নাম"),t("th",{class:"px-4 py-2 border border-gray-400"},"মাদরাসা"),t("th",{class:"px-4 py-2 border border-gray-400"},"মোট নম্বর"),t("th",{class:"px-4 py-2 border border-gray-400"},"শতকরা"),t("th",{class:"px-4 py-2 border border-gray-400"},"বিভাগ"),t("th",{class:"px-4 py-2 border border-gray-400"},"মেধাক্রম")])],-1)),t("tbody",null,[(a(!0),n(y,null,g(o(l).meritList.students,(s,G)=>(a(),n("tr",{key:s.student_id,class:"hover:bg-gray-100"},[t("td",pt,r((G+1).toLocaleString("bn-BD")),1),t("td",bt,r(s.roll_number),1),t("td",ct,r(s.name),1),t("td",mt,r(s.institute_code)+" - "+r(s.institute),1),t("td",yt,r(Number(s.total_mark).toLocaleString("bn-BD")),1),t("td",gt,r(Number(s.percentage).toLocaleString("bn-BD"))+" % ",1),t("td",vt,r(s.grade),1),t("td",xt,r(s.rank)+" "+r(s.suffix),1)]))),128))])])])])):d("",!0),!o(l).loading&&!((z=o(l).meritList.students)!=null&&z.length)?(a(),n("div",ft,e[14]||(e[14]=[t("p",null,"এই ফিল্টারে কোনো শিক্ষার্থী পাওয়া যায়নি।",-1)]))):d("",!0),(C=o(l).meritList.students)!=null&&C.length?(a(),n("div",_t,[t("button",{type:"button",onClick:F,class:"btn-2 inline"},"Save")])):d("",!0)])])}}};export{Mt as default};
