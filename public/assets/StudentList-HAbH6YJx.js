import{B as X,r as u,i as g,o as Y,c as o,a as e,t as n,f as D,w as I,j as x,D as S,F as N,e as V,b,v as P,G as L,h as y,k as j,m as ee,l as te,d as s,n as le,L as ae}from"./index-DXxrbR31.js";import{u as se}from"./student-BhrrDcDg.js";import{u as oe}from"./zamat-BeKk-UwW.js";const ne={class:"space-y-2 px-6 py-4"},ie={class:"flex justify-between items-center"},re={class:"title-lg"},pe={class:"card-bg p-4 space-y-4"},ue={class:"grid md:grid-cols-6 gap-4"},de=["value"],ve=["value"],xe={class:"relative"},ce={class:"relative"},fe={class:"relative"},me={class:"relative"},ye={class:"flex flex-wrap items-center justify-between gap-3"},ge={class:"text-sm text-gray-600"},be={class:"font-semibold"},_e={key:0,class:"text-xs text-gray-500 ml-2"},he={class:"flex items-center gap-2"},ke={key:1,class:"overflow-x-auto bg-white shadow-md rounded-lg"},we={class:"min-w-full table-auto"},Ce={class:"text-gray-700 text-sm font-light"},Se={class:"py-3 px-4 text-left"},Ne={class:"py-3 px-4 text-left"},Ve={class:"py-3 px-4 text-left"},Pe={class:"py-3 px-4 text-left"},Le={class:"py-3 px-4 text-left"},Ue={class:"line-clamp-1"},Ee=["href"],Be={class:"py-3 px-4 text-left"},De={class:"py-3 px-4 text-left"},Ie={class:"py-3 px-4 text-left"},je={class:"min-w-max"},Ke={class:"py-3 px-4 text-center"},ze={class:"flex items-center justify-center gap-2"},Me={key:1},Fe={key:0,class:"flex justify-between items-center mt-4 px-4 py-3"},$e=["disabled"],Re={class:"flex items-center gap-2"},Te=["value"],Ze=["disabled"],Je={__name:"StudentList",setup(Ae){const r=X(),K=oe(),d=se(),U=u(!1),_=u(""),h=u(""),k=u(""),w=u(""),c=u(null),E=u(""),B=u(25),v=u(1),i=g(()=>d.pagination),H=g(()=>{var a;return((a=i.value)==null?void 0:a.total)??d.students.length}),J=g(()=>{var a,t;if(c.value&&((a=r.exams)!=null&&a.length)){const m=r.exams.find(C=>C.id===Number(c.value));if(m)return m.name}return((t=r.exam)==null?void 0:t.name)??"à¦ªà¦°à§€à¦•à§à¦·à¦¾"}),z=g(()=>{var a;return(((a=i.value)==null?void 0:a.current_page)??1)>1}),M=g(()=>{var a,t;return(((a=i.value)==null?void 0:a.current_page)??1)<(((t=i.value)==null?void 0:t.last_page)??1)}),f=async()=>{var a;U.value=!0;try{await d.fetchStudents({registrationNumber:_.value||void 0,rollNumber:h.value||void 0,applicationId:k.value||void 0,instituteCode:w.value||void 0,examId:c.value??void 0,zamatId:E.value||void 0,page:v.value,perPage:B.value}),(a=d.pagination)!=null&&a.current_page&&(v.value=d.pagination.current_page)}finally{U.value=!1}},p=()=>{v.value=1,f()},O=()=>{v.value=1,f()},Q=()=>{var a;z.value&&(v.value=(((a=i.value)==null?void 0:a.current_page)??1)-1,f())},W=()=>{var a;M.value&&(v.value=(((a=i.value)==null?void 0:a.current_page)??1)+1,f())};return Y(async()=>{var a,t;await Promise.all([r.fetchLastExam(),(a=r.fetchExams)==null?void 0:a.call(r),K.fetchZamats()]),(t=r.exam)!=null&&t.id&&(c.value=r.exam.id),await f()}),(a,t)=>{var C,F;const m=te("RouterLink");return s(),o("div",ne,[e("div",ie,[e("h1",re,n(J.value)+"-à¦à¦° à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦¤à¦¾à¦²à¦¿à¦•à¦¾",1),e("div",null,[D(m,{to:{name:"StudentMultiEdit"},class:"btn-2"},{default:I(()=>t[8]||(t[8]=[j(" à¦®à¦¾à¦°à¦•à¦¾à¦¯ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾ ")])),_:1})])]),e("div",pe,[e("div",ue,[e("div",null,[t[10]||(t[10]=e("p",null,"à¦ªà¦°à§€à¦•à§à¦·à¦¾",-1)),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"input-1 w-full text-black px-2 py-1",onChange:p},[t[9]||(t[9]=e("option",{disabled:"",value:""},"- à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à§à¦¨ -",-1)),(s(!0),o(N,null,V(b(r).exams,l=>(s(),o("option",{key:l.id,value:l.id},n(l.name),9,de))),128))],544),[[S,c.value]])]),e("div",null,[t[12]||(t[12]=e("p",null,"à¦®à¦¾à¦°à¦¹à¦¾à¦²à¦¾",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>E.value=l),class:"input-1 w-full text-black px-2 py-1",onChange:p},[t[11]||(t[11]=e("option",{value:""},"- à¦¸à¦•à¦² à¦®à¦¾à¦°à¦¹à¦¾à¦²à¦¾ -",-1)),(s(!0),o(N,null,V(b(K).zamats,l=>(s(),o("option",{key:l.id,value:l.id},n(l.name),9,ve))),128))],544),[[S,E.value]])]),e("div",null,[t[14]||(t[14]=e("p",null,"à¦‡à¦²à¦¹à¦¾à¦• à¦¨à¦¾à¦®à§à¦¬à¦¾à¦° à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨",-1)),e("div",xe,[x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>w.value=l),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"à¦‡à¦²à¦¹à¦¾à¦• à¦¨à¦‚",onKeyup:L(p,["enter"])},null,544),[[P,w.value]]),w.value?(s(),o("button",{key:0,onClick:p,class:"absolute right-3 top-2"},t[13]||(t[13]=[e("i",{class:"fas fa-search"},null,-1)]))):y("",!0)])]),e("div",null,[t[16]||(t[16]=e("p",null,"à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨ à¦ªà¦¤à§à¦° à¦¨à¦‚ à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨",-1)),e("div",ce,[x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>k.value=l),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨ à¦ªà¦¤à§à¦° à¦¨à¦‚",onKeyup:L(p,["enter"])},null,544),[[P,k.value]]),k.value?(s(),o("button",{key:0,onClick:p,class:"absolute right-3 top-2"},t[15]||(t[15]=[e("i",{class:"fas fa-search"},null,-1)]))):y("",!0)])]),e("div",null,[t[18]||(t[18]=e("p",null,"à¦°à§‡à¦œà¦¿. à¦¨à¦‚ à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨",-1)),e("div",fe,[x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>_.value=l),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"à¦°à§‡à¦œà¦¿. à¦¨à¦‚",onKeyup:L(p,["enter"])},null,544),[[P,_.value]]),_.value?(s(),o("button",{key:0,onClick:p,class:"absolute right-3 top-2"},t[17]||(t[17]=[e("i",{class:"fas fa-search"},null,-1)]))):y("",!0)])]),e("div",null,[t[20]||(t[20]=e("p",null,"à¦°à§‹à¦² à¦¨à¦‚ à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨",-1)),e("div",me,[x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>h.value=l),type:"text",class:"input-1 w-full text-black px-3 py-1",placeholder:"à¦°à§‹à¦² à¦¨à¦‚",onKeyup:L(p,["enter"])},null,544),[[P,h.value]]),h.value?(s(),o("button",{key:0,onClick:p,class:"absolute right-3 top-2"},t[19]||(t[19]=[e("i",{class:"fas fa-search"},null,-1)]))):y("",!0)])])]),e("div",ye,[e("p",ge,[t[21]||(t[21]=j(" à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦°à§à¦¥à§€ à¦¸à¦‚à¦–à§à¦¯à¦¾: ")),e("span",be,n(H.value),1),t[22]||(t[22]=j(" à¦œà¦¨ ")),i.value&&i.value.per_page!=="all"?(s(),o("span",_e," (à¦à¦‡ à¦ªà§ƒà¦·à§à¦ à¦¾à§Ÿ "+n(b(d).students.length)+" à¦œà¦¨) ",1)):y("",!0)]),e("div",he,[t[24]||(t[24]=e("span",{class:"text-xs text-gray-500"},"à¦ªà§à¦°à¦¤à¦¿ à¦ªà§ƒà¦·à§à¦ à¦¾à§Ÿ:",-1)),x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>B.value=l),class:"input-1 text-black px-2 py-1",onChange:O},t[23]||(t[23]=[e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:"all"},"All",-1)]),544),[[S,B.value]])])])]),U.value?(s(),ee(ae,{key:0})):(s(),o("div",ke,[e("table",we,[t[28]||(t[28]=e("thead",{class:"bg-gray-400 text-white uppercase text-sm leading-normal"},[e("tr",null,[e("th",{class:"py-3 px-4 text-left"},"à¦°à§‡à¦œà¦¿. à¦¨à¦‚"),e("th",{class:"py-3 px-4 text-left"},"à¦ªà¦°à§€à¦•à§à¦·à¦¾à¦°à§à¦¥à§€à¦° à¦¨à¦¾à¦®"),e("th",{class:"py-3 px-4 text-left"},"à¦œà¦¨à§à¦® à¦¤à¦¾à¦°à¦¿à¦–"),e("th",{class:"py-3 px-4 text-left"},"à¦®à¦¾à¦°à¦¹à¦¾à¦²à¦¾"),e("th",{class:"py-3 px-4 text-left"},"à¦®à¦¾à¦¦à¦°à¦¾à¦¸à¦¾à¦° à¦¨à¦¾à¦®"),e("th",{class:"py-3 px-4 text-left"},"à¦®à¦¾à¦°à¦•à¦¾à¦¯"),e("th",{class:"py-3 px-4 text-left"},"à¦¨à¦¿à¦¬à¦¨à§à¦§à¦¨ à¦ªà¦¤à§à¦°"),e("th",{class:"py-3 px-4 text-left"},"à¦°à§‹à¦² à¦¨à¦‚"),e("th",{class:"py-3 px-4 text-center"},"à¦à¦•à¦¶à¦¨")])],-1)),e("tbody",Ce,[b(d).students.length?(s(!0),o(N,{key:0},V(b(d).students,l=>{var $,R,T,Z,A,G,q;return s(),o("tr",{key:l.id,class:"border-b border-gray-200 hover:bg-gray-100 font-medium"},[e("td",Se,n(l==null?void 0:l.registration_number),1),e("td",Ne,n(l==null?void 0:l.name),1),e("td",Ve,n(l!=null&&l.date_of_birth?new Date(l.date_of_birth).toLocaleDateString("bn-BD"):"â€”"),1),e("td",Pe,n(($=l==null?void 0:l.zamat)==null?void 0:$.name),1),e("td",Le,[e("p",Ue,n((R=l==null?void 0:l.institute)==null?void 0:R.institute_code)+" - "+n((T=l==null?void 0:l.institute)==null?void 0:T.name),1),e("a",{class:"hover:text-sky-600",href:`tel:${(Z=l==null?void 0:l.institute)==null?void 0:Z.phone}`}," ðŸ“ž "+n((A=l==null?void 0:l.institute)==null?void 0:A.phone),9,Ee)]),e("td",Be,[e("span",{class:le({"text-red-500":!((G=l==null?void 0:l.center)!=null&&G.name)})},n(((q=l==null?void 0:l.center)==null?void 0:q.name)||"à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à¦•à¦°à¦¾ à¦¨à§‡à¦‡"),3)]),e("td",De,n(l==null?void 0:l.application_id),1),e("td",Ie,[e("p",je,n(l!=null&&l.roll_number?l.roll_number.replace(/(\d{3})(\d+)/,"$1-$2"):"à¦¨à§‡à¦‡"),1)]),e("td",Ke,[e("div",ze,[D(m,{to:{name:"StudentShow",params:{id:l.id}},class:"btn-icon"},{default:I(()=>t[25]||(t[25]=[e("i",{class:"fas fa-eye"},null,-1)])),_:2},1032,["to"]),D(m,{to:{name:"StudentEdit",params:{id:l.id}},class:"btn-icon"},{default:I(()=>t[26]||(t[26]=[e("i",{class:"fas fa-edit"},null,-1)])),_:2},1032,["to"])])])])}),128)):(s(),o("tr",Me,t[27]||(t[27]=[e("td",{colspan:"11",class:"text-center text-red-500 py-7"},"No students found",-1)])))])]),i.value&&i.value.per_page!=="all"?(s(),o("div",Fe,[e("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:!z.value,onClick:Q}," Prev ",8,$e),e("div",Re,[t[29]||(t[29]=e("span",null,"Page",-1)),x(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>v.value=l),class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onChange:f},[(s(!0),o(N,null,V(((C=i.value)==null?void 0:C.last_page)||1,l=>(s(),o("option",{key:l,value:l},n(l),9,Te))),128))],544),[[S,v.value,void 0,{number:!0}]]),e("span",null,"of "+n(((F=i.value)==null?void 0:F.last_page)||1),1)]),e("button",{class:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",disabled:!M.value,onClick:W}," Next ",8,Ze)])):y("",!0)]))])}}};export{Je as default};
