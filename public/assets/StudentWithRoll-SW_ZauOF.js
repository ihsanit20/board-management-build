import{A as D,r as u,o as N,B as z,i as R,c as o,a as t,t as l,b as y,j as S,C as E,F as w,e as C,v as F,D as I,y as a,h as v,k as M,l as Z,f as $,w as K,z as P,d as n,L as T}from"./index-1odi9h7d.js";import{u as U}from"./zamat-B1TDTzZP.js";import{u as W}from"./student-C5XAx--e.js";const j={class:"my-container"},A={class:"space-y-2 p-2"},q={class:"card-bg p-4"},G={class:"title-lg text-center"},H={class:"grid md:grid-cols-3 gap-4"},J=["value"],O={key:0,class:"card-bg p-4"},Q={class:"title-md"},X={key:1,class:"card-bg p-4 text-center"},Y={class:"title-md"},ee={key:3,class:"space-y-2"},te={key:0,class:"space-y-2"},se=["onClick"],le={class:"md:col-span-3 md:flex items-center gap-2 space-y-2 md:space-y-0"},ae={class:""},ne={class:""},oe={class:"md:col-span-2"},de={class:"md:col-span-1 md:px-2"},ie={class:"md:col-span-1 md:px-2 md:text-end"},re={class:"md:col-span-1 md:px-2 md:text-end"},ue={key:1,class:"card-bg py-6 items-center"},xe={__name:"StudentWithRoll",setup(ce){const b=D(),x=U(),f=W(),c=u(!1),m=u(""),d=u(""),i=u([]),p=u(null),g=u(!1);N(async()=>{try{c.value=!0,await Promise.all([b.fetchLastExam(),x.fetchZamats()])}finally{c.value=!1}}),z(d,()=>{i.value=[]});const L=R(()=>{var r;return((r=x.zamats.find(e=>e.id===d.value))==null?void 0:r.name)||""}),k=async()=>{if(!d.value||!m.value){alert("মারহালা সিলেক্ট করুন এবং ইলহাক নাম্বার দিয়ে অনুসন্ধান করুন।");return}c.value=!0,g.value=!0;try{await f.fetchStudentsWithRollNumber({instituteCode:m.value,zamatId:d.value}),p.value=f.institute||null,i.value=f.students}catch(r){console.error("ডাটা ফেচ করতে সমস্যা হচ্ছে:",r)}finally{c.value=!1}};return(r,e)=>{var _,h;const V=P("RouterLink");return n(),o("div",j,[t("div",A,[t("div",q,[t("h1",G,l((_=y(b).exam)==null?void 0:_.name)+"-এর পরিক্ষার্থী অনুসন্ধান",1),t("div",H,[t("div",null,[S(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"text-black input-1 px-2 py-1 text-center"},[e[2]||(e[2]=t("option",{value:"",selected:"",disabled:""},"- মারহালা সিলেক্ট করুন -",-1)),(n(!0),o(w,null,C(y(x).zamats,s=>(n(),o("option",{key:s.id,value:s.id},l(s.name),9,J))),128))],512),[[E,d.value]])]),t("div",null,[S(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"text",class:"input-1 w-full text-black px-3 py-1 text-center",placeholder:"ইলহাক নং",onKeyup:I(k,["enter"])},null,544),[[F,m.value]])]),t("div",{class:"w-full"},[t("button",{onClick:k,class:"btn-2 w-full"},e[3]||(e[3]=[t("i",{class:"fas fa-search"},null,-1),a(" অনুসন্ধান ")]))])])]),p.value?(n(),o("div",O,[t("h2",Q,l(p.value.name),1),t("p",null,[e[4]||(e[4]=t("b",null,"ইলহাক:",-1)),a(" "+l(p.value.institute_code),1)]),t("p",null,[e[5]||(e[5]=t("b",null,"ফোন:",-1)),a(" "+l(p.value.phone),1)]),t("p",null,[e[6]||(e[6]=t("b",null,"মারহালা:",-1)),a(" "+l(L.value),1)])])):v("",!0),i.value.length?(n(),o("div",X,[t("h4",Y," পরীক্ষার্থী তালিকা: "+l((h=y(b).exam)==null?void 0:h.name)+"-র ফি জমা দিয়েছে যারা ",1)])):v("",!0),c.value?(n(),M(T,{key:2})):(n(),o("div",ee,[i.value.length?(n(),o("div",te,[e[14]||(e[14]=Z('<div class="bg-gray-400 text-white md:grid md:grid-cols-8 p-4 hidden rounded-md"><p class="md:col-span-3 px-2">পরীক্ষার্থীর নাম</p><p class="md:col-span-2 px-2">পিতার নাম</p><p class="md:col-span-1 px-2">জন্ম তারিখ</p><p class="md:col-span-1 px-2 md:text-end">রেজি. নং</p><p class="md:col-span-1 px-2 md:text-end">রোল নং</p></div>',1)),(n(!0),o(w,null,C(i.value,(s,B)=>(n(),o("div",{key:s.id,onClick:pe=>r.toggleSelection(s.id),class:"card-bg grid relative md:grid-cols-8 p-4"},[t("div",le,[t("p",ae,[e[7]||(e[7]=t("b",{class:"inline-block md:hidden"},"ক্র:",-1)),a(" "+l((B+1).toLocaleString("bn-BD"))+". ",1)]),t("p",ne,[e[8]||(e[8]=t("b",{class:"inline-block md:hidden"},"নাম:",-1)),a(" "+l(s.name),1)])]),t("p",oe,[e[9]||(e[9]=t("b",{class:"inline-block md:hidden"},"পিতা:",-1)),a(" "+l(s.father_name),1)]),t("p",de,[e[10]||(e[10]=t("b",{class:"inline-block md:hidden"},"জন্ম তারিখ:",-1)),a(" "+l(new Date(s.date_of_birth).toLocaleDateString("bn-BD")),1)]),t("p",ie,[e[11]||(e[11]=t("b",{class:"inline-block md:hidden"},"রেজি. নং:",-1)),a(" "+l(s.registration_number),1)]),t("p",re,[e[12]||(e[12]=t("b",{class:"inline-block md:hidden"},"রোল নং:",-1)),a(" "+l(s.roll_number?s.roll_number.replace(/(\d{3})(\d+)/,"$1-$2"):"নেই"),1)]),e[13]||(e[13]=t("div",{class:"min-w-max"},null,-1))],8,se))),128))])):v("",!0),g.value&&!i.value.length?(n(),o("div",ue,[e[16]||(e[16]=t("p",{class:"text-center text-red-500"}," কোন পরীক্ষার্থী পাওয়া যায়নি। দয়া করে সঠিক মারহালা এবং ইলহাক নাম্বার দিয়ে আবার চেষ্টা করুন। ",-1)),$(V,{to:{name:"CollectFeePublic"},class:"btn-link"},{default:K(()=>e[15]||(e[15]=[a(" ফি জমা দিতে ক্লিক করুন ")])),_:1})])):v("",!0)]))])])}}};export{xe as default};
