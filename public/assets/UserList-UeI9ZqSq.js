import{O as M,P as w,N as V,m as S,i as k,B as j,d as i,c,a as s,p as C,j as u,v as y,C as U,h as $,_ as O,r as _,W as q,n as B,o as N,F as E,e as I,k as D,t as g,y as T}from"./index-D_k106gp.js";const A=M("user",{state:()=>({users:[],user:null,error:null}),actions:{async fetchUsers(){var n,a;try{const r=await w.get("/users");this.users=r.data,this.error=null}catch(r){this.error=((a=(n=r.response)==null?void 0:n.data)==null?void 0:a.message)||"Something went wrong"}},async fetchUser(n){var a,r;try{const t=await w.get(`/users/${n}`);this.user=t.data,this.error=null}catch(t){this.error=((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Something went wrong"}},async createUser(n){var a,r;try{const t=await w.post("/users",n);this.users.push(t.data),this.error=null}catch(t){this.error=((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Something went wrong"}},async updateUser(n,a){var r,t;try{const o=await w.put(`/users/${n}`,a),p=this.users.findIndex(m=>m.id===n);p!==-1&&(this.users[p]=o.data),this.error=null}catch(o){this.error=((t=(r=o.response)==null?void 0:r.data)==null?void 0:t.message)||"Something went wrong"}},async deleteUser(n){var a,r;try{await w.delete(`/users/${n}`),this.users=this.users.filter(t=>t.id!==n),this.error=null}catch(t){this.error=((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Something went wrong"}}}}),z={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},L={class:"card-bg md:p-8 p-4 mx-4"},F={class:"grid gap-2"},P={class:""},R={class:""},W={class:""},G={class:"grid grid-cols-2 gap-4"},H={class:""},J={key:0,value:"Developer"},K={class:""},Q={class:""},X={class:"flex justify-center gap-4"},Y={__name:"EditUserModal",props:{user:Object},emits:["close","updated"],setup(n,{emit:a}){const r=a,t=n,o=V({name:"",phone:"",email:"",role:"",address:"",is_active:!0}),p=S(),m=k(()=>p.user&&p.user.role==="Developer");j(()=>t.user,d=>{o.name=d.name||"",o.phone=d.phone||"",o.email=d.email||"",o.role=d.role||"Operator",o.address=d.address||"",o.is_active=d.is_active??!0},{immediate:!0});const b=A(),x=async()=>{const d={name:o.name,phone:o.phone,email:o.email,role:o.role,address:o.address,is_active:o.is_active};await b.updateUser(t.user.id,d),await b.fetchUsers(),r("updated"),r("close")};return(d,e)=>(i(),c("div",z,[s("div",L,[e[18]||(e[18]=s("h2",{class:"text-xl font-bold text-center"},"ইউজার সম্পাদনা",-1)),s("form",{onSubmit:C(x,["prevent"]),class:"space-y-4"},[s("div",F,[s("div",P,[e[7]||(e[7]=s("label",{class:""},"নাম",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.name=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[y,o.name]])]),s("div",R,[e[8]||(e[8]=s("label",{class:""},"ফোন",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.phone=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[y,o.phone]])]),s("div",W,[e[9]||(e[9]=s("label",{class:""},"ইমেইল",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.email=l),type:"email",class:"w-full p-2 border rounded"},null,512),[[y,o.email]])]),s("div",G,[s("div",H,[e[13]||(e[13]=s("label",{class:""},"ভূমিকা (Role)",-1)),u(s("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.role=l),class:"w-full p-2 border rounded",required:""},[e[10]||(e[10]=s("option",{value:"Operator"},"Operator",-1)),e[11]||(e[11]=s("option",{value:"Admin"},"Admin",-1)),e[12]||(e[12]=s("option",{value:"Super Admin"},"Super Admin",-1)),m.value?(i(),c("option",J,"Developer")):$("",!0)],512),[[U,o.role]])]),s("div",K,[e[15]||(e[15]=s("label",{class:""},"সক্রিয় অবস্থা",-1)),u(s("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.is_active=l),class:"w-full p-2 border rounded"},e[14]||(e[14]=[s("option",{value:!0},"Active",-1),s("option",{value:!1},"Inactive",-1)]),512),[[U,o.is_active]])])]),s("div",Q,[e[16]||(e[16]=s("label",{class:""},"ঠিকানা",-1)),u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.address=l),type:"text",class:"w-full p-2 border rounded"},null,512),[[y,o.address]])])]),s("div",X,[e[17]||(e[17]=s("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),s("button",{type:"button",onClick:e[6]||(e[6]=l=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},Z={class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},ee={class:"card-bg md:p-8 p-4 mx-4"},se={class:"grid gap-2"},te={class:""},oe={class:""},le={class:""},re={class:""},ae={class:"relative"},ne=["type"],de={class:"grid grid-cols-2 gap-4"},ie={class:""},ue={key:0,value:"Developer"},pe={class:""},ce={class:""},ve={class:"flex justify-center gap-4"},me={__name:"AddUserModal",emits:["close","saved"],setup(n,{emit:a}){const r=a,t=V({name:"",phone:"",email:"",password:"",role:"Operator",address:"",is_active:!0}),o=_(!1),p=S(),m=k(()=>p.user&&p.user.role==="Developer"),b=A(),x=async()=>{const d={name:t.name,phone:t.phone,email:t.email,password:t.password,role:t.role,address:t.address,is_active:t.is_active};await b.createUser(d),await b.fetchUsers(),r("saved"),r("close")};return(d,e)=>(i(),c("div",Z,[s("div",ee,[e[21]||(e[21]=s("h2",{class:"text-xl font-bold text-center"},"ইউজার যুক্ত করুন",-1)),s("form",{onSubmit:C(x,["prevent"]),class:"space-y-4"},[s("div",se,[s("div",te,[e[9]||(e[9]=s("label",{class:""},"নাম",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[y,t.name]])]),s("div",oe,[e[10]||(e[10]=s("label",{class:""},"ফোন",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.phone=l),type:"text",class:"w-full p-2 border rounded",required:""},null,512),[[y,t.phone]])]),s("div",le,[e[11]||(e[11]=s("label",{class:""},"ইমেইল",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.email=l),type:"email",class:"w-full p-2 border rounded"},null,512),[[y,t.email]])]),s("div",re,[e[12]||(e[12]=s("label",{class:""},"পাসওয়ার্ড",-1)),s("div",ae,[u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.password=l),type:o.value?"text":"password",class:"w-full p-2 border rounded",required:""},null,8,ne),[[q,t.password]]),s("span",{class:"absolute inset-y-0 right-3 flex items-center cursor-pointer",onClick:e[4]||(e[4]=l=>o.value=!o.value)},[s("i",{class:B(o.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",de,[s("div",ie,[e[16]||(e[16]=s("label",{class:""},"ভূমিকা (Role)",-1)),u(s("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.role=l),class:"w-full p-2 border rounded",required:""},[e[13]||(e[13]=s("option",{value:"Operator"},"Operator",-1)),e[14]||(e[14]=s("option",{value:"Admin"},"Admin",-1)),e[15]||(e[15]=s("option",{value:"Super Admin"},"Super Admin",-1)),m.value?(i(),c("option",ue,"Developer")):$("",!0)],512),[[U,t.role]])]),s("div",pe,[e[18]||(e[18]=s("label",{class:""},"সক্রিয় অবস্থা",-1)),u(s("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>t.is_active=l),class:"w-full p-2 border rounded"},e[17]||(e[17]=[s("option",{value:!0},"Active",-1),s("option",{value:!1},"Inactive",-1)]),512),[[U,t.is_active]])])]),s("div",ce,[e[19]||(e[19]=s("label",{class:""},"ঠিকানা",-1)),u(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.address=l),type:"text",class:"w-full p-2 border rounded"},null,512),[[y,t.address]])])]),s("div",ve,[e[20]||(e[20]=s("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Save ",-1)),s("button",{type:"button",onClick:e[8]||(e[8]=l=>r("close")),class:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"}," Cancel ")])],32)])]))}},ye=O(me,[["__scopeId","data-v-5ad93273"]]),be={class:"px-4 space-y-2"},fe={key:0,class:"flex items-center justify-center py-10"},ge={key:1,class:"grid md:grid-cols-4 gap-4"},xe={class:"flex items-center space-y-2"},we={class:"space-y-2"},_e={class:"text-lg font-semibold"},$e={class:"text-sm text-gray-500"},he={class:"text-sm text-gray-500"},Ue={class:"text-sm text-gray-500"},Se={class:"text-sm text-gray-500"},ke={class:"text-sm text-gray-500"},Ae={key:0,class:"text-green-500"},De={key:1,class:"text-red-500"},Ve={class:"text-sm text-gray-500"},Ce={class:"flex space-x-2"},Me=["onClick"],je={key:0,class:"p-6 text-center text-gray-500"},Be={__name:"UserList",setup(n){const a=A(),r=S(),t=_(!1),o=_(!1),p=_(null),m=_(!0);N(async()=>{await a.fetchUsers(),m.value=!1});const b=()=>{t.value=!0},x=()=>{t.value=!1},d=h=>{p.value=h,o.value=!0},e=()=>{o.value=!1,p.value=null},l=k(()=>r.user&&r.user.role==="Developer"?a.users:a.users.filter(h=>h.role!=="Developer"));return(h,f)=>(i(),c("div",be,[s("div",{class:"flex items-center justify-between"},[f[0]||(f[0]=s("h1",{class:"title-lg"},"ইউজার তালিকা",-1)),s("button",{class:"btn-2",onClick:b},"Add New")]),m.value?(i(),c("div",fe,f[1]||(f[1]=[s("div",{class:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"},null,-1)]))):(i(),c("div",ge,[(i(!0),c(E,null,I(l.value,v=>(i(),c("div",{key:v.id,class:"card-bg p-4 md:p-8"},[s("div",xe,[s("div",we,[s("p",_e,"নাম: "+g(v.name),1),s("p",$e,"রোল: "+g(v.role),1),s("p",he,"ফোন: "+g(v.phone),1),s("p",Ue,"ইমেইল: "+g(v.email?v.email:"নেই"),1),s("p",Se,"ঠিকানা: "+g(v.address?v.address:"নেই"),1),s("p",ke,[f[2]||(f[2]=T("স্ট্যাটাস: ")),v.is_active?(i(),c("span",Ae,"Active")):(i(),c("span",De,"Inactive"))]),s("p",Ve," তৈরী: "+g(new Date(v.created_at).toLocaleDateString("bn-BD")),1)])]),s("div",Ce,[s("button",{class:"btn-1",onClick:Oe=>d(v)}," Edit ",8,Me)])]))),128)),l.value.length===0?(i(),c("p",je," No users found. ")):$("",!0)])),t.value?(i(),D(ye,{key:2,onClose:x,class:"z-50"})):$("",!0),o.value?(i(),D(Y,{key:3,user:p.value,onClose:e,class:"z-50"},null,8,["user"])):$("",!0)]))}};export{Be as default};
