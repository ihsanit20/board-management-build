import{K as l,L as a}from"./index-DSO3MCpv.js";const c=l("institute",{state:()=>({institutes:[],liteInstitutes:[],institutesWithApplications:[],institutesWithoutApplications:[],totalInstitutes:0,activeInstitutes:0,centerInstitutes:0,withApplications:0,withoutApplications:0,pagination:{total:0,per_page:15,current_page:1,last_page:1},institute:null,loading:!1,error:null}),getters:{areas(i){return i.institutes.reduce((s,t)=>{const e=t.area.id,r=t.area.name;let n=s.find(o=>o.id===e);return n||(n={id:e,name:r,institutes:[]},s.push(n)),n.institutes.push({id:t.id,name:t.name,institute_code:t.institute_code}),s},[])}},actions:{async fetchInstitutes(i={}){var s,t;this.loading=!0;try{const e=await a.get("/institutes",{params:i});this.institutes=e.data.data||e.data,this.pagination={total:e.data.total||this.institutes.length,per_page:e.data.per_page||this.institutes.length,current_page:e.data.current_page||1,last_page:e.data.last_page||1}}catch(e){this.error=((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institutes"}finally{this.loading=!1}},async fetchLiteInstitutes(){var i,s;this.loading=!0;try{const t=await a.get("/institutes-lite");this.liteInstitutes=t.data}catch(t){this.error=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to fetch institutes"}finally{this.loading=!1}},async fetchInstitute(i){var s,t;this.loading=!0;try{const e=await a.get(`/institutes/${i}`);this.institute=e.data}catch(e){this.error=((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institute"}finally{this.loading=!1}},async findInstituteByCode(i){var s,t;if(i){this.loading=!0;try{const e=await a.get(`/institute-by-code/${i}`);return this.institute=e.data,this.institute}catch(e){this.error=((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institute"}finally{this.loading=!1}}},async createInstitute(i){var s,t;this.loading=!0;try{const e=await a.post("/institutes",i);this.institutes.push(e.data)}catch(e){this.error=((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to create institute"}finally{this.loading=!1}},async updateInstitute(i,s){var t,e;this.loading=!0;try{const r=await a.put(`/institutes/${i}`,s),n=this.institutes.findIndex(o=>o.id===i);n!==-1&&(this.institutes[n]=r.data)}catch(r){this.error=((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to update institute"}finally{this.loading=!1}},async deleteInstitute(i){var s,t;this.loading=!0;try{await a.delete(`/institutes/${i}`),this.institutes=this.institutes.filter(e=>e.id!==i)}catch(e){this.error=((t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete institute"}finally{this.loading=!1}},async fetchInstitutesWithApplications(){var i,s;this.loading=!0;try{const t=await a.get("/institutes-with-applications");this.institutesWithApplications=t.data}catch(t){this.error=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to fetch institutes with applications"}finally{this.loading=!1}},async fetchInstitutesWithoutApplications(){var i,s;this.loading=!0;try{const t=await a.get("/institutes-without-applications");this.institutesWithoutApplications=t.data}catch(t){this.error=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to fetch institutes without applications"}finally{this.loading=!1}},async fetchInstituteCounts(){var i,s;this.loading=!0;try{const t=await a.get("/institutes/counts");this.totalInstitutes=t.data.totalInstitutes,this.activeInstitutes=t.data.activeInstitutes,this.centerInstitutes=t.data.centerInstitutes}catch(t){this.error=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to fetch institute counts"}finally{this.loading=!1}},async fetchInstitutesApplicationStatusCounts(){var i,s;this.loading=!0;try{const t=await a.get("/institutes-application-status-counts");this.withApplications=t.data.withApplications,this.withoutApplications=t.data.withoutApplications}catch(t){this.error=((s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to fetch application status counts"}finally{this.loading=!1}}}});export{c as u};
