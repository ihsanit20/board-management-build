import{P as h,Q as a}from"./index-BXAMF6o-.js";const u=h("institute",{state:()=>({institutes:[],institutesWithApplications:[],institutesWithoutApplications:[],institutesByArea:[],totalInstitutes:0,activeInstitutes:0,centerInstitutes:0,withApplications:0,withoutApplications:0,pagination:{total:0,per_page:15,current_page:1,last_page:1},institute:null,loading:!1,error:null}),getters:{areas(e){return e.institutes.reduce((s,t)=>{const i=t.area.id,r=t.area.name;let n=s.find(o=>o.id===i);return n||(n={id:i,name:r,institutes:[]},s.push(n)),n.institutes.push({id:t.id,name:t.name,institute_code:t.institute_code}),s},[])}},actions:{async fetchInstitutes(e={}){var s,t;this.loading=!0;try{const i=await a.get("/institutes",{params:e});this.institutes=i.data.data||i.data,this.pagination={total:i.data.total||this.institutes.length,per_page:i.data.per_page||this.institutes.length,current_page:i.data.current_page||1,last_page:i.data.last_page||1}}catch(i){this.error=((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institutes"}finally{this.loading=!1}},async fetchInstitutesByArea(e,s="",t=""){var i,r;if(!e){this.error="Area ID is required";return}this.loading=!0,this.error=null;try{const n=await a.get(`/institutes-by-area?area_id=${e}&zamat_id=${s}&group_id=${t}`);this.institutesByArea=n.data}catch(n){this.error=((r=(i=n.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to fetch institutes by area"}finally{this.loading=!1}},async fetchInstitute(e){var s,t;this.loading=!0;try{const i=await a.get(`/institutes/${e}`);this.institute=i.data}catch(i){this.error=((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institute"}finally{this.loading=!1}},async findInstituteByCode(e){var s,t;if(e){this.loading=!0;try{const i=await a.get(`/institute-by-code/${e}`);return this.institute=i.data,this.institute}catch(i){this.error=((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch institute"}finally{this.loading=!1}}},async createInstitute(e){var s,t;this.loading=!0;try{const i=await a.post("/institutes",e);this.institutes.push(i.data)}catch(i){this.error=((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to create institute"}finally{this.loading=!1}},async updateInstitute(e,s){var t,i;this.loading=!0;try{const r=await a.put(`/institutes/${e}`,s),n=this.institutes.findIndex(o=>o.id===e);n!==-1&&(this.institutes[n]=r.data)}catch(r){this.error=((i=(t=r.response)==null?void 0:t.data)==null?void 0:i.message)||"Failed to update institute"}finally{this.loading=!1}},async deleteInstitute(e){var s,t;this.loading=!0;try{await a.delete(`/institutes/${e}`),this.institutes=this.institutes.filter(i=>i.id!==e)}catch(i){this.error=((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete institute"}finally{this.loading=!1}},async fetchInstitutesWithApplications(){var e,s;this.loading=!0;try{const t=await a.get("/institutes-with-applications");this.institutesWithApplications=t.data}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch institutes with applications"}finally{this.loading=!1}},async fetchInstitutesWithoutApplications(){var e,s;this.loading=!0;try{const t=await a.get("/institutes-without-applications");this.institutesWithoutApplications=t.data}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch institutes without applications"}finally{this.loading=!1}},async fetchInstituteCounts(){var e,s;this.loading=!0;try{const t=await a.get("/institutes/counts");this.totalInstitutes=t.data.totalInstitutes,this.activeInstitutes=t.data.activeInstitutes,this.centerInstitutes=t.data.centerInstitutes}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch institute counts"}finally{this.loading=!1}},async fetchInstitutesApplicationStatusCounts(){var e,s;this.loading=!0;try{const t=await a.get("/institutes-application-status-counts");this.withApplications=t.data.withApplications,this.withoutApplications=t.data.withoutApplications}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch application status counts"}finally{this.loading=!1}},async fetchInstitutesWithPhone(){var e,s;this.loading=!0;try{const t=await a.get("/institutes-with-phone");this.institutes=t.data}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch institutes"}finally{this.loading=!1}},async fetchCentersWithPhone(){var e,s;this.loading=!0;try{const t=await a.get("/centers-with-phone");this.institutes=t.data}catch(t){this.error=((s=(e=t.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch institutes"}finally{this.loading=!1}}}});export{u};
