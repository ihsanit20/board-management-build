import{P as b,r as l,Q as n}from"./index-4ATOSoLI.js";const L=b("result",()=>{const i=l([]),f=l([]),m=l([]),s=l(!1),v=l(null),d=l([]),c=l([]),h=l([]);async function y(u={}){var a,e,r;s.value=!0,i.value=[],f.value=[],m.value=[];try{const t=await n.get("/last-exam-result-data",{params:u});i.value=((a=t==null?void 0:t.data)==null?void 0:a.results)||[],f.value=((e=t==null?void 0:t.data)==null?void 0:e.students)||[],m.value=((r=t==null?void 0:t.data)==null?void 0:r.exam_subjects)||[]}catch(t){console.error("Error fetching result data:",t)}s.value=!1}async function g(u,a,e={}){var r;s.value=!0,i.value=[];try{const t=await n.post(`/last-exam-submit-mark/${u}/${a}`,e);i.value=((r=t==null?void 0:t.data)==null?void 0:r.results)||[]}catch(t){console.error("Error submitting marks:",t)}s.value=!1}async function $(u){s.value=!0,v.value=null;try{const a=await n.get(`/results/student/${u}`);v.value=(a==null?void 0:a.data)||null}catch(a){console.error("Error fetching student result:",a)}s.value=!1}async function x(u,a,e){s.value=!0,d.value=[];try{const r=await n.get(`/institutes/${u}/zamat/${a}/exam/${e}/results`);d.value=(r==null?void 0:r.data)||[]}catch(r){console.error("Error fetching institute results:",r)}s.value=!1}async function w(u,a,e=null,r=10){s.value=!0,c.value=[];let t=`/exam/${u}/zamat/${a}/merit-list`;e&&(t+=`/${e}`);try{const o=await n.get(t,{params:{limit:r}});c.value=(o==null?void 0:o.data)||[]}catch(o){console.error("Error fetching merit list:",o)}s.value=!1}async function E(){var a;if(!((a=c.value.students)!=null&&a.length)){alert("কোনো মেধাতালিকা পাওয়া যায়নি!");return}const u=c.value.students.map(e=>({student_id:e.student_id,rank:e.rank+(e.suffix?" "+e.suffix:"")}));try{const e=await n.post("/students/update-merit",{merit:u});alert(e.data.message||"মেধাতালিকা সফলভাবে সংরক্ষণ করা হয়েছে!")}catch(e){console.error("Error updating merit:",e),alert("মেধাতালিকা সংরক্ষণ করতে সমস্যা হয়েছে!")}}async function R(u,a,e=null){s.value=!0,h.value=[];let r=`/print/exam/${u}/zamat/${a}/merit-list`;e&&(r+=`/${e}`);try{const t=await n.get(r);h.value=(t==null?void 0:t.data)||[]}catch(t){console.error("Error fetching print merit list:",t)}s.value=!1}return{loading:s,results:i,students:f,examSubjects:m,studentResult:v,instituteResults:d,meritList:c,meritListPrint:h,fetchResultData:y,submitMarks:g,fetchStudentResult:$,fetchInstituteResults:x,fetchMeritList:w,storeMerit:E,printMeritList:R}});export{L as u};
