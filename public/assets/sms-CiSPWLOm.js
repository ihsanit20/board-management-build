import{N as d,O as r}from"./index-Dml9BmmA.js";const g=d("sms",{state:()=>({loading:!1,error:null,success:null,smsLogs:[],smsLogCount:0}),actions:{async sendSms({number:t,message:e,institute_name:s,institute_code:a,sms_parts:n,cost:c}){var l,i;this.loading=!0,this.error=null,this.success=null;try{const o=await r.post("/send-sms",{number:t,message:e,institute_name:s,institute_code:a,sms_parts:n,cost:c});return o.data.success?this.success="SMS sent successfully":this.error="SMS sending failed",o.data}catch(o){throw this.error=((i=(l=o.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to send SMS",o}finally{this.loading=!1}},async fetchSmsLogs(t=10){var e,s;this.loading=!0,this.error=null;try{const a=await r.get("/sms-logs",{params:{per_page:t}});a.data.success?this.smsLogs=a.data.data.data:this.error="Failed to fetch SMS logs"}catch(a){this.error=((s=(e=a.response)==null?void 0:e.data)==null?void 0:s.message)||"Failed to fetch SMS logs"}finally{this.loading=!1}},async fetchSmsLogCount(){var t,e;this.loading=!0,this.error=null;try{const s=await r.get("/sms-logs/count");s.data.success?this.smsLogCount=s.data.total:this.error="Failed to fetch SMS log count"}catch(s){this.error=((e=(t=s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to fetch SMS log count"}finally{this.loading=!1}}}});export{g as u};
